<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ConnectHub - Complete Prototype</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #4f46e5;
            --secondary: #ec4899;
            --accent: #06b6d4;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --bg-primary: #0f0f23;
            --bg-secondary: #1a1a2e;
            --bg-card: #16213e;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            background: var(--bg-primary);
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            padding-bottom: 70px;
        }

        /* Top Navigation Bar */
        .top-nav {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(22, 33, 62, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            padding: 8px 16px;
        }

        .nav-main {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 56px;
        }

        .nav-logo {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        .nav-actions {
            display: flex;
            gap: 8px;
        }

        .nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }

        .nav-btn:active {
            transform: scale(0.9);
            background: rgba(255, 255, 255, 0.1);
        }

        .badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--error);
            color: white;
            font-size: 10px;
            font-weight: 700;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 5px;
            border: 2px solid var(--bg-card);
        }

        /* Pill-Shaped Navigation Bar */
        .pill-nav-container {
            display: flex;
            gap: 8px;
            padding: 8px 16px 12px;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .pill-nav-container::-webkit-scrollbar {
            display: none;
        }

        .pill-nav-button {
            padding: 10px 24px;
            border-radius: 25px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .pill-nav-button:active {
            transform: scale(0.95);
        }

        .pill-nav-button.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            background: rgba(22, 33, 62, 0.98);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
            padding: 8px 16px 12px;
            z-index: 100;
        }

        .nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 12px;
            transition: all 0.2s;
            position: relative;
        }

        .nav-item:active {
            transform: scale(0.95);
            background: var(--glass);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item-icon {
            font-size: 24px;
        }

        .nav-item-label {
            font-size: 11px;
            font-weight: 600;
        }

        /* Content Container */
        .content {
            padding: 16px;
            padding-bottom: 80px;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
        }

        .section-link {
            font-size: 14px;
            color: var(--primary);
            cursor: pointer;
            font-weight: 600;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--glass-border);
        }

        /* Stories Section - Card Based */
        .stories-cards-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .story-card {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .story-card:active {
            transform: scale(0.98);
        }

        .story-card-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            position: relative;
        }

        .story-card-image.add {
            background: var(--glass);
            border: 2px dashed var(--glass-border);
        }

        .story-add-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .story-card-info {
            padding: 12px;
        }

        .story-card-name {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .story-card-meta {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Post Card */
        .post-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--glass-border);
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 12px;
        }

        .post-header-info {
            flex: 1;
        }

        .post-author {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .post-meta {
            font-size: 13px;
            color: var(--text-muted);
        }

        .post-menu {
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
        }

        .post-content {
            font-size: 15px;
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .post-image {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            margin-bottom: 12px;
        }

        .post-actions {
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            border-top: 1px solid var(--glass-border);
        }

        .post-action {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px;
            border-radius: 8px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .post-action:active {
            background: var(--glass);
        }

        .post-action.active {
            color: var(--error);
        }

        /* Create Post */
        .create-post {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .create-post-input {
            flex: 1;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 12px 16px;
            color: var(--text-muted);
            font-size: 15px;
        }

        .create-post-actions {
            display: flex;
            gap: 12px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--glass-border);
        }

        .create-action {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px;
            background: var(--glass);
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--bg-primary);
            z-index: 200;
            display: none;
            overflow-y: auto;
        }

        .modal.show {
            display: block;
        }

        .modal-header {
            position: sticky;
            top: 0;
            background: rgba(22, 33, 62, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 10;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--glass);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
        }

        .modal-title {
            flex: 1;
            font-size: 18px;
            font-weight: 700;
        }

        .modal-content {
            padding: 16px;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 12px;
            padding: 14px 24px;
            font-size: 15px;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn:disabled {
            opacity: 0.5;
        }

        /* List Items */
        .list-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .list-item:active {
            transform: scale(0.98);
        }

        .list-item-icon {
            font-size: 24px;
            width: 40px;
            text-align: center;
        }

        .list-item-content {
            flex: 1;
        }

        .list-item-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .list-item-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .list-item-arrow {
            font-size: 18px;
            color: var(--text-muted);
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-card);
            border: 1px solid var(--glass-border);
            padding: 12px 20px;
            border-radius: 24px;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .toast.show {
            display: block;
            animation: slideUp 0.3s;
        }

        /* In-App Notification Banner */
        .in-app-notification {
            position: fixed;
            top: -200px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 32px);
            max-width: 448px;
            background: var(--bg-card);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 12px 16px;
            z-index: 1001;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .in-app-notification.show {
            top: 80px;
            animation: notificationBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .in-app-notification:active {
            transform: translateX(-50%) scale(0.98);
        }

        .in-app-notification-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .in-app-notification-content {
            flex: 1;
            min-width: 0;
        }

        .in-app-notification-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .in-app-notification-text {
            font-size: 13px;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .in-app-notification-close {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--glass);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
            opacity: 0.7;
        }

        @keyframes slideUp {
            from {
                transform: translate(-50%, 20px);
                opacity: 0;
            }
            to {
                transform: translate(-50%, 0);
                opacity: 1;
            }
        }

        @keyframes notificationBounce {
            0% {
                top: -200px;
            }
            60% {
                top: 90px;
            }
            80% {
                top: 75px;
            }
            100% {
                top: 80px;
            }
        }

        /* Input Fields */
        .input-field {
            width: 100%;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 14px 16px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: inherit;
            margin-bottom: 12px;
        }

        .input-field::placeholder {
            color: var(--text-muted);
        }

        .textarea-field {
            min-height: 120px;
            resize: vertical;
        }

        /* Toggle Switch */
        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .toggle-switch {
            width: 50px;
            height: 28px;
            background: var(--text-muted);
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-switch.active {
            background: var(--success);
        }

        .toggle-slider {
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            right: calc(100% - 26px);
            transition: all 0.3s;
        }

        .toggle-switch.active .toggle-slider {
            right: 2px;
        }

        /* Video Camera Interface */
        .camera-interface {
            position: relative;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
        }

        .camera-controls {
            position: absolute;
            bottom: 30px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 20px;
        }

        .camera-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--glass);
            border: 3px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
        }

        .camera-btn.record {
            width: 80px;
            height: 80px;
            background: var(--error);
        }

        /* Dating Cards */
        .dating-card {
            background: var(--bg-card);
            border-radius: 24px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 1px solid var(--glass-border);
        }

        .dating-card-image {
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
        }

        .dating-card-info {
            padding: 20px;
        }

        .dating-card-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .dating-card-details {
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .dating-actions {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .dating-btn {
            flex: 1;
            padding: 16px;
            border-radius: 50%;
            border: none;
            font-size: 32px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .dating-btn.pass {
            background: var(--glass);
        }

        .dating-btn.like {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        .dating-btn.super {
            background: linear-gradient(135deg, var(--accent), var(--success));
        }

        /* Game Card */
        .game-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--glass-border);
            display: flex;
            gap: 16px;
            cursor: pointer;
        }

        .game-icon {
            width: 80px;
            height: 80px;
            border-radius: 16px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            flex-shrink: 0;
        }

        .game-info {
            flex: 1;
        }

        .game-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .game-stats {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Stats Display */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Search Bar */
        .search-bar {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 16px;
        }

        .search-input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 15px;
            outline: none;
        }

        /* Profile Header */
        .profile-header {
            text-align: center;
            padding: 20px;
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            margin: 0 auto 16px;
            border: 4px solid var(--glass-border);
        }

        .profile-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .profile-bio {
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .profile-stats {
            display: flex;
            justify-content: center;
            gap: 32px;
            margin-bottom: 20px;
        }

        .profile-stat {
            text-align: center;
        }

        .profile-stat-value {
            font-size: 20px;
            font-weight: 700;
        }

        .profile-stat-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Event Card */
        .event-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--glass-border);
        }

        .event-date {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .event-date-box {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .event-month {
            font-size: 12px;
            font-weight: 600;
        }

        .event-day {
            font-size: 24px;
            font-weight: 700;
        }

        .event-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .event-details {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Live Badge */
        .live-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            background: var(--error);
            color: white;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Message List */
        .message-list {
            margin-bottom: 16px;
        }

        .message-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .message-item:active {
            background: rgba(255, 255, 255, 0.08);
        }

        .message-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }

        .message-content {
            flex: 1;
            min-width: 0;
        }

        .message-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .message-preview {
            font-size: 14px;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .message-time {
            font-size: 12px;
            color: var(--text-muted);
        }

        .message-unread {
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
        }

        /* Chat Interface */
        .chat-messages {
            padding: 16px;
            height: calc(100vh - 200px);
            overflow-y: auto;
        }

        .chat-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            margin-bottom: 12px;
            font-size: 15px;
            line-height: 1.4;
        }

        .chat-bubble.sent {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .chat-bubble.received {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-bottom-left-radius: 4px;
        }

        .chat-input-container {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            background: rgba(22, 33, 62, 0.98);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
            padding: 12px 16px;
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 10px 16px;
            color: var(--text-primary);
            font-size: 15px;
            outline: none;
        }

        .chat-send-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }

        /* Notification Item */
        .notification-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .notification-item.unread {
            background: rgba(79, 70, 229, 0.1);
            border-color: var(--primary);
        }

        .notification-icon {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-text {
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 4px;
        }

        .notification-time {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Group Card */
        .group-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--glass-border);
            cursor: pointer;
        }

        .group-header {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .group-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            flex-shrink: 0;
        }

        .group-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .group-members {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Save Collection */
        .collection-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 0;
            margin-bottom: 16px;
            border: 1px solid var(--glass-border);
            overflow: hidden;
            cursor: pointer;
        }

        .collection-preview {
            width: 100%;
            height: 150px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
        }

        .collection-info {
            padding: 16px;
        }

        .collection-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .collection-count {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* FAB Button */
        .fab {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            z-index: 99;
        }

        .fab:active {
            transform: scale(0.95);
        }

        /* Trending Card */
        .trending-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--glass-border);
        }

        .trending-tag {
            display: inline-block;
            padding: 6px 12px;
            background: var(--primary);
            border-radius: 16px;
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .trending-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .trending-stats {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Friend Card */
        .friend-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 8px;
        }

        .friend-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .friend-info {
            flex: 1;
        }

        .friend-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .friend-mutual {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .friend-actions {
            display: flex;
            gap: 8px;
        }

        .friend-btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }

        .friend-btn.primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .friend-btn.secondary {
            background: var(--glass);
            color: var(--text-primary);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Top Navigation -->
        <div class="top-nav">
            <div class="nav-main">
                <div class="nav-logo">ConnectHub</div>
                <div class="nav-actions">
                    <div class="nav-btn" onclick="openModal('createNew')">➕</div>
                    <div class="nav-btn" onclick="openModal('searchModal')">🔍</div>
                    <div class="nav-btn" onclick="openScreen('menu')">☰</div>
                </div>
            </div>
            
            <!-- Pill-Shaped Navigation Bar -->
            <div class="pill-nav-container">
                <div class="pill-nav-button active" onclick="switchPillTab(this, 'feed')">Feed</div>
                <div class="pill-nav-button" onclick="switchPillTab(this, 'stories')">Stories</div>
                <div class="pill-nav-button" onclick="switchPillTab(this, 'live')">Live</div>
                <div class="pill-nav-button" onclick="switchPillTab(this, 'trending')">Trending</div>
                <div class="pill-nav-button" onclick="switchPillTab(this, 'groups')">Groups</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- SECTION 1: FEED SCREEN -->
            <div id="feed-screen" class="screen active">
                <!-- Create Post -->
                <div class="card" onclick="openModal('createPost')">
                    <div style="display: flex; align-items: center; gap: 12px; cursor: pointer;">
                        <div class="post-avatar">👤</div>
                        <div class="create-post-input">What's on your mind?</div>
                    </div>
                    <div class="create-post-actions">
                        <div class="create-action" onclick="event.stopPropagation(); openModal('addPhoto')">
                            📷 Photo
                        </div>
                        <div class="create-action" onclick="event.stopPropagation(); openModal('addVideo')">
                            🎥 Video
                        </div>
                        <div class="create-action" onclick="event.stopPropagation(); openModal('addFeeling')">
                            😊 Feeling
                        </div>
                    </div>
                </div>

                <!-- Feed Posts -->
                <div class="post-card">
                    <div class="post-header">
                        <div class="post-avatar">👤</div>
                        <div class="post-header-info">
                            <div class="post-author">Sarah Johnson</div>
                            <div class="post-meta">2 hours ago • 🌍 Public</div>
                        </div>
                        <div class="post-menu" onclick="openModal('postOptions')">⋯</div>
                    </div>
                    <div class="post-content">
                        Just finished an amazing project! Feeling proud 🎉
                    </div>
                    <div class="post-image">🎨</div>
                    <div class="post-actions">
                        <div class="post-action" onclick="toggleLikePost(this)">
                            <span>👍</span> Like
                        </div>
                        <div class="post-action" onclick="openModal('comments')">
                            <span>💬</span> Comment
                        </div>
                        <div class="post-action" onclick="sharePost()">
                            <span>🔄</span> Share
                        </div>
                    </div>
                </div>

                <div class="post-card">
                    <div class="post-header">
                        <div class="post-avatar">😊</div>
                        <div class="post-header-info">
                            <div class="post-author">Mike Chen</div>
                            <div class="post-meta">5 hours ago • 👥 Friends</div>
                        </div>
                        <div class="post-menu" onclick="openModal('postOptions')">⋯</div>
                    </div>
                    <div class="post-content">
                        Beautiful sunset today! Nature is amazing 🌅
                    </div>
                    <div class="post-image">🌅</div>
                    <div class="post-actions">
                        <div class="post-action" onclick="toggleLikePost(this)">
                            <span>👍</span> Like
                        </div>
                        <div class="post-action" onclick="openModal('comments')">
                            <span>💬</span> Comment
                        </div>
                        <div class="post-action" onclick="sharePost()">
                            <span>🔄</span> Share
                        </div>
                    </div>
                </div>
            </div>

            <!-- STORIES SCREEN (NEW) -->
            <div id="stories-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">📖 Stories</div>
                </div>

                <!-- Stories as Cards -->
                <div class="stories-cards-container">
                    <div class="story-card" onclick="openModal('createStory')">
                        <div class="story-card-image add">
                            <div class="story-add-icon">➕</div>
                        </div>
                        <div class="story-card-info">
                            <div class="story-card-name">Create Story</div>
                            <div class="story-card-meta">Share a moment</div>
                        </div>
                    </div>
                    <div class="story-card" onclick="openModal('viewStory')">
                        <div class="story-card-image" style="background: linear-gradient(135deg, #4f46e5, #ec4899);">
                            👤
                        </div>
                        <div class="story-card-info">
                            <div class="story-card-name">Sarah Johnson</div>
                            <div class="story-card-meta">2h ago</div>
                        </div>
                    </div>
                    <div class="story-card" onclick="openModal('viewStory')">
                        <div class="story-card-image" style="background: linear-gradient(135deg, #10b981, #06b6d4);">
                            😊
                        </div>
                        <div class="story-card-info">
                            <div class="story-card-name">Mike Chen</div>
                            <div class="story-card-meta">5h ago</div>
                        </div>
                    </div>
                    <div class="story-card" onclick="openModal('viewStory')">
                        <div class="story-card-image" style="background: linear-gradient(135deg, #f59e0b, #ef4444);">
                            🎨
                        </div>
                        <div class="story-card-info">
                            <div class="story-card-name">Emily Rodriguez</div>
                            <div class="story-card-meta">8h ago</div>
                        </div>
                    </div>
                    <div class="story-card" onclick="openModal('viewStory')">
                        <div class="story-card-image" style="background: linear-gradient(135deg, #06b6d4, #4f46e5);">
                            🚀
                        </div>
                        <div class="story-card-info">
                            <div class="story-card-name">David Kim</div>
                            <div class="story-card-meta">12h ago</div>
                        </div>
                    </div>
                    <div class="story-card" onclick="openModal('viewStory')">
                        <div class="story-card-image" style="background: linear-gradient(135deg, #ec4899, #ef4444);">
                            🎭
                        </div>
                        <div class="story-card-info">
                            <div class="story-card-name">Jessica Lee</div>
                            <div class="story-card-meta">15h ago</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION 2: LIVE SCREEN -->
            <div id="live-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">🔴 Live Now</div>
                    <div class="section-link" onclick="openModal('liveSettings')">Settings</div>
                </div>

                <div class="card">
                    <div class="list-item" onclick="openModal('startLive')">
                        <div class="list-item-icon">🎥</div>
                        <div class="list-item-content">
                            <div class="list-item-title">Go Live</div>
                            <div class="list-item-subtitle">Start broadcasting now</div>
                        </div>
                        <div class="list-item-arrow">→</div>
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">Active Streams</div>
                </div>

                <div class="card" onclick="openModal('viewLive')">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div class="post-avatar">👤</div>
                        <div style="flex: 1;">
                            <div class="post-author">Sarah's Gaming Stream</div>
                            <div class="post-meta">
                                <span class="live-badge">
                                    <span class="live-dot"></span> LIVE
                                </span>
                                <span style="margin-left: 8px;">1.2K watching</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-image">🎮</div>
                    <div class="post-content">Epic gaming session! Come join the fun!</div>
                </div>

                <div class="list-item" onclick="openModal('savedLives')">
                    <div class="list-item-icon">🔖</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Saved Lives</div>
                        <div class="list-item-subtitle">12 saved broadcasts</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>

            <!-- SECTION 3: TRENDING SCREEN -->
            <div id="trending-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">🔥 Trending</div>
                </div>

                <div class="trending-card" onclick="openModal('trendingDetails')">
                    <div class="trending-tag">#1 TRENDING</div>
                    <div class="trending-title">New AI Features Released</div>
                    <div class="trending-stats">45.2K posts • Trending for 3 hours</div>
                    <div class="post-actions" style="border-top: 1px solid var(--glass-border); margin-top: 12px;">
                        <div class="post-action" onclick="event.stopPropagation(); toggleLikePost(this)">
                            <span>👍</span> Like
                        </div>
                        <div class="post-action" onclick="event.stopPropagation(); openModal('comments')">
                            <span>💬</span> Comment
                        </div>
                        <div class="post-action" onclick="event.stopPropagation(); sharePost()">
                            <span>🔄</span> Share
                        </div>
                    </div>
                </div>

                <div class="trending-card" onclick="openModal('trendingDetails')">
                    <div class="trending-tag">#2 TRENDING</div>
                    <div class="trending-title">Tech Conference 2025</div>
                    <div class="trending-stats">32.1K posts • Trending for 1 hour</div>
                    <div class="post-actions" style="border-top: 1px solid var(--glass-border); margin-top: 12px;">
                        <div class="post-action" onclick="event.stopPropagation(); toggleLikePost(this)">
                            <span>👍</span> Like
                        </div>
                        <div class="post-action" onclick="event.stopPropagation(); openModal('comments')">
                            <span>💬</span> Comment
                        </div>
                        <div class="post-action" onclick="event.stopPropagation(); sharePost()">
                            <span>🔄</span> Share
                        </div>
                    </div>
                </div>

                <div class="trending-card" onclick="openModal('trendingDetails')">
                    <div class="trending-tag">#3 TRENDING</div>
                    <div class="trending-title">Climate Action Summit</div>
                    <div class="trending-stats">28.5K posts • Trending for 5 hours</div>
                    <div class="post-actions" style="border-top: 1px solid var(--glass-border); margin-top: 12px;">
                        <div class="post-action" onclick="event.stopPropagation(); toggleLikePost(this)">
                            <span>👍</span> Like
                        </div>
                        <div class="post-action" onclick="event.stopPropagation(); openModal('comments')">
                            <span>💬</span> Comment
                        </div>
                        <div class="post-action" onclick="event.stopPropagation(); sharePost()">
                            <span>🔄</span> Share
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION 4: GROUPS SCREEN -->
            <div id="groups-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">👥 Your Groups</div>
                    <div class="section-link" onclick="openModal('createGroup')">+ New</div>
                </div>

                <div class="group-card" onclick="openModal('groupDetails')">
                    <div class="group-header">
                        <div class="group-icon">💻</div>
                        <div>
                            <div class="group-title">Tech Enthusiasts</div>
                            <div class="group-members">2,456 members</div>
                        </div>
                    </div>
                    <div style="font-size: 14px; color: var(--text-secondary);">
                        A community for technology lovers
                    </div>
                </div>

                <div class="group-card" onclick="openModal('groupDetails')">
                    <div class="group-header">
                        <div class="group-icon">🎨</div>
                        <div>
                            <div class="group-title">Creative Designers</div>
                            <div class="group-members">1,832 members</div>
                        </div>
                    </div>
                    <div style="font-size: 14px; color: var(--text-secondary);">
                        Share your creative work and ideas
                    </div>
                </div>

                <div class="group-card" onclick="openModal('groupDetails')">
                    <div class="group-header">
                        <div class="group-icon">📚</div>
                        <div>
                            <div class="group-title">Book Club</div>
                            <div class="group-members">945 members</div>
                        </div>
                    </div>
                    <div style="font-size: 14px; color: var(--text-secondary);">
                        Monthly book discussions and reviews
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">Discover Groups</div>
                </div>

                <div class="group-card">
                    <div class="group-header">
                        <div class="group-icon">🎮</div>
                        <div>
                            <div class="group-title">Gaming Community</div>
                            <div class="group-members">5,234 members</div>
                        </div>
                    </div>
                    <button class="btn">Join Group</button>
                </div>
            </div>

            <!-- SECTION 10: FRIENDS SCREEN -->
            <div id="friends-screen" class="screen">
                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" class="search-input" placeholder="Search friends..." />
                </div>

                <div class="section-header">
                    <div class="section-title">All Friends</div>
                    <div class="section-link" onclick="openModal('allFriends')">See All (234)</div>
                </div>

                <div class="friend-card">
                    <div class="friend-avatar">👤</div>
                    <div class="friend-info">
                        <div class="friend-name">Sarah Johnson</div>
                        <div class="friend-mutual">12 mutual friends</div>
                    </div>
                    <div class="friend-actions">
                        <button class="friend-btn primary" onclick="sendMessage()">Message</button>
                    </div>
                </div>

                <div class="friend-card">
                    <div class="friend-avatar">😊</div>
                    <div class="friend-info">
                        <div class="friend-name">Mike Chen</div>
                        <div class="friend-mutual">8 mutual friends</div>
                    </div>
                    <div class="friend-actions">
                        <button class="friend-btn primary" onclick="sendMessage()">Message</button>
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">People You May Know</div>
                </div>

                <div class="friend-card">
                    <div class="friend-avatar">🎨</div>
                    <div class="friend-info">
                        <div class="friend-name">Emily Rodriguez</div>
                        <div class="friend-mutual">5 mutual friends</div>
                    </div>
                    <div class="friend-actions">
                        <button class="friend-btn primary" onclick="addFriend(this)">Add Friend</button>
                        <button class="friend-btn secondary" onclick="removeSuggestion(this)">✕</button>
                    </div>
                </div>

                <div class="friend-card">
                    <div class="friend-avatar">🚀</div>
                    <div class="friend-info">
                        <div class="friend-name">David Kim</div>
                        <div class="friend-mutual">3 mutual friends</div>
                    </div>
                    <div class="friend-actions">
                        <button class="friend-btn primary" onclick="addFriend(this)">Add Friend</button>
                        <button class="friend-btn secondary" onclick="removeSuggestion(this)">✕</button>
                    </div>
                </div>
            </div>

            <!-- SECTION 11: DATING SCREEN -->
            <div id="dating-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">💕 Dating</div>
                    <div class="section-link" onclick="openModal('datingSettings')">Settings</div>
                </div>

                <div class="dating-card">
                    <div class="dating-card-image">👤</div>
                    <div class="dating-card-info">
                        <div class="dating-card-name">Sarah, 28</div>
                        <div class="dating-card-details">📍 5 miles away • Artist & Designer</div>
                        <div class="post-content">Love hiking, photography, and meeting new people ✨</div>
                        <div class="dating-actions" style="justify-content: space-between;">
                            <button class="dating-btn pass" onclick="passDatingProfile()">✕</button>
                            <button class="dating-btn super" onclick="superLike()">⭐</button>
                            <button class="dating-btn like" onclick="likeDatingProfile()">💚</button>
                        </div>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card" onclick="openModal('recentMatches')">
                        <div class="stat-value">12</div>
                        <div class="stat-label">New Matches</div>
                    </div>
                    <div class="stat-card" onclick="openModal('profileViews')">
                        <div class="stat-value">45</div>
                        <div class="stat-label">Profile Views</div>
                    </div>
                    <div class="stat-card" onclick="openModal('superLikes')">
                        <div class="stat-value">3</div>
                        <div class="stat-label">Super Likes Left</div>
                    </div>
                    <div class="stat-card" onclick="openModal('todayActivity')">
                        <div class="stat-value">23</div>
                        <div class="stat-label">Today's Activity</div>
                    </div>
                </div>
            </div>

            <!-- SECTION 12: PROFILE SCREEN -->
            <div id="profile-screen" class="screen">
                <div class="profile-header">
                    <div class="profile-avatar-large">👤</div>
                    <div class="profile-name">John Doe</div>
                    <div class="profile-bio">Tech enthusiast | Traveler | Coffee lover ☕</div>
                    <div class="profile-stats">
                        <div class="profile-stat" onclick="openModal('friendsList')">
                            <div class="profile-stat-value">234</div>
                            <div class="profile-stat-label">Friends</div>
                        </div>
                        <div class="profile-stat" onclick="openModal('followersList')">
                            <div class="profile-stat-value">1.2K</div>
                            <div class="profile-stat-label">Followers</div>
                        </div>
                        <div class="profile-stat" onclick="openModal('followingList')">
                            <div class="profile-stat-value">456</div>
                            <div class="profile-stat-label">Following</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 12px; margin-top: 12px;">
                        <button class="btn" onclick="openModal('editProfile')" style="flex: 1;">Edit Profile</button>
                        <button class="btn" onclick="shareProfile()" style="flex: 1;">Share Profile</button>
                    </div>
                </div>

                <div class="section-header" style="cursor: pointer;" onclick="openModal('allPosts')">
                    <div class="section-title">Recent Posts</div>
                    <div class="section-link" onclick="event.stopPropagation(); openModal('allPosts')">See All</div>
                </div>

                <div class="post-card" style="cursor: pointer;" onclick="openModal('allPosts')">
                    <div class="post-content">Great day at the beach! 🏖️</div>
                    <div class="post-image">🏖️</div>
                    <div class="post-meta">Yesterday at 3:24 PM</div>
                </div>
            </div>

            <!-- SECTION 14: SAVED SCREEN -->
            <div id="saved-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">🔖 Saved Items</div>
                    <div class="section-link" onclick="openModal('createCollection')">+ Collection</div>
                </div>

                <div class="section-header">
                    <div class="section-title">Collections</div>
                </div>

                <div class="collection-card" onclick="openModal('viewCollection')">
                    <div class="collection-preview">📸</div>
                    <div class="collection-info">
                        <div class="collection-title">Travel Inspiration</div>
                        <div class="collection-count">24 items</div>
                    </div>
                </div>

                <div class="collection-card" onclick="openModal('viewCollection')">
                    <div class="collection-preview">🍳</div>
                    <div class="collection-info">
                        <div class="collection-title">Recipes</div>
                        <div class="collection-count">18 items</div>
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">Recent Saves</div>
                </div>

                <div class="post-card">
                    <div class="post-content">Amazing sunset photography tips!</div>
                    <div class="post-image">📷</div>
                    <div class="post-meta">Saved 2 hours ago</div>
                </div>
            </div>

            <!-- SECTION 15: EVENTS SCREEN -->
            <div id="events-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">📅 Events</div>
                    <div class="section-link" onclick="openModal('createEvent')">+ Create</div>
                </div>

                <div class="section-header">
                    <div class="section-title">Upcoming</div>
                </div>

                <div class="event-card" onclick="openModal('viewEvent')">
                    <div class="event-date">
                        <div class="event-date-box">
                            <div class="event-month">NOV</div>
                            <div class="event-day">15</div>
                        </div>
                        <div>
                            <div class="event-title">Tech Conference 2025</div>
                            <div class="event-details">📍 Convention Center • 9:00 AM</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px; margin-top: 12px;">
                        <button class="btn" style="flex: 1;" onclick="event.stopPropagation(); markInterested()">Interested</button>
                        <button class="btn" style="flex: 1;" onclick="event.stopPropagation(); shareEvent()">Share</button>
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">Hosting</div>
                </div>

                <div class="event-card" onclick="openModal('viewEvent')">
                    <div class="event-date">
                        <div class="event-date-box">
                            <div class="event-month">NOV</div>
                            <div class="event-day">20</div>
                        </div>
                        <div>
                            <div class="event-title">Coffee Meetup</div>
                            <div class="event-details">📍 Starbucks Downtown • 3:00 PM</div>
                        </div>
                    </div>
                    <div class="post-meta" style="margin-top: 8px;">12 people interested</div>
                </div>

                <div class="section-header">
                    <div class="section-title">Past Events</div>
                </div>

                <div class="event-card" onclick="openModal('viewEvent')">
                    <div class="event-date">
                        <div class="event-date-box">
                            <div class="event-month">OCT</div>
                            <div class="event-day">28</div>
                        </div>
                        <div>
                            <div class="event-title">Halloween Party</div>
                            <div class="event-details">Attended</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION 16: GAMING HUB SCREEN -->
            <div id="gaming-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">🎮 Gaming Hub</div>
                    <div class="section-link" onclick="openModal('gamingNotifications')">
                        <span>🔔</span> Notifications
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">Level 42</div>
                        <div class="stat-label">Gaming Level</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">156</div>
                        <div class="stat-label">Games Won</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">68%</div>
                        <div class="stat-label">Win Rate</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">230</div>
                        <div class="stat-label">Total Games</div>
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">Play Now</div>
                    <div class="section-link" onclick="openModal('allGames')">View All</div>
                </div>

                <div class="game-card" onclick="playGame('tetris')">
                    <div class="game-icon">🟦</div>
                    <div class="game-info">
                        <div class="game-title">Block Blitz (Tetris)</div>
                        <div class="game-stats">Play time: 12h 34m • High Score: 24,500</div>
                    </div>
                </div>

                <div class="game-card" onclick="playGame('candy')">
                    <div class="game-icon">🍬</div>
                    <div class="game-info">
                        <div class="game-title">Candy Crush</div>
                        <div class="game-stats">Play time: 8h 22m • High Score: 18,900</div>
                    </div>
                </div>

                <div class="game-card" onclick="playGame('cards')">
                    <div class="game-icon">🃏</div>
                    <div class="game-info">
                        <div class="game-title">Card Champion</div>
                        <div class="game-stats">Play time: 15h 45m • High Score: 5,670</div>
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">Leaderboard</div>
                    <div class="section-link" onclick="openModal('fullLeaderboard')">View All</div>
                </div>

                <div class="list-item" onclick="openModal('fullLeaderboard')" style="cursor: pointer;">
                    <div style="font-size: 24px; font-weight: 700; color: #ffd700;">🥇</div>
                    <div class="list-item-content">
                        <div class="list-item-title">ProGamer123</div>
                        <div class="list-item-subtitle">5,890 points</div>
                    </div>
                </div>

                <div class="list-item" onclick="openModal('fullLeaderboard')" style="cursor: pointer;">
                    <div style="font-size: 24px; font-weight: 700; color: #c0c0c0;">🥈</div>
                    <div class="list-item-content">
                        <div class="list-item-title">GameMaster</div>
                        <div class="list-item-subtitle">5,234 points</div>
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">Daily Challenges</div>
                </div>

                <div class="card">
                    <div class="list-item-title">Win 3 games today</div>
                    <div style="margin: 12px 0;">
                        <div style="background: var(--glass); height: 8px; border-radius: 4px; overflow: hidden;">
                            <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); width: 66%; height: 100%;"></div>
                        </div>
                    </div>
                    <div class="list-item-subtitle">2/3 completed • Reward: 500 XP</div>
                </div>
            </div>

            <!-- SECTION 9: MEDIA SCREEN -->
            <div id="media-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">📹 Media</div>
                </div>
                <div class="camera-interface">
                    📹
                    <div style="position: absolute; top: 20px; right: 20px; display: flex; gap: 12px;">
                        <div class="nav-btn" onclick="openModal('cameraSettings')">⚙️</div>
                        <div class="nav-btn" onclick="switchCamera()">🔄</div>
                    </div>
                    <div class="camera-controls">
                        <div class="camera-btn" onclick="openGallery()">🖼️</div>
                        <div class="camera-btn record" onclick="toggleRecording()">⏺️</div>
                        <div class="camera-btn" onclick="openModal('goLive')">🔴</div>
                    </div>
                    <div style="position: absolute; bottom: 120px; display: flex; gap: 12px;">
                        <button class="btn" onclick="openModal('arFeatures')">AR Effects</button>
                        <button class="btn" onclick="openModal('postOptions')">Post</button>
                    </div>
                </div>
            </div>

            <!-- SECTION 13: SETTINGS SCREEN -->
            <div id="settings-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">⚙️ Settings</div>
                </div>

                <div class="list-item" onclick="openModal('editPersonalInfo')">
                    <div class="list-item-icon">👤</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Edit Personal Info</div>
                        <div class="list-item-subtitle">Name, email, phone</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('changePassword')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Change Password</div>
                        <div class="list-item-subtitle">Update your password</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('accountPreferences')">
                    <div class="list-item-icon">⚙️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Account Preferences</div>
                        <div class="list-item-subtitle">Language, timezone</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('privacySettings')">
                    <div class="list-item-icon">🔐</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Privacy Settings</div>
                        <div class="list-item-subtitle">Who can see your content</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('blockingSettings')">
                    <div class="list-item-icon">🚫</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Blocking Settings</div>
                        <div class="list-item-subtitle">Manage blocked accounts</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('dataSettings')">
                    <div class="list-item-icon">💾</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Data Settings</div>
                        <div class="list-item-subtitle">Download your data</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('manageDevices')">
                    <div class="list-item-icon">📱</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Manage Login Devices</div>
                        <div class="list-item-subtitle">View and manage devices</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Push Notifications</div>
                        <div class="list-item-subtitle">Get notified about activity</div>
                    </div>
                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>

                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">In-App Notifications</div>
                        <div class="list-item-subtitle">Show notification banners</div>
                    </div>
                    <div class="toggle-switch active" id="inAppNotificationsToggle" onclick="toggleInAppNotifications(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>

                <div class="list-item" onclick="openModal('emailPreferences')">
                    <div class="list-item-icon">📧</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Email Preferences</div>
                        <div class="list-item-subtitle">Manage email notifications</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('aboutConnectHub')">
                    <div class="list-item-icon">ℹ️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">About ConnectHub</div>
                        <div class="list-item-subtitle">Version 2.5.1</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('termsOfService')">
                    <div class="list-item-icon">📄</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Terms of Service</div>
                        <div class="list-item-subtitle">Legal information</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <button class="btn" style="margin-top: 20px; background: var(--error);">
                    Logout
                </button>
            </div>

            <!-- SECTION 7: MESSAGES SCREEN -->
            <div id="messages-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">💬 Messages</div>
                    <div class="section-link" onclick="openModal('newMessage')">+ New</div>
                </div>

                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" class="search-input" placeholder="Search messages..." />
                </div>

                <div class="message-list">
                    <div class="message-item" onclick="openModal('chatWindow')">
                        <div class="message-avatar">👤</div>
                        <div class="message-content">
                            <div class="message-name">Sarah Johnson</div>
                            <div class="message-preview">Hey! How are you doing?</div>
                        </div>
                        <div>
                            <div class="message-time">2m</div>
                            <div class="message-unread">3</div>
                        </div>
                    </div>

                    <div class="message-item" onclick="openModal('chatWindow')">
                        <div class="message-avatar">😊</div>
                        <div class="message-content">
                            <div class="message-name">Mike Chen</div>
                            <div class="message-preview">That's awesome!</div>
                        </div>
                        <div>
                            <div class="message-time">1h</div>
                        </div>
                    </div>

                    <div class="message-item" onclick="openModal('chatWindow')">
                        <div class="message-avatar">🎨</div>
                        <div class="message-content">
                            <div class="message-name">Emily Rodriguez</div>
                            <div class="message-preview">Check out my new design!</div>
                        </div>
                        <div>
                            <div class="message-time">3h</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION 8: NOTIFICATIONS SCREEN -->
            <div id="notifications-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">🔔 Notifications</div>
                    <div class="section-link" onclick="markAllAsRead()">Mark all as read</div>
                </div>

                <div class="notification-item unread" onclick="goToPost(this)">
                    <div class="notification-icon">👍</div>
                    <div class="notification-content">
                        <div class="notification-text">
                            <strong>Sarah Johnson</strong> liked your post
                        </div>
                        <div class="notification-time">5 minutes ago</div>
                    </div>
                </div>

                <div class="notification-item unread" onclick="goToPost(this)">
                    <div class="notification-icon">💬</div>
                    <div class="notification-content">
                        <div class="notification-text">
                            <strong>Mike Chen</strong> commented on your photo
                        </div>
                        <div class="notification-time">1 hour ago</div>
                    </div>
                </div>

                <div class="notification-item" onclick="goToPost(this)">
                    <div class="notification-icon">👥</div>
                    <div class="notification-content">
                        <div class="notification-text">
                            <strong>Emily Rodriguez</strong> sent you a friend request
                        </div>
                        <div class="notification-time">3 hours ago</div>
                    </div>
                </div>

                <div class="notification-item" onclick="goToPost(this)">
                    <div class="notification-icon">📅</div>
                    <div class="notification-content">
                        <div class="notification-text">
                            <strong>Tech Conference 2025</strong> is starting tomorrow
                        </div>
                        <div class="notification-time">5 hours ago</div>
                    </div>
                </div>

                <div class="notification-item" onclick="goToPost(this)">
                    <div class="notification-icon">🎮</div>
                    <div class="notification-content">
                        <div class="notification-text">
                            You leveled up to <strong>Level 42</strong>!
                        </div>
                        <div class="notification-time">Yesterday</div>
                    </div>
                </div>
            </div>

            <!-- SECTION 17: HELP & SUPPORT SCREEN -->
            <div id="help-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">💡 Help & Support</div>
                </div>

                <div class="section-header">
                    <div class="section-title">Popular Topics</div>
                </div>

                <div class="list-item" onclick="openModal('accountSecurity')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Account Security</div>
                        <div class="list-item-subtitle">Password, 2FA, login issues</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('privacyHelp')">
                    <div class="list-item-icon">🔐</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Privacy Settings</div>
                        <div class="list-item-subtitle">Control who sees your content</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('messagingHelp')">
                    <div class="list-item-icon">💬</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Messaging Features</div>
                        <div class="list-item-subtitle">Send messages, photos, videos</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="section-header">
                    <div class="section-title">Report a Problem</div>
                </div>

                <div class="list-item" onclick="openModal('reportProblem')">
                    <div class="list-item-icon">⚠️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Report an Issue</div>
                        <div class="list-item-subtitle">Technical problems, bugs</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="section-header">
                    <div class="section-title">Contact Support</div>
                </div>

                <div class="list-item" onclick="openModal('liveChat')">
                    <div class="list-item-icon">💬</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Live Chat Support</div>
                        <div class="list-item-subtitle">Chat with our team</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('emailSupport')">
                    <div class="list-item-icon">📧</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Email Support</div>
                        <div class="list-item-subtitle">support@connecthub.com</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('aiAssistant')">
                    <div class="list-item-icon">🤖</div>
                    <div class="list-item-content">
                        <div class="list-item-title">AI Assistant</div>
                        <div class="list-item-subtitle">Get instant help</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="window.open('https://help.connecthub.com', '_blank')">
                    <div class="list-item-icon">🌐</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Visit Help Center</div>
                        <div class="list-item-subtitle">Browse all articles</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>

            <!-- MENU SCREEN -->
            <div id="menu-screen" class="screen">
                <div class="section-header">
                    <div class="section-title">Menu</div>
                </div>

                <div class="list-item" onclick="openScreen('profile')">
                    <div class="list-item-icon">👤</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Profile</div>
                        <div class="list-item-subtitle">View your profile</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openScreen('notifications')">
                    <div class="list-item-icon">🔔</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Notifications</div>
                        <div class="list-item-subtitle">5 new notifications</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openScreen('media')">
                    <div class="list-item-icon">📹</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Camera & Video</div>
                        <div class="list-item-subtitle">Create video content</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="switchPillTab(document.querySelector('.pill-nav-button:nth-child(3)'), 'live'); closeModal(''); openScreen('feed');">
                    <div class="list-item-icon">🔴</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Lives</div>
                        <div class="list-item-subtitle">Watch & go live</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openScreen('gaming')">
                    <div class="list-item-icon">🎮</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Gaming Hub</div>
                        <div class="list-item-subtitle">Level 42 • Play games</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openScreen('events')">
                    <div class="list-item-icon">📅</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Events</div>
                        <div class="list-item-subtitle">Upcoming & hosting</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openScreen('saved')">
                    <div class="list-item-icon">🔖</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Saved</div>
                        <div class="list-item-subtitle">Your saved items</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openScreen('settings')">
                    <div class="list-item-icon">⚙️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Settings</div>
                        <div class="list-item-subtitle">Account & privacy</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openScreen('marketplace')">
                    <div class="list-item-icon">🛍️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Marketplace</div>
                        <div class="list-item-subtitle">Buy & sell items</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openScreen('help')">
                    <div class="list-item-icon">💡</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Help & Support</div>
                        <div class="list-item-subtitle">Get help</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <button class="btn" style="margin-top: 20px; background: var(--error);" onclick="showToast('Logged out')">
                    Logout
                </button>
            </div>

            <!-- MARKETPLACE SCREEN -->
            <div id="marketplace-screen" class="screen">
                <!-- Marketplace Top Actions -->
                <div style="padding: 16px; display: flex; gap: 12px; border-bottom: 1px solid var(--glass-border);">
                    <button class="nav-btn" style="width: auto; padding: 0 16px; border-radius: 12px;" onclick="marketplaceToggleNotifications()">
                        🔔
                        <span class="badge" id="marketplaceNotificationsBadge">3</span>
                    </button>
                    <button class="nav-btn" style="width: auto; padding: 0 16px; border-radius: 12px;" onclick="marketplaceOpenModal('cart')" id="marketplaceCartBtn">
                        🛒
                        <span class="badge" id="marketplaceCartBadge" style="display: none;">0</span>
                    </button>
                    <button class="nav-btn" style="width: auto; padding: 0 16px; border-radius: 12px;" onclick="marketplaceOpenModal('orders')">📦</button>
                </div>

                <!-- Marketplace Notifications Panel -->
                <div class="notifications-panel" id="marketplaceNotificationsPanel">
                    <div class="notification-header">
                        <div class="notification-title">Notifications</div>
                        <button class="nav-btn" style="width: 32px; height: 32px; font-size: 14px;" onclick="marketplaceMarkAllRead()">✓</button>
                    </div>
                    <div class="notification-list">
                        <div class="notification-item unread" onclick="marketplaceHandleNotification('order')">
                            <div class="notification-icon">📦</div>
                            <div class="notification-text">Your order #ORD-2024-001 has been delivered!</div>
                            <div class="notification-time">5 minutes ago</div>
                        </div>
                        <div class="notification-item unread" onclick="marketplaceHandleNotification('message')">
                            <div class="notification-icon">💬</div>
                            <div class="notification-text">Sarah Miller sent you a message about MacBook Pro</div>
                            <div class="notification-time">15 minutes ago</div>
                        </div>
                        <div class="notification-item unread" onclick="marketplaceHandleNotification('sale')">
                            <div class="notification-icon">💰</div>
                            <div class="notification-text">Your item "Guitar" has been sold for $280!</div>
                            <div class="notification-time">1 hour ago</div>
                        </div>
                    </div>
                </div>

                <!-- Search Bar -->
                <div class="search-bar" style="margin: 0 16px 16px;">
                    <span>🔍</span>
                    <input type="text" class="search-input" id="marketplaceSearchInput" placeholder="Search items..." oninput="marketplaceSearchItems(this.value)">
                </div>

                <!-- Tabs -->
                <div style="display: flex; gap: 8px; padding: 0 16px 16px; overflow-x: auto; scrollbar-width: none;">
                    <div class="pill-nav-button active" onclick="marketplaceSwitchTab('browse')">Browse</div>
                    <div class="pill-nav-button" onclick="marketplaceSwitchTab('selling')">My Listings</div>
                    <div class="pill-nav-button" onclick="marketplaceSwitchTab('wishlist')">Wishlist</div>
                    <div class="pill-nav-button" onclick="marketplaceSwitchTab('messages')">Messages</div>
                </div>

                <!-- Browse Tab -->
                <div id="marketplace-browse-tab" class="tab-content active">
                    <div class="section-header">
                        <div class="section-title">Categories</div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; padding: 0 16px 16px;">
                        <div class="category-card" onclick="marketplaceFilterByCategory('electronics')">
                            <div style="font-size: 32px; margin-bottom: 8px;">📱</div>
                            <div style="font-size: 12px; font-weight: 600; color: var(--text-secondary);">Electronics</div>
                        </div>
                        <div class="category-card" onclick="marketplaceFilterByCategory('clothing')">
                            <div style="font-size: 32px; margin-bottom: 8px;">👕</div>
                            <div style="font-size: 12px; font-weight: 600; color: var(--text-secondary);">Clothing</div>
                        </div>
                        <div class="category-card" onclick="marketplaceFilterByCategory('home')">
                            <div style="font-size: 32px; margin-bottom: 8px;">🏠</div>
                            <div style="font-size: 12px; font-weight: 600; color: var(--text-secondary);">Home</div>
                        </div>
                        <div class="category-card" onclick="marketplaceFilterByCategory('books')">
                            <div style="font-size: 32px; margin-bottom: 8px;">📚</div>
                            <div style="font-size: 12px; font-weight: 600; color: var(--text-secondary);">Books</div>
                        </div>
                        <div class="category-card" onclick="marketplaceFilterByCategory('sports')">
                            <div style="font-size: 32px; margin-bottom: 8px;">⚽</div>
                            <div style="font-size: 12px; font-weight: 600; color: var(--text-secondary);">Sports</div>
                        </div>
                        <div class="category-card" onclick="marketplaceFilterByCategory('toys')">
                            <div style="font-size: 32px; margin-bottom: 8px;">🧸</div>
                            <div style="font-size: 12px; font-weight: 600; color: var(--text-secondary);">Toys</div>
                        </div>
                        <div class="category-card" onclick="marketplaceFilterByCategory('music')">
                            <div style="font-size: 32px; margin-bottom: 8px;">🎵</div>
                            <div style="font-size: 12px; font-weight: 600; color: var(--text-secondary);">Music</div>
                        </div>
                        <div class="category-card" onclick="marketplaceFilterByCategory('other')">
                            <div style="font-size: 32px; margin-bottom: 8px;">📦</div>
                            <div style="font-size: 12px; font-weight: 600; color: var(--text-secondary);">Other</div>
                        </div>
                    </div>

                    <div class="section-header">
                        <div class="section-title">Featured Listings</div>
                        <div class="section-link" id="marketplaceResultsCount">16 items</div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 0 16px 16px;" id="marketplaceListingsGrid">
                        <!-- Listings will be dynamically inserted here -->
                    </div>
                </div>

                <!-- My Listings Tab -->
                <div id="marketplace-selling-tab" class="tab-content">
                    <div class="stats-grid" style="padding: 16px; margin-bottom: 0;">
                        <div class="stat-card">
                            <div class="stat-value">5</div>
                            <div class="stat-label">Active</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">12</div>
                            <div class="stat-label">Sold</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">$2.4K</div>
                            <div class="stat-label">Earned</div>
                        </div>
                    </div>

                    <div class="section-header">
                        <div class="section-title">My Active Listings</div>
                        <div class="section-link" onclick="marketplaceOpenModal('createListing')">+ New</div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 0 16px 16px;" id="marketplaceMyListingsGrid"></div>
                </div>

                <!-- Wishlist Tab -->
                <div id="marketplace-wishlist-tab" class="tab-content">
                    <div class="section-header">
                        <div class="section-title">Saved Items</div>
                        <div class="section-link" id="marketplaceWishlistCount">0 items</div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 0 16px 16px;" id="marketplaceWishlistGrid"></div>

                    <div id="marketplaceEmptyWishlist" class="empty-state" style="display: none;">
                        <div class="empty-icon">🔖</div>
                        <div class="empty-title">No Saved Items</div>
                        <div class="empty-text">Items you save will appear here</div>
                    </div>
                </div>

                <!-- Messages Tab -->
                <div id="marketplace-messages-tab" class="tab-content">
                    <div class="message-list-item" onclick="marketplaceOpenChat('Sarah Miller', 'SM')">
                        <div class="message-avatar" style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; font-weight: 600;">SM</div>
                        <div class="message-content">
                            <div class="message-name">Sarah Miller</div>
                            <div class="message-preview">Hi! Is the MacBook still available?</div>
                        </div>
                        <div class="message-time">2m</div>
                    </div>

                    <div class="message-list-item" onclick="marketplaceOpenChat('Mike Johnson', 'MJ')">
                        <div class="message-avatar" style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; font-weight: 600;">MJ</div>
                        <div class="message-content">
                            <div class="message-name">Mike Johnson</div>
                            <div class="message-preview">Great condition! When can I pick it up?</div>
                        </div>
                        <div class="message-time">1h</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-items">
                <div class="nav-item active" onclick="switchBottomTab('social')">
                    <div class="nav-item-icon">🏠</div>
                    <div class="nav-item-label">Social</div>
                </div>
                <div class="nav-item" onclick="switchBottomTab('dating')">
                    <div class="nav-item-icon">💕</div>
                    <div class="nav-item-label">Dating</div>
                </div>
                <div class="nav-item" onclick="switchBottomTab('messages')">
                    <div class="nav-item-icon">💬</div>
                    <div class="nav-item-label">Messages</div>
                    <span class="badge">3</span>
                </div>
                <div class="nav-item" onclick="switchBottomTab('media')">
                    <div class="nav-item-icon">🎥</div>
                    <div class="nav-item-label">Media</div>
                </div>
                <div class="nav-item" onclick="switchBottomTab('friends')">
                    <div class="nav-item-icon">👥</div>
                    <div class="nav-item-label">Friends</div>
                </div>
            </div>
        </div>

        <!-- Toast -->
        <div id="toast" class="toast"></div>

        <!-- In-App Notification Banner -->
        <div id="inAppNotification" class="in-app-notification" onclick="handleInAppNotificationClick()">
            <div class="in-app-notification-icon" id="notificationIcon">🔔</div>
            <div class="in-app-notification-content">
                <div class="in-app-notification-title" id="notificationTitle">Notification</div>
                <div class="in-app-notification-text" id="notificationText">You have a new notification</div>
            </div>
            <div class="in-app-notification-close" onclick="event.stopPropagation(); dismissInAppNotification()">✕</div>
        </div>

        <!-- MODALS START HERE -->

        <!-- Search Modal -->
        <div id="searchModalModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('searchModal')">✕</div>
                <div class="modal-title">Search</div>
            </div>
            <div class="modal-content">
                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" class="search-input" id="mainSearchInput" placeholder="Search ConnectHub..." oninput="handleSearch(this.value)" />
                    <span onclick="clearSearch()" style="cursor: pointer;">✕</span>
                </div>

                <div id="searchDefault">
                    <div class="section-header">
                        <div class="section-title">Recent Searches</div>
                        <div class="section-link" onclick="clearRecentSearches()">Clear</div>
                    </div>

                    <div class="list-item" onclick="performSearch('AI Technology')" style="cursor: pointer;">
                        <div class="list-item-icon">🔍</div>
                        <div class="list-item-content">
                            <div class="list-item-title">AI Technology</div>
                        </div>
                        <div style="cursor: pointer;" onclick="event.stopPropagation(); removeSearch(this)">✕</div>
                    </div>

                    <div class="list-item" onclick="performSearch('Tech Conference')" style="cursor: pointer;">
                        <div class="list-item-icon">🔍</div>
                        <div class="list-item-content">
                            <div class="list-item-title">Tech Conference</div>
                        </div>
                        <div style="cursor: pointer;" onclick="event.stopPropagation(); removeSearch(this)">✕</div>
                    </div>

                    <div class="section-header">
                        <div class="section-title">Trending Searches</div>
                    </div>

                    <div class="list-item" onclick="performSearch('#NewFeatures')" style="cursor: pointer;">
                        <div class="list-item-icon">🔥</div>
                        <div class="list-item-content">
                            <div class="list-item-title">#NewFeatures</div>
                            <div class="list-item-subtitle">45.2K posts</div>
                        </div>
                        <div class="list-item-arrow">→</div>
                    </div>

                    <div class="list-item" onclick="performSearch('#TechNews')" style="cursor: pointer;">
                        <div class="list-item-icon">🔥</div>
                        <div class="list-item-content">
                            <div class="list-item-title">#TechNews</div>
                            <div class="list-item-subtitle">32.1K posts</div>
                        </div>
                        <div class="list-item-arrow">→</div>
                    </div>

                    <div class="section-header">
                        <div class="section-title">Quick Links</div>
                    </div>

                    <div class="list-item" onclick="closeModal('searchModal'); openScreen('friends')">
                        <div class="list-item-icon">👥</div>
                        <div class="list-item-content">
                            <div class="list-item-title">Find Friends</div>
                        </div>
                        <div class="list-item-arrow">→</div>
                    </div>

                    <div class="list-item" onclick="closeModal('searchModal'); switchMainTab('groups')">
                        <div class="list-item-icon">👥</div>
                        <div class="list-item-content">
                            <div class="list-item-title">Discover Groups</div>
                        </div>
                        <div class="list-item-arrow">→</div>
                    </div>

                    <div class="list-item" onclick="closeModal('searchModal'); openScreen('events')">
                        <div class="list-item-icon">📅</div>
                        <div class="list-item-content">
                            <div class="list-item-title">Browse Events</div>
                        </div>
                        <div class="list-item-arrow">→</div>
                    </div>
                </div>

                <div id="searchResults" style="display: none;">
                    <div class="section-header">
                        <div class="section-title">Search Results</div>
                    </div>

                    <div class="list-item" onclick="closeModal('searchModal'); openScreen('profile')" style="cursor: pointer;">
                        <div class="post-avatar">👤</div>
                        <div class="list-item-content">
                            <div class="list-item-title">Sarah Johnson</div>
                            <div class="list-item-subtitle">234 mutual friends</div>
                        </div>
                        <div class="list-item-arrow">→</div>
                    </div>

                    <div class="list-item" onclick="closeModal('searchModal'); openModal('groupDetails')" style="cursor: pointer;">
                        <div class="group-icon" style="width: 40px; height: 40px; font-size: 20px;">💻</div>
                        <div class="list-item-content">
                            <div class="list-item-title">Tech Enthusiasts</div>
                            <div class="list-item-subtitle">2,456 members</div>
                        </div>
                        <div class="list-item-arrow">→</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 5: Create New Modal -->
        <div id="createNewModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('createNew')">✕</div>
                <div class="modal-title">Create New</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="openModal('createPost')">
                    <div class="list-item-icon">📝</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Post</div>
                        <div class="list-item-subtitle">Share your thoughts</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('createStory')">
                    <div class="list-item-icon">⭐</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Story</div>
                        <div class="list-item-subtitle">Share a moment</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('goLive')">
                    <div class="list-item-icon">🔴</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Live Video</div>
                        <div class="list-item-subtitle">Broadcast to friends</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('uploadMedia')">
                    <div class="list-item-icon">📷</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Photo/Video</div>
                        <div class="list-item-subtitle">Upload from gallery</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('createEvent')">
                    <div class="list-item-icon">📅</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Event</div>
                        <div class="list-item-subtitle">Plan a gathering</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('createGroup')">
                    <div class="list-item-icon">👥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Group</div>
                        <div class="list-item-subtitle">Start a community</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('createPoll')">
                    <div class="list-item-icon">📊</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Poll</div>
                        <div class="list-item-subtitle">Ask a question</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>

                <div class="list-item" onclick="openModal('createFundraiser')">
                    <div class="list-item-icon">💰</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Fundraiser</div>
                        <div class="list-item-subtitle">Raise money for a cause</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>
        </div>

        <!-- Create Post Modal -->
        <div id="createPostModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('createPost')">✕</div>
                <div class="modal-title">Create Post</div>
                <button class="btn" style="width: auto; padding: 8px 20px;" onclick="publishPost()">Post</button>
            </div>
            <div class="modal-content">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                    <div class="post-avatar">👤</div>
                    <div>
                        <div class="post-author">John Doe</div>
                        <div class="post-meta" id="postPrivacy" onclick="openModal('selectPrivacy')">🌍 Public</div>
                    </div>
                </div>
                <textarea class="input-field textarea-field" id="postTextContent" placeholder="What's on your mind?"></textarea>
                
                <!-- Selected Photo Preview -->
                <div id="selectedPhotoPreview" style="display: none; margin-bottom: 12px;">
                    <div style="position: relative;">
                        <div class="post-image" id="photoPreview">📷</div>
                        <div onclick="removeSelectedPhoto()" style="position: absolute; top: 10px; right: 10px; width: 32px; height: 32px; border-radius: 50%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; cursor: pointer; color: white;">✕</div>
                    </div>
                </div>

                <!-- Selected Video Preview -->
                <div id="selectedVideoPreview" style="display: none; margin-bottom: 12px;">
                    <div style="position: relative;">
                        <div class="post-image" id="videoPreview">🎥</div>
                        <div onclick="removeSelectedVideo()" style="position: absolute; top: 10px; right: 10px; width: 32px; height: 32px; border-radius: 50%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; cursor: pointer; color: white;">✕</div>
                    </div>
                </div>

                <!-- Selected Location -->
                <div id="selectedLocation" style="display: none; margin-bottom: 12px;">
                    <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 12px; display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 20px;">📍</span>
                        <span id="locationText" style="flex: 1; font-size: 14px;"></span>
                        <div onclick="removeSelectedLocation()" style="cursor: pointer; padding: 8px; color: var(--error);">✕</div>
                    </div>
                </div>

                <!-- Tagged People -->
                <div id="taggedPeople" style="display: none; margin-bottom: 12px;">
                    <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 12px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <span style="font-size: 16px;">👥</span>
                            <span style="font-size: 14px; font-weight: 600;">Tagged:</span>
                        </div>
                        <div id="taggedPeopleList" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                    <div class="create-action" onclick="addPhotoToPost()">
                        📷 Photo
                    </div>
                    <div class="create-action" onclick="addVideoToPost()">
                        🎥 Video
                    </div>
                    <div class="create-action" onclick="addLocationToPost()">
                        📍 Location
                    </div>
                    <div class="create-action" onclick="tagPeopleInPost()">
                        👥 Tag People
                    </div>
                </div>
            </div>
        </div>

        <!-- Select Privacy Modal -->
        <div id="selectPrivacyModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectPrivacy')">✕</div>
                <div class="modal-title">Select Privacy</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="selectPrivacy('🌍 Public')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Public</div>
                        <div class="list-item-subtitle">Anyone can see this post</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectPrivacy('👥 Friends')">
                    <div class="list-item-icon">👥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Friends</div>
                        <div class="list-item-subtitle">Only your friends can see</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectPrivacy('🔒 Only Me')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Only Me</div>
                        <div class="list-item-subtitle">Only you can see this</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Select Photo for Post Modal -->
        <div id="selectPhotoForPostModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectPhotoForPost')">✕</div>
                <div class="modal-title">Select Photo</div>
            </div>
            <div class="modal-content">
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 16px;">
                    <div onclick="selectPhoto('🏖️')" style="aspect-ratio: 1; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;">🏖️</div>
                    <div onclick="selectPhoto('🌅')" style="aspect-ratio: 1; background: linear-gradient(135deg, var(--secondary), var(--warning)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;">🌅</div>
                    <div onclick="selectPhoto('🎨')" style="aspect-ratio: 1; background: linear-gradient(135deg, var(--success), var(--primary)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;">🎨</div>
                    <div onclick="selectPhoto('🏔️')" style="aspect-ratio: 1; background: linear-gradient(135deg, var(--accent), var(--success)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;">🏔️</div>
                    <div onclick="selectPhoto('🌸')" style="aspect-ratio: 1; background: linear-gradient(135deg, var(--error), var(--secondary)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;">🌸</div>
                    <div onclick="selectPhoto('🌆')" style="aspect-ratio: 1; background: linear-gradient(135deg, var(--warning), var(--accent)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;">🌆</div>
                </div>
            </div>
        </div>

        <!-- Select Video for Post Modal -->
        <div id="selectVideoForPostModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectVideoForPost')">✕</div>
                <div class="modal-title">Select Video</div>
            </div>
            <div class="modal-content">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                    <div onclick="selectVideo('🎮')" style="aspect-ratio: 16/9; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 48px; cursor: pointer;">🎮</div>
                    <div onclick="selectVideo('🎬')" style="aspect-ratio: 16/9; background: linear-gradient(135deg, var(--accent), var(--success)); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 48px; cursor: pointer;">🎬</div>
                    <div onclick="selectVideo('🎵')" style="aspect-ratio: 16/9; background: linear-gradient(135deg, var(--warning), var(--error)); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 48px; cursor: pointer;">🎵</div>
                    <div onclick="selectVideo('🏃')" style="aspect-ratio: 16/9; background: linear-gradient(135deg, var(--success), var(--accent)); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 48px; cursor: pointer;">🏃</div>
                </div>
            </div>
        </div>

        <!-- Select Location Modal -->
        <div id="selectLocationModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectLocation')">✕</div>
                <div class="modal-title">Add Location</div>
            </div>
            <div class="modal-content">
                <div class="search-bar">
                    <span>📍</span>
                    <input type="text" class="search-input" placeholder="Search for a location..." />
                </div>
                <div class="list-item" onclick="selectLocation('San Francisco, CA')">
                    <div class="list-item-icon">📍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">San Francisco, CA</div>
                        <div class="list-item-subtitle">City</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectLocation('Golden Gate Park')">
                    <div class="list-item-icon">📍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Golden Gate Park</div>
                        <div class="list-item-subtitle">Park</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectLocation('Starbucks Downtown')">
                    <div class="list-item-icon">📍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Starbucks Downtown</div>
                        <div class="list-item-subtitle">Coffee Shop</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tag People Modal -->
        <div id="tagPeopleModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('tagPeople')">✕</div>
                <div class="modal-title">Tag People</div>
            </div>
            <div class="modal-content">
                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" class="search-input" placeholder="Search people..." />
                </div>
                <div class="friend-card" onclick="tagPerson('Sarah Johnson', '👤')">
                    <div class="friend-avatar">👤</div>
                    <div class="friend-info">
                        <div class="friend-name">Sarah Johnson</div>
                        <div class="friend-mutual">Friend</div>
                    </div>
                </div>
                <div class="friend-card" onclick="tagPerson('Mike Chen', '😊')">
                    <div class="friend-avatar">😊</div>
                    <div class="friend-info">
                        <div class="friend-name">Mike Chen</div>
                        <div class="friend-mutual">Friend</div>
                    </div>
                </div>
                <div class="friend-card" onclick="tagPerson('Emily Rodriguez', '🎨')">
                    <div class="friend-avatar">🎨</div>
                    <div class="friend-info">
                        <div class="friend-name">Emily Rodriguez</div>
                        <div class="friend-mutual">Friend</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comments Modal -->
        <div id="commentsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('comments')">✕</div>
                <div class="modal-title">Comments</div>
            </div>
            <div class="modal-content">
                <div style="margin-bottom: 16px;">
                    <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                        <div class="post-avatar" style="width: 32px; height: 32px; font-size: 14px;">😊</div>
                        <div style="flex: 1;">
                            <div style="background: var(--glass); border-radius: 16px; padding: 10px 14px; margin-bottom: 6px;">
                                <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px;">Mike Chen</div>
                                <div style="font-size: 14px;">This is amazing! 🎉</div>
                            </div>
                            <div style="padding: 0 14px; font-size: 12px; color: var(--text-muted); display: flex; gap: 12px;">
                                <span onclick="showToast('Liked')" style="cursor: pointer;">Like</span>
                                <span onclick="showToast('Reply added')" style="cursor: pointer;">Reply</span>
                                <span>2h</span>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                        <div class="post-avatar" style="width: 32px; height: 32px; font-size: 14px;">🎨</div>
                        <div style="flex: 1;">
                            <div style="background: var(--glass); border-radius: 16px; padding: 10px 14px; margin-bottom: 6px;">
                                <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px;">Emily</div>
                                <div style="font-size: 14px;">Love it! Keep it up!</div>
                            </div>
                            <div style="padding: 0 14px; font-size: 12px; color: var(--text-muted); display: flex; gap: 12px;">
                                <span onclick="showToast('Liked')" style="cursor: pointer;">Like</span>
                                <span onclick="showToast('Reply added')" style="cursor: pointer;">Reply</span>
                                <span>5h</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="position: sticky; bottom: 0; background: var(--bg-primary); padding: 16px 0; display: flex; gap: 10px;">
                    <input type="text" class="input-field" style="margin-bottom: 0;" placeholder="Write a comment..." />
                    <button class="chat-send-btn" onclick="showToast('Comment posted')">➤</button>
                </div>
            </div>
        </div>

        <!-- Chat Window Modal -->
        <div id="chatWindowModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('chatWindow')">←</div>
                <div class="post-avatar" style="width: 32px; height: 32px; font-size: 14px; margin-right: 8px;">👤</div>
                <div class="modal-title">Sarah Johnson</div>
            </div>
            <div class="modal-content">
                <div class="chat-messages" style="height: calc(100vh - 250px);">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 12px; color: var(--text-muted);">Today</div>
                    </div>
                    <div class="chat-bubble received">
                        Hey! How are you doing?
                    </div>
                    <div class="chat-bubble sent">
                        Hi Sarah! I'm doing great, thanks! 😊
                    </div>
                    <div class="chat-bubble received">
                        That's awesome! Want to grab coffee later?
                    </div>
                    <div class="chat-bubble sent">
                        Sure! That sounds great 👍
                    </div>
                </div>
                <div style="position: sticky; bottom: 0; background: var(--bg-primary); padding: 16px 0; display: flex; gap: 10px;">
                    <input type="text" class="input-field" style="margin-bottom: 0;" placeholder="Type a message..." />
                    <button class="chat-send-btn" onclick="showToast('Message sent')">➤</button>
                </div>
            </div>
        </div>

        <!-- New Message Modal -->
        <div id="newMessageModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('newMessage')">✕</div>
                <div class="modal-title">New Message</div>
            </div>
            <div class="modal-content">
                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" class="search-input" placeholder="Search people..." />
                </div>
                <div class="friend-card" onclick="closeModal('newMessage'); openModal('chatWindow');">
                    <div class="friend-avatar">👤</div>
                    <div class="friend-info">
                        <div class="friend-name">Sarah Johnson</div>
                        <div class="friend-mutual">Online</div>
                    </div>
                </div>
                <div class="friend-card" onclick="closeModal('newMessage'); openModal('chatWindow');">
                    <div class="friend-avatar">😊</div>
                    <div class="friend-info">
                        <div class="friend-name">Mike Chen</div>
                        <div class="friend-mutual">Active 2h ago</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create Story Modal -->
        <div id="createStoryModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('createStory')">✕</div>
                <div class="modal-title">Create Story</div>
            </div>
            <div class="modal-content">
                <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); height: 400px; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 64px; margin-bottom: 20px;">
                    📷
                </div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                    <button class="btn" onclick="openStoryCamera()">
                        📷 Camera
                    </button>
                    <button class="btn" onclick="openStoryGallery()">
                        🖼️ Gallery
                    </button>
                </div>
            </div>
        </div>

        <!-- View Story Modal -->
        <div id="viewStoryModal" class="modal">
            <div style="background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary)); height: 100vh; display: flex; align-items: center; justify-content: center; font-size: 100px; position: relative;" onclick="closeModal('viewStory')">
                ✨
                <div style="position: absolute; top: 20px; left: 20px; display: flex; align-items: center; gap: 12px;">
                    <div class="post-avatar" style="width: 32px; height: 32px; font-size: 14px;">👤</div>
                    <div>
                        <div style="font-size: 14px; font-weight: 600;">Sarah</div>
                        <div style="font-size: 12px; color: var(--text-muted);">2 hours ago</div>
                    </div>
                </div>
                <div style="position: absolute; top: 20px; right: 20px; cursor: pointer;" onclick="event.stopPropagation(); closeModal('viewStory')">
                    ✕
                </div>
            </div>
        </div>

        <!-- Go Live Modal -->
        <div id="goLiveModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('goLive')">✕</div>
                <div class="modal-title">Go Live</div>
            </div>
            <div class="modal-content">
                <input type="text" class="input-field" placeholder="Add a title..." id="liveTitle" />
                <textarea class="input-field textarea-field" placeholder="Add a description..." id="liveDescription"></textarea>
                <div class="list-item" onclick="openModal('selectLivePrivacy')">
                    <div class="list-item-content">
                        <div class="list-item-title">Privacy</div>
                        <div class="list-item-subtitle" id="livePrivacy">Public</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <button class="btn" onclick="startLiveStream()">
                    🔴 Start Live
                </button>
            </div>
        </div>

        <!-- View Live Modal -->
        <div id="viewLiveModal" class="modal">
            <div style="background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary)); height: 100vh; display: flex; align-items: center; justify-content: center; font-size: 100px; position: relative;">
                🎮
                <div style="position: absolute; top: 20px; left: 20px; display: flex; align-items: center; gap: 12px;">
                    <div class="post-avatar" style="width: 32px; height: 32px; font-size: 14px;">👤</div>
                    <div>
                        <div style="font-size: 14px; font-weight: 600;">Sarah's Gaming Stream</div>
                        <div style="font-size: 12px;">
                            <span class="live-badge">
                                <span class="live-dot"></span> LIVE
                            </span>
                            <span style="margin-left: 8px;">1.2K watching</span>
                        </div>
                    </div>
                </div>
                <div style="position: absolute; top: 20px; right: 20px; cursor: pointer;" onclick="closeModal('viewLive')">
                    ✕
                </div>
                <div style="position: absolute; bottom: 20px; left: 20px; right: 20px;">
                    <div style="display: flex; gap: 10px;">
                        <input type="text" class="input-field" style="margin-bottom: 0; flex: 1;" placeholder="Say something..." />
                        <button class="chat-send-btn" onclick="showToast('Comment sent')">➤</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Helper Modals -->
        <div id="addPhotoModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('addPhoto')">✕</div>
                <div class="modal-title">Add Photo</div>
            </div>
            <div class="modal-content">
                <div style="background: var(--glass); border: 2px dashed var(--glass-border); border-radius: 16px; padding: 60px 20px; text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 64px; margin-bottom: 16px;">📷</div>
                    <div style="font-size: 16px; color: var(--text-secondary);">Tap to add photos</div>
                </div>
                <button class="btn" onclick="closeModal('addPhoto'); showToast('Photo added')">
                    Select Photos
                </button>
            </div>
        </div>

        <div id="addVideoModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('addVideo')">✕</div>
                <div class="modal-title">Add Video</div>
            </div>
            <div class="modal-content">
                <div style="background: var(--glass); border: 2px dashed var(--glass-border); border-radius: 16px; padding: 60px 20px; text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 64px; margin-bottom: 16px;">🎥</div>
                    <div style="font-size: 16px; color: var(--text-secondary);">Tap to add video</div>
                </div>
                <button class="btn" onclick="closeModal('addVideo'); showToast('Video added')">
                    Select Video
                </button>
            </div>
        </div>

        <div id="addFeelingModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('addFeeling')">✕</div>
                <div class="modal-title">How are you feeling?</div>
            </div>
            <div class="modal-content">
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                    <div class="list-item" style="flex-direction: column; text-align: center;" onclick="selectFeeling('😊 Happy')">
                        <div style="font-size: 40px;">😊</div>
                        <div>Happy</div>
                    </div>
                    <div class="list-item" style="flex-direction: column; text-align: center;" onclick="selectFeeling('😍 Loved')">
                        <div style="font-size: 40px;">😍</div>
                        <div>Loved</div>
                    </div>
                    <div class="list-item" style="flex-direction: column; text-align: center;" onclick="selectFeeling('🎉 Excited')">
                        <div style="font-size: 40px;">🎉</div>
                        <div>Excited</div>
                    </div>
                    <div class="list-item" style="flex-direction: column; text-align: center;" onclick="selectFeeling('😴 Tired')">
                        <div style="font-size: 40px;">😴</div>
                        <div>Tired</div>
                    </div>
                    <div class="list-item" style="flex-direction: column; text-align: center;" onclick="selectFeeling('🤔 Thoughtful')">
                        <div style="font-size: 40px;">🤔</div>
                        <div>Thoughtful</div>
                    </div>
                    <div class="list-item" style="flex-direction: column; text-align: center;" onclick="selectFeeling('💪 Motivated')">
                        <div style="font-size: 40px;">💪</div>
                        <div>Motivated</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- More modals for all other functionality -->
        <div id="postOptionsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('postOptions')">✕</div>
                <div class="modal-title">Post Options</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="closeModal('postOptions'); showToast('Saved to collection')">
                    <div class="list-item-icon">🔖</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Save Post</div>
                    </div>
                </div>
                <div class="list-item" onclick="closeModal('postOptions'); showToast('Copied link')">
                    <div class="list-item-icon">🔗</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Copy Link</div>
                    </div>
                </div>
                <div class="list-item" onclick="closeModal('postOptions'); showToast('Post hidden')">
                    <div class="list-item-icon">👁️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Hide Post</div>
                    </div>
                </div>
                <div class="list-item" onclick="closeModal('postOptions'); showToast('Reported')">
                    <div class="list-item-icon">⚠️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Report Post</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="liveSettingsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('liveSettings')">✕</div>
                <div class="modal-title">Live Settings</div>
            </div>
            <div class="modal-content">
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Save Lives Automatically</div>
                        <div class="list-item-subtitle">Saved to your profile</div>
                    </div>
                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Allow Comments</div>
                        <div class="list-item-subtitle">Viewers can comment</div>
                    </div>
                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">Stream Quality</div>
                        <div class="list-item-subtitle">HD</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>
        </div>

        <div id="savedLivesModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('savedLives')">✕</div>
                <div class="modal-title">Saved Lives</div>
            </div>
            <div class="modal-content">
                <div class="card">
                    <div class="post-image">🎮</div>
                    <div class="post-content">Epic Gaming Session</div>
                    <div class="post-meta">Saved 2 days ago • 45 min</div>
                </div>
                <div class="card">
                    <div class="post-image">🎨</div>
                    <div class="post-content">Creative Design Stream</div>
                    <div class="post-meta">Saved 1 week ago • 1h 20min</div>
                </div>
            </div>
        </div>

        <div id="startLiveModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('startLive')">✕</div>
                <div class="modal-title">Start Live</div>
            </div>
            <div class="modal-content">
                <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); height: 300px; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 64px; margin-bottom: 20px;">
                    👤
                </div>
                <input type="text" class="input-field" placeholder="Add a title..." />
                <button class="btn" onclick="closeModal('startLive'); showToast('Going live...')">
                    🔴 Go Live Now
                </button>
            </div>
        </div>

        <!-- Additional Modals Continue -->
        <div id="createGroupModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('createGroup')">✕</div>
                <div class="modal-title">Create Group</div>
            </div>
            <div class="modal-content">
                <input type="text" class="input-field" placeholder="Group name..." id="groupName" />
                <textarea class="input-field textarea-field" placeholder="Group description..." id="groupDescription"></textarea>
                <div class="list-item" onclick="openModal('selectGroupPrivacy')">
                    <div class="list-item-content">
                        <div class="list-item-title">Privacy</div>
                        <div class="list-item-subtitle" id="groupPrivacy">Public</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <button class="btn" onclick="createNewGroup()">
                    Create Group
                </button>
            </div>
        </div>

        <div id="groupDetailsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('groupDetails')">✕</div>
                <div class="modal-title">Group Details</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div class="group-icon" style="width: 100px; height: 100px; font-size: 48px; margin: 0 auto 16px;">💻</div>
                    <div class="section-title">Tech Enthusiasts</div>
                    <div class="post-meta">2,456 members</div>
                </div>
                <div class="post-content" style="margin-bottom: 20px;">
                    A community for technology lovers to share ideas, news, and discuss the latest in tech.
                </div>
                <button class="btn" onclick="showToast('Joined group')">
                    Join Group
                </button>
                <div class="section-header">
                    <div class="section-title">Recent Posts</div>
                </div>
                <div class="post-card">
                    <div class="post-header">
                        <div class="post-avatar">👤</div>
                        <div class="post-header-info">
                            <div class="post-author">Sarah Johnson</div>
                            <div class="post-meta">2 hours ago</div>
                        </div>
                    </div>
                    <div class="post-content">Check out this new AI tool!</div>
                </div>
            </div>
        </div>

        <div id="createEventModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('createEvent')">✕</div>
                <div class="modal-title">Create Event</div>
            </div>
            <div class="modal-content">
                <input type="text" class="input-field" placeholder="Event name..." id="eventName" />
                <input type="text" class="input-field" placeholder="Location..." id="eventLocation" />
                <input type="date" class="input-field" id="eventDate" />
                <input type="time" class="input-field" id="eventTime" />
                <textarea class="input-field textarea-field" placeholder="Event description..." id="eventDescription"></textarea>
                <button class="btn" onclick="createNewEvent()">
                    Create Event
                </button>
            </div>
        </div>

        <div id="viewEventModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('viewEvent')">✕</div>
                <div class="modal-title">Event Details</div>
            </div>
            <div class="modal-content">
                <div class="post-image">📅</div>
                <div class="section-title" style="margin: 16px 0 8px;">Tech Conference 2025</div>
                <div class="post-meta" style="margin-bottom: 16px;">📍 Convention Center • November 15 • 9:00 AM</div>
                <div class="post-content">Join us for the biggest tech conference of the year!</div>
                <div style="display: flex; gap: 12px; margin: 20px 0;">
                    <button class="btn" style="flex: 1;" onclick="showToast('Marked as interested')">
                        ⭐ Interested
                    </button>
                    <button class="btn" style="flex: 1;" onclick="shareEvent()">
                        🔄 Share
                    </button>
                </div>
            </div>
        </div>

        <div id="editProfileModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('editProfile')">✕</div>
                <div class="modal-title">Edit Profile</div>
                <button class="btn" style="width: auto; padding: 8px 20px;" onclick="saveProfile()">Save</button>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div class="profile-avatar-large">👤</div>
                    <button class="btn" style="margin-top: 12px;" onclick="showToast('Photo updated')">
                        Change Photo
                    </button>
                </div>
                <input type="text" class="input-field" placeholder="Name" value="John Doe" />
                <textarea class="input-field textarea-field" placeholder="Bio">Tech enthusiast | Traveler | Coffee lover ☕</textarea>
                <input type="text" class="input-field" placeholder="Location" value="San Francisco, CA" />
                <input type="text" class="input-field" placeholder="Website" value="johndoe.com" />
            </div>
        </div>

        <div id="createCollectionModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('createCollection')">✕</div>
                <div class="modal-title">Create Collection</div>
            </div>
            <div class="modal-content">
                <input type="text" class="input-field" placeholder="Collection name..." />
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">Privacy</div>
                        <div class="list-item-subtitle">Only me</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <button class="btn" onclick="closeModal('createCollection'); showToast('Collection created')">
                    Create Collection
                </button>
            </div>
        </div>

        <div id="viewCollectionModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('viewCollection')">✕</div>
                <div class="modal-title">Travel Inspiration</div>
            </div>
            <div class="modal-content">
                <div class="post-meta" style="margin-bottom: 20px;">24 saved items</div>
                <div class="post-card">
                    <div class="post-image">🏖️</div>
                    <div class="post-content">Beautiful beach destinations</div>
                </div>
                <div class="post-card">
                    <div class="post-image">🏔️</div>
                    <div class="post-content">Mountain adventures</div>
                </div>
            </div>
        </div>

        <div id="cameraSettingsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('cameraSettings')">✕</div>
                <div class="modal-title">Camera Settings</div>
            </div>
            <div class="modal-content">
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">Video Quality</div>
                        <div class="list-item-subtitle">1080p HD</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Grid Lines</div>
                        <div class="list-item-subtitle">Show composition grid</div>
                    </div>
                    <div class="toggle-switch" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Timer</div>
                        <div class="list-item-subtitle">3 second countdown</div>
                    </div>
                    <div class="toggle-switch" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="arFeaturesModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('arFeatures')">✕</div>
                <div class="modal-title">AR Effects</div>
            </div>
            <div class="modal-content">
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                    <div class="list-item" style="flex-direction: column; text-align: center; padding: 20px;" onclick="selectAR('😎')">
                        <div style="font-size: 40px;">😎</div>
                        <div style="font-size: 12px; margin-top: 8px;">Cool</div>
                    </div>
                    <div class="list-item" style="flex-direction: column; text-align: center; padding: 20px;" onclick="selectAR('👑')">
                        <div style="font-size: 40px;">👑</div>
                        <div style="font-size: 12px; margin-top: 8px;">Crown</div>
                    </div>
                    <div class="list-item" style="flex-direction: column; text-align: center; padding: 20px;" onclick="selectAR('✨')">
                        <div style="font-size: 40px;">✨</div>
                        <div style="font-size: 12px; margin-top: 8px;">Sparkle</div>
                    </div>
                    <div class="list-item" style="flex-direction: column; text-align: center; padding: 20px;" onclick="selectAR('🌈')">
                        <div style="font-size: 40px;">🌈</div>
                        <div style="font-size: 12px; margin-top: 8px;">Rainbow</div>
                    </div>
                    <div class="list-item" style="flex-direction: column; text-align: center; padding: 20px;" onclick="selectAR('🎨')">
                        <div style="font-size: 40px;">🎨</div>
                        <div style="font-size: 12px; margin-top: 8px;">Artist</div>
                    </div>
                    <div class="list-item" style="flex-direction: column; text-align: center; padding: 20px;" onclick="selectAR('🚀')">
                        <div style="font-size: 40px;">🚀</div>
                        <div style="font-size: 12px; margin-top: 8px;">Space</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Sub-Modals -->
        <div id="editPersonalInfoModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('editPersonalInfo')">✕</div>
                <div class="modal-title">Edit Personal Info</div>
                <button class="btn" style="width: auto; padding: 8px 20px;" onclick="closeModal('editPersonalInfo'); showToast('Info updated')">Save</button>
            </div>
            <div class="modal-content">
                <input type="text" class="input-field" placeholder="First Name" value="John" />
                <input type="text" class="input-field" placeholder="Last Name" value="Doe" />
                <input type="email" class="input-field" placeholder="Email" value="john@example.com" />
                <input type="tel" class="input-field" placeholder="Phone" value="+1 (555) 123-4567" />
                <input type="date" class="input-field" placeholder="Birthday" />
            </div>
        </div>

        <div id="changePasswordModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('changePassword')">✕</div>
                <div class="modal-title">Change Password</div>
            </div>
            <div class="modal-content">
                <input type="password" class="input-field" placeholder="Current Password" />
                <input type="password" class="input-field" placeholder="New Password" />
                <input type="password" class="input-field" placeholder="Confirm New Password" />
                <button class="btn" onclick="closeModal('changePassword'); showToast('Password updated')">
                    Update Password
                </button>
            </div>
        </div>

        <div id="accountPreferencesModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('accountPreferences')">✕</div>
                <div class="modal-title">Account Preferences</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="openModal('selectLanguage')">
                    <div class="list-item-content">
                        <div class="list-item-title">Language</div>
                        <div class="list-item-subtitle" id="selectedLanguage">English</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('selectTimezone')">
                    <div class="list-item-content">
                        <div class="list-item-title">Timezone</div>
                        <div class="list-item-subtitle" id="selectedTimezone">Pacific Time (PT)</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('selectDateFormat')">
                    <div class="list-item-content">
                        <div class="list-item-title">Date Format</div>
                        <div class="list-item-subtitle" id="selectedDateFormat">MM/DD/YYYY</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>
        </div>

        <div id="privacySettingsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('privacySettings')">✕</div>
                <div class="modal-title">Privacy Settings</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="openModal('whoCanSeeMyPosts')">
                    <div class="list-item-content">
                        <div class="list-item-title">Who can see my posts</div>
                        <div class="list-item-subtitle">Friends</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('whoCanMessageMe')">
                    <div class="list-item-content">
                        <div class="list-item-title">Who can message me</div>
                        <div class="list-item-subtitle">Everyone</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('profileVisibility')">
                    <div class="list-item-content">
                        <div class="list-item-title">Profile visibility</div>
                        <div class="list-item-subtitle">Public</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Show online status</div>
                        <div class="list-item-subtitle">Let friends see when you're active</div>
                    </div>
                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="blockingSettingsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('blockingSettings')">✕</div>
                <div class="modal-title">Blocking Settings</div>
            </div>
            <div class="modal-content">
                <div class="post-meta" style="margin-bottom: 20px;">
                    Blocked accounts can't see your profile or contact you
                </div>
                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" class="search-input" placeholder="Search blocked accounts..." />
                </div>
                <div class="list-item">
                    <div class="post-avatar">🚫</div>
                    <div class="list-item-content">
                        <div class="list-item-title">No blocked accounts</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="dataSettingsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('dataSettings')">✕</div>
                <div class="modal-title">Data Settings</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="openModal('downloadYourData')">
                    <div class="list-item-icon">💾</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Download Your Data</div>
                        <div class="list-item-subtitle">Get a copy of your data</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('deactivateAccount')">
                    <div class="list-item-icon">⏸️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Deactivate Account</div>
                        <div class="list-item-subtitle">Temporarily disable your account</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('deleteAccount')">
                    <div class="list-item-icon">🗑️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Delete Account</div>
                        <div class="list-item-subtitle">Permanently delete your account</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>
        </div>

        <div id="emailPreferencesModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('emailPreferences')">✕</div>
                <div class="modal-title">Email Preferences</div>
            </div>
            <div class="modal-content">
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Friend Requests</div>
                        <div class="list-item-subtitle">Get notified of new requests</div>
                    </div>
                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Comments & Likes</div>
                        <div class="list-item-subtitle">Activity on your posts</div>
                    </div>
                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Messages</div>
                        <div class="list-item-subtitle">New message notifications</div>
                    </div>
                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Weekly Summary</div>
                        <div class="list-item-subtitle">Get a weekly recap</div>
                    </div>
                    <div class="toggle-switch" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="aboutConnectHubModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('aboutConnectHub')">✕</div>
                <div class="modal-title">About ConnectHub</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin-bottom: 30px;">
                    <div style="font-size: 64px; margin-bottom: 16px;">🌐</div>
                    <div class="section-title" style="margin-bottom: 8px;">ConnectHub</div>
                    <div class="post-meta">Version 2.5.1</div>
                </div>
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">What's New</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">Privacy Policy</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">Open Source Licenses</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="post-meta" style="text-align: center; margin-top: 20px;">
                    © 2025 ConnectHub. All rights reserved.
                </div>
            </div>
        </div>

        <div id="termsOfServiceModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('termsOfService')">✕</div>
                <div class="modal-title">Terms of Service</div>
            </div>
            <div class="modal-content">
                <div class="section-title" style="margin-bottom: 16px;">ConnectHub Terms of Service</div>
                <div class="post-content" style="margin-bottom: 20px;">
                    <strong>Last Updated:</strong> October 23, 2025
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    Welcome to ConnectHub! By using our service, you agree to these terms.
                </div>
                <div class="section-title" style="font-size: 16px; margin: 20px 0 12px;">1. User Accounts</div>
                <div class="post-content" style="margin-bottom: 16px;">
                    You are responsible for maintaining the security of your account and password.
                </div>
                <div class="section-title" style="font-size: 16px; margin: 20px 0 12px;">2. Content</div>
                <div class="post-content" style="margin-bottom: 16px;">
                    You retain all rights to the content you post on ConnectHub.
                </div>
                <div class="section-title" style="font-size: 16px; margin: 20px 0 12px;">3. Acceptable Use</div>
                <div class="post-content" style="margin-bottom: 16px;">
                    You agree not to use ConnectHub for any unlawful purpose or in any way that could harm the service.
                </div>
            </div>
        </div>

        <!-- Help & Support Modals -->
        <div id="accountSecurityModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('accountSecurity')">✕</div>
                <div class="modal-title">Account Security</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="openModal('resetPassword')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">How to reset your password</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('enable2FA')">
                    <div class="list-item-icon">🛡️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Enable two-factor authentication</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('manageDevices')">
                    <div class="list-item-icon">📱</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Manage login devices</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>
        </div>

        <div id="privacyHelpModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('privacyHelp')">✕</div>
                <div class="modal-title">Privacy Settings Help</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="openModal('whoCanSeePosts')">
                    <div class="list-item-icon">👁️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Who can see your posts</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('profilePrivacy')">
                    <div class="list-item-icon">🔐</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Profile privacy settings</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('dataPrivacy')">
                    <div class="list-item-icon">📊</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Data & Privacy</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>
        </div>

        <div id="messagingHelpModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('messagingHelp')">✕</div>
                <div class="modal-title">Messaging Features</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="closeModal('messagingHelp'); openModal('sendTextMessages')">
                    <div class="list-item-icon">💬</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Send text messages</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="closeModal('messagingHelp'); openModal('sendPhotosVideos')">
                    <div class="list-item-icon">📷</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Send photos and videos</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="closeModal('messagingHelp'); openModal('sendVoiceMessages')">
                    <div class="list-item-icon">🎤</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Send voice messages</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>
        </div>

        <div id="reportProblemModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('reportProblem')">✕</div>
                <div class="modal-title">Report a Problem</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="openModal('selectProblemType')">
                    <div class="list-item-content">
                        <div class="list-item-title">Problem Type</div>
                        <div class="list-item-subtitle" id="selectedProblemType">Select a category</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <textarea class="input-field textarea-field" id="problemDescription" placeholder="Describe the problem in detail..."></textarea>
                <button class="btn" onclick="submitProblemReport()">
                    Submit Report
                </button>
            </div>
        </div>

        <div id="liveChatModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('liveChat')">✕</div>
                <div class="modal-title">Live Chat Support</div>
            </div>
            <div class="modal-content">
                <div class="chat-messages" style="height: calc(100vh - 250px);">
                    <div class="chat-bubble received">
                        Hi! I'm here to help. What can I assist you with today?
                    </div>
                </div>
                <div style="position: sticky; bottom: 0; background: var(--bg-primary); padding: 16px 0; display: flex; gap: 10px;">
                    <input type="text" class="input-field" style="margin-bottom: 0;" placeholder="Type your message..." />
                    <button class="chat-send-btn" onclick="showToast('Message sent to support')">➤</button>
                </div>
            </div>
        </div>

        <div id="emailSupportModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('emailSupport')">✕</div>
                <div class="modal-title">Email Support</div>
            </div>
            <div class="modal-content">
                <input type="text" class="input-field" placeholder="Subject" />
                <textarea class="input-field textarea-field" placeholder="Your message..."></textarea>
                <div class="post-meta" style="margin-bottom: 20px;">
                    We'll respond to your email within 24 hours
                </div>
                <button class="btn" onclick="closeModal('emailSupport'); showToast('Email sent to support')">
                    Send Email
                </button>
            </div>
        </div>

        <div id="aiAssistantModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('aiAssistant')">✕</div>
                <div class="modal-title">AI Assistant</div>
            </div>
            <div class="modal-content">
                <div class="chat-messages" style="height: calc(100vh - 250px);" id="aiChatMessages">
                    <div class="chat-bubble received">
                        👋 Hi! I'm your AI Assistant. How can I help you today?
                    </div>
                    <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 12px;">
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 12px;">Quick Help Topics:</div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                            <button class="btn" style="background: var(--glass); padding: 10px; font-size: 13px;" onclick="askAI('How do I reset my password?')">
                                🔒 Reset Password
                            </button>
                            <button class="btn" style="background: var(--glass); padding: 10px; font-size: 13px;" onclick="askAI('How do I change privacy settings?')">
                                🔐 Privacy Settings
                            </button>
                            <button class="btn" style="background: var(--glass); padding: 10px; font-size: 13px;" onclick="askAI('How do I report a problem?')">
                                ⚠️ Report Issue
                            </button>
                            <button class="btn" style="background: var(--glass); padding: 10px; font-size: 13px;" onclick="askAI('How do I delete my account?')">
                                🗑️ Delete Account
                            </button>
                        </div>
                    </div>
                </div>
                <div style="position: sticky; bottom: 0; background: var(--bg-primary); padding: 16px 0; display: flex; gap: 10px;">
                    <input type="text" class="input-field" id="aiAssistantInput" style="margin-bottom: 0;" placeholder="Ask me anything..." />
                    <button class="chat-send-btn" onclick="sendToAI()">➤</button>
                </div>
            </div>
        </div>

        <!-- Reset Password Help Modal -->
        <div id="resetPasswordModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('resetPassword')">✕</div>
                <div class="modal-title">Reset Your Password</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 1:</strong> Go to Settings → Change Password
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 2:</strong> Enter your current password
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 3:</strong> Create a new strong password (at least 8 characters with letters, numbers, and symbols)
                </div>
                <div class="post-content" style="margin-bottom: 20px;">
                    <strong>Step 4:</strong> Confirm your new password and save
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">💡 Forgot your password?</div>
                    <div style="font-size: 13px; color: var(--text-secondary);">Use the "Forgot Password" link on the login screen to reset via email.</div>
                </div>
                <button class="btn" onclick="closeModal('resetPassword'); openScreen('settings')">
                    Go to Settings
                </button>
            </div>
        </div>

        <!-- Enable 2FA Modal -->
        <div id="enable2FAModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('enable2FA')">✕</div>
                <div class="modal-title">Two-Factor Authentication</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 64px; margin-bottom: 16px;">🛡️</div>
                    <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Protect Your Account</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Add an extra layer of security</div>
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 1:</strong> Go to Settings → Account Preferences
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 2:</strong> Select "Two-Factor Authentication"
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 3:</strong> Choose your method (SMS or Authenticator App)
                </div>
                <div class="post-content" style="margin-bottom: 20px;">
                    <strong>Step 4:</strong> Follow the setup instructions
                </div>
                <button class="btn" onclick="closeModal('enable2FA'); openScreen('settings')">
                    Enable 2FA
                </button>
            </div>
        </div>

        <!-- Manage Devices Modal -->
        <div id="manageDevicesModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('manageDevices')">✕</div>
                <div class="modal-title">Manage Login Devices</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="margin-bottom: 20px;">
                    View and manage all devices where you're logged in to ConnectHub.
                </div>
                <div class="section-header">
                    <div class="section-title">Active Sessions</div>
                </div>
                <div class="list-item">
                    <div class="list-item-icon">💻</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Windows PC</div>
                        <div class="list-item-subtitle">Last active: Just now • San Francisco, CA</div>
                    </div>
                    <div style="color: var(--success); font-weight: 600;">Current</div>
                </div>
                <div class="list-item">
                    <div class="list-item-icon">📱</div>
                    <div class="list-item-content">
                        <div class="list-item-title">iPhone 14</div>
                        <div class="list-item-subtitle">Last active: 2 hours ago • San Francisco, CA</div>
                    </div>
                    <button class="friend-btn secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showToast('Device logged out')">Log Out</button>
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-top: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">💡 Security Tip</div>
                    <div style="font-size: 13px; color: var(--text-secondary);">Log out of devices you don't recognize or no longer use.</div>
                </div>
            </div>
        </div>

        <!-- Who Can See Posts Modal -->
        <div id="whoCanSeePostsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('whoCanSeePosts')">✕</div>
                <div class="modal-title">Who Can See Your Posts</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="margin-bottom: 20px;">
                    Control who can view your posts and updates on ConnectHub.
                </div>
                <div class="list-item">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Public</div>
                        <div class="list-item-subtitle">Anyone on or off ConnectHub</div>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-icon">👥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Friends</div>
                        <div class="list-item-subtitle">Your friends on ConnectHub</div>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Only Me</div>
                        <div class="list-item-subtitle">Only you can see</div>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-icon">⚙️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Custom</div>
                        <div class="list-item-subtitle">Choose specific friends</div>
                    </div>
                </div>
                <button class="btn" style="margin-top: 16px;" onclick="closeModal('whoCanSeePosts'); openScreen('settings')">
                    Change Privacy Settings
                </button>
            </div>
        </div>

        <!-- Profile Privacy Modal -->
        <div id="profilePrivacyModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('profilePrivacy')">✕</div>
                <div class="modal-title">Profile Privacy Settings</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="margin-bottom: 20px;">
                    Manage who can view your profile information.
                </div>
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Show online status</div>
                        <div class="list-item-subtitle">Let friends see when you're active</div>
                    </div>
                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Allow profile visits</div>
                        <div class="list-item-subtitle">Let people view your full profile</div>
                    </div>
                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="list-item" onclick="openModal('whoCanSendFriendRequests')">
                    <div class="list-item-content">
                        <div class="list-item-title">Who can send you friend requests</div>
                        <div class="list-item-subtitle" id="friendRequestsPrivacy">Everyone</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="openModal('whoCanSeeFriendsList')">
                    <div class="list-item-content">
                        <div class="list-item-title">Who can see your friends list</div>
                        <div class="list-item-subtitle" id="friendsListPrivacy">Friends</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>
        </div>

        <!-- Data Privacy Modal -->
        <div id="dataPrivacyModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('dataPrivacy')">✕</div>
                <div class="modal-title">Data & Privacy</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="margin-bottom: 20px;">
                    Manage your personal data and privacy preferences.
                </div>
                <div class="list-item" onclick="closeModal('dataPrivacy'); openModal('downloadYourData')">
                    <div class="list-item-icon">💾</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Download Your Data</div>
                        <div class="list-item-subtitle">Get a copy of your information</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="closeModal('dataPrivacy'); openModal('activityLog')">
                    <div class="list-item-icon">🔍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Activity Log</div>
                        <div class="list-item-subtitle">Review your ConnectHub activity</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="closeModal('dataPrivacy'); openModal('dataCollection')">
                    <div class="list-item-icon">📊</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Data Collection</div>
                        <div class="list-item-subtitle">See what data we collect</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item" onclick="closeModal('dataPrivacy'); openModal('deleteAccount')">
                    <div class="list-item-icon">🗑️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Delete Account</div>
                        <div class="list-item-subtitle">Permanently remove your account</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
            </div>
        </div>

        <!-- Send Text Messages Modal -->
        <div id="sendTextMessagesModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('sendTextMessages')">✕</div>
                <div class="modal-title">Send Text Messages</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 64px; margin-bottom: 16px;">💬</div>
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 1:</strong> Go to Messages tab at the bottom
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 2:</strong> Tap "+ New" to start a new conversation
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 3:</strong> Select a friend from your list
                </div>
                <div class="post-content" style="margin-bottom: 20px;">
                    <strong>Step 4:</strong> Type your message and tap send ➤
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">💡 Quick Tip</div>
                    <div style="font-size: 13px; color: var(--text-secondary);">Tap on an existing conversation to continue chatting!</div>
                </div>
                <button class="btn" onclick="navigateToMessages('sendTextMessages')">
                    Go to Messages
                </button>
            </div>
        </div>

        <!-- Send Photos & Videos Modal -->
        <div id="sendPhotosVideosModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('sendPhotosVideos')">✕</div>
                <div class="modal-title">Send Photos & Videos</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 64px; margin-bottom: 16px;">📷</div>
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>In a conversation:</strong>
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 1:</strong> Tap the camera icon next to the message field
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 2:</strong> Choose "Take Photo" or "Choose from Gallery"
                </div>
                <div class="post-content" style="margin-bottom: 20px;">
                    <strong>Step 3:</strong> Select your photo/video and tap send
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">📝 Note</div>
                    <div style="font-size: 13px; color: var(--text-secondary);">You can send multiple photos and videos at once!</div>
                </div>
                <button class="btn" onclick="navigateToMessages('sendPhotosVideos')">
                    Open Messages
                </button>
            </div>
        </div>

        <!-- Send Voice Messages Modal -->
        <div id="sendVoiceMessagesModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('sendVoiceMessages')">✕</div>
                <div class="modal-title">Send Voice Messages</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 64px; margin-bottom: 16px;">🎤</div>
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 1:</strong> Open a conversation in Messages
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 2:</strong> Tap and hold the microphone icon
                </div>
                <div class="post-content" style="margin-bottom: 16px;">
                    <strong>Step 3:</strong> Record your message while holding
                </div>
                <div class="post-content" style="margin-bottom: 20px;">
                    <strong>Step 4:</strong> Release to send or slide to cancel
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">⚡ Quick Send</div>
                    <div style="font-size: 13px; color: var(--text-secondary);">Voice messages are perfect for quick updates on the go!</div>
                </div>
                <button class="btn" onclick="navigateToMessages('sendVoiceMessages')">
                    Try It Now
                </button>
            </div>
        </div>

        <!-- Who Can See My Posts Modal -->
        <div id="whoCanSeeMyPostsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('whoCanSeeMyPosts')">✕</div>
                <div class="modal-title">Who Can See My Posts</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="margin-bottom: 20px;">
                    Choose who can see your future posts by default.
                </div>
                <div class="list-item" onclick="updatePostVisibility('Public')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Public</div>
                        <div class="list-item-subtitle">Anyone on or off ConnectHub</div>
                    </div>
                    <div style="color: var(--primary); font-weight: 600;">✓</div>
                </div>
                <div class="list-item" onclick="updatePostVisibility('Friends')">
                    <div class="list-item-icon">👥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Friends</div>
                        <div class="list-item-subtitle">Your friends on ConnectHub</div>
                    </div>
                </div>
                <div class="list-item" onclick="updatePostVisibility('Only Me')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Only Me</div>
                        <div class="list-item-subtitle">Only you can see</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Who Can Message Me Modal -->
        <div id="whoCanMessageMeModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('whoCanMessageMe')">✕</div>
                <div class="modal-title">Who Can Message Me</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="margin-bottom: 20px;">
                    Control who can send you messages.
                </div>
                <div class="list-item" onclick="updateMessagePrivacy('Everyone')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Everyone</div>
                        <div class="list-item-subtitle">Anyone can message you</div>
                    </div>
                    <div style="color: var(--primary); font-weight: 600;">✓</div>
                </div>
                <div class="list-item" onclick="updateMessagePrivacy('Friends')">
                    <div class="list-item-icon">👥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Friends of Friends</div>
                        <div class="list-item-subtitle">Your friends and their friends</div>
                    </div>
                </div>
                <div class="list-item" onclick="updateMessagePrivacy('Friends Only')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Friends Only</div>
                        <div class="list-item-subtitle">Only your friends can message</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Visibility Modal -->
        <div id="profileVisibilityModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('profileVisibility')">✕</div>
                <div class="modal-title">Profile Visibility</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="margin-bottom: 20px;">
                    Control who can view your profile.
                </div>
                <div class="list-item" onclick="updateProfileVisibility('Public')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Public</div>
                        <div class="list-item-subtitle">Anyone can view your profile</div>
                    </div>
                    <div style="color: var(--primary); font-weight: 600;">✓</div>
                </div>
                <div class="list-item" onclick="updateProfileVisibility('Friends')">
                    <div class="list-item-icon">👥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Friends</div>
                        <div class="list-item-subtitle">Only friends can view</div>
                    </div>
                </div>
                <div class="list-item" onclick="updateProfileVisibility('Private')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Private</div>
                        <div class="list-item-subtitle">Hidden from search</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Log Modal -->
        <div id="activityLogModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('activityLog')">✕</div>
                <div class="modal-title">Activity Log</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin: 30px 0;">
                    <div style="font-size: 64px; margin-bottom: 16px;">🔍</div>
                    <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Your ConnectHub Activity</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Review everything you've done on ConnectHub</div>
                </div>
                <div class="section-header">
                    <div class="section-title">Recent Activity</div>
                </div>
                <div class="list-item">
                    <div class="list-item-icon">📝</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Created a post</div>
                        <div class="list-item-subtitle">2 hours ago</div>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-icon">👍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Liked 5 posts</div>
                        <div class="list-item-subtitle">5 hours ago</div>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-icon">💬</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Commented on a post</div>
                        <div class="list-item-subtitle">Yesterday</div>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-icon">👥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Added 2 new friends</div>
                        <div class="list-item-subtitle">2 days ago</div>
                    </div>
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-top: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">📊 Filter Options</div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                        <button class="btn" style="background: var(--glass); padding: 8px; font-size: 12px;">Posts</button>
                        <button class="btn" style="background: var(--glass); padding: 8px; font-size: 12px;">Comments</button>
                        <button class="btn" style="background: var(--glass); padding: 8px; font-size: 12px;">Likes</button>
                        <button class="btn" style="background: var(--glass); padding: 8px; font-size: 12px;">Friends</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Collection Modal -->
        <div id="dataCollectionModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('dataCollection')">✕</div>
                <div class="modal-title">Data Collection</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin: 30px 0;">
                    <div style="font-size: 64px; margin-bottom: 16px;">📊</div>
                    <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">What Data We Collect</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Transparency about your information</div>
                </div>
                <div class="post-content" style="margin-bottom: 20px;">
                    We collect information to provide you with the best ConnectHub experience and keep your account secure.
                </div>
                <div class="section-header">
                    <div class="section-title">Information We Collect</div>
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 12px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">📱 Account Information</div>
                    <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                        • Name, email, and phone number<br>
                        • Profile information and photos<br>
                        • Account settings and preferences
                    </div>
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 12px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">📝 Content You Create</div>
                    <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                        • Posts, comments, and messages<br>
                        • Photos and videos you share<br>
                        • Reactions and interactions
                    </div>
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 12px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">🔍 Usage Information</div>
                    <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                        • How you use ConnectHub features<br>
                        • Device information and IP address<br>
                        • Location data (if enabled)
                    </div>
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">💡 How We Use Your Data</div>
                    <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                        • Personalize your experience<br>
                        • Keep your account secure<br>
                        • Improve our services<br>
                        • Send you relevant notifications
                    </div>
                </div>
                <button class="btn" onclick="closeModal('dataCollection')">
                    Got It
                </button>
            </div>
        </div>

        <!-- Download Your Data Modal -->
        <div id="downloadYourDataModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('downloadYourData')">✕</div>
                <div class="modal-title">Download Your Data</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin: 30px 0;">
                    <div style="font-size: 64px; margin-bottom: 16px;">💾</div>
                    <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Download a Copy of Your Data</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Get all your photos, posts, and information</div>
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">What's Included:</div>
                    <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                        • All your posts and photos<br>
                        • Your profile information<br>
                        • Messages and conversations<br>
                        • Activity log and settings
                    </div>
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">⏱️ Processing Time</div>
                    <div style="font-size: 13px; color: var(--text-secondary);">Your download will be ready within 48 hours. We'll notify you when it's available.</div>
                </div>
                <button class="btn" onclick="requestDataDownload()">
                    Request Download
                </button>
            </div>
        </div>

        <!-- Deactivate Account Modal -->
        <div id="deactivateAccountModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('deactivateAccount')">✕</div>
                <div class="modal-title">Deactivate Account</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin: 30px 0;">
                    <div style="font-size: 64px; margin-bottom: 16px;">⏸️</div>
                    <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Temporarily Deactivate Your Account</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Your profile will be hidden until you reactivate</div>
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">What Happens:</div>
                    <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                        • Your profile will be hidden<br>
                        • People can't see your posts<br>
                        • You can reactivate anytime<br>
                        • Your data is preserved
                    </div>
                </div>
                <input type="password" class="input-field" placeholder="Enter your password to confirm" id="deactivatePassword" />
                <button class="btn" style="background: var(--warning);" onclick="confirmDeactivateAccount()">
                    Deactivate Account
                </button>
                <button class="btn" style="background: var(--glass); margin-top: 12px;" onclick="closeModal('deactivateAccount')">
                    Cancel
                </button>
            </div>
        </div>

        <!-- Delete Account Modal -->
        <div id="deleteAccountModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('deleteAccount')">✕</div>
                <div class="modal-title">Delete Account</div>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin: 30px 0;">
                    <div style="font-size: 64px; margin-bottom: 16px;">🗑️</div>
                    <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px; color: var(--error);">Permanently Delete Your Account</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">This action cannot be undone</div>
                </div>
                <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid var(--error); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: var(--error);">⚠️ Warning:</div>
                    <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                        • All your data will be permanently deleted<br>
                        • Your posts, photos, and messages will be removed<br>
                        • This action cannot be undone<br>
                        • You won't be able to reactivate this account
                    </div>
                </div>
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">💡 Alternative:</div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 12px;">Consider deactivating your account instead. You can always come back.</div>
                    <button class="btn" style="background: var(--glass); width: 100%;" onclick="closeModal('deleteAccount'); openModal('deactivateAccount')">
                        Deactivate Instead
                    </button>
                </div>
                <input type="password" class="input-field" placeholder="Enter your password to confirm" id="deletePassword" />
                <div class="toggle-container" style="margin-bottom: 16px;">
                    <div>
                        <div class="list-item-title" style="font-size: 14px;">I understand this is permanent</div>
                    </div>
                    <div class="toggle-switch" id="deleteConfirmToggle" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <button class="btn" style="background: var(--error);" onclick="confirmDeleteAccount()">
                    Delete Account Permanently
                </button>
                <button class="btn" style="background: var(--glass); margin-top: 12px;" onclick="closeModal('deleteAccount')">
                    Cancel
                </button>
            </div>
        </div>

        <!-- Select Language Modal -->
        <div id="selectLanguageModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectLanguage')">✕</div>
                <div class="modal-title">Select Language</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="updateLanguage('English')">
                    <div class="list-item-icon">🇺🇸</div>
                    <div class="list-item-content">
                        <div class="list-item-title">English</div>
                    </div>
                    <div style="color: var(--primary); font-weight: 600;">✓</div>
                </div>
                <div class="list-item" onclick="updateLanguage('Español')">
                    <div class="list-item-icon">🇪🇸</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Español</div>
                    </div>
                </div>
                <div class="list-item" onclick="updateLanguage('Français')">
                    <div class="list-item-icon">🇫🇷</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Français</div>
                    </div>
                </div>
                <div class="list-item" onclick="updateLanguage('Deutsch')">
                    <div class="list-item-icon">🇩🇪</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Deutsch</div>
                    </div>
                </div>
                <div class="list-item" onclick="updateLanguage('中文')">
                    <div class="list-item-icon">🇨🇳</div>
                    <div class="list-item-content">
                        <div class="list-item-title">中文</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Select Timezone Modal -->
        <div id="selectTimezoneModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectTimezone')">✕</div>
                <div class="modal-title">Select Timezone</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="updateTimezone('Pacific Time (PT)')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Pacific Time (PT)</div>
                        <div class="list-item-subtitle">UTC-8</div>
                    </div>
                    <div style="color: var(--primary); font-weight: 600;">✓</div>
                </div>
                <div class="list-item" onclick="updateTimezone('Mountain Time (MT)')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Mountain Time (MT)</div>
                        <div class="list-item-subtitle">UTC-7</div>
                    </div>
                </div>
                <div class="list-item" onclick="updateTimezone('Central Time (CT)')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Central Time (CT)</div>
                        <div class="list-item-subtitle">UTC-6</div>
                    </div>
                </div>
                <div class="list-item" onclick="updateTimezone('Eastern Time (ET)')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Eastern Time (ET)</div>
                        <div class="list-item-subtitle">UTC-5</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Select Date Format Modal -->
        <div id="selectDateFormatModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectDateFormat')">✕</div>
                <div class="modal-title">Select Date Format</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="updateDateFormat('MM/DD/YYYY')">
                    <div class="list-item-icon">📅</div>
                    <div class="list-item-content">
                        <div class="list-item-title">MM/DD/YYYY</div>
                        <div class="list-item-subtitle">12/31/2024</div>
                    </div>
                    <div style="color: var(--primary); font-weight: 600;">✓</div>
                </div>
                <div class="list-item" onclick="updateDateFormat('DD/MM/YYYY')">
                    <div class="list-item-icon">📅</div>
                    <div class="list-item-content">
                        <div class="list-item-title">DD/MM/YYYY</div>
                        <div class="list-item-subtitle">31/12/2024</div>
                    </div>
                </div>
                <div class="list-item" onclick="updateDateFormat('YYYY-MM-DD')">
                    <div class="list-item-icon">📅</div>
                    <div class="list-item-content">
                        <div class="list-item-title">YYYY-MM-DD</div>
                        <div class="list-item-subtitle">2024-12-31</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Who Can Send Friend Requests Modal -->
        <div id="whoCanSendFriendRequestsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('whoCanSendFriendRequests')">✕</div>
                <div class="modal-title">Who Can Send Friend Requests</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="margin-bottom: 20px;">
                    Control who can send you friend requests.
                </div>
                <div class="list-item" onclick="updateFriendRequestsPrivacy('Everyone')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Everyone</div>
                        <div class="list-item-subtitle">Anyone can send requests</div>
                    </div>
                    <div style="color: var(--primary); font-weight: 600;">✓</div>
                </div>
                <div class="list-item" onclick="updateFriendRequestsPrivacy('Friends of Friends')">
                    <div class="list-item-icon">👥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Friends of Friends</div>
                        <div class="list-item-subtitle">Only friends of your friends</div>
                    </div>
                </div>
                <div class="list-item" onclick="updateFriendRequestsPrivacy('No One')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">No One</div>
                        <div class="list-item-subtitle">Turn off friend requests</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Who Can See Friends List Modal -->
        <div id="whoCanSeeFriendsListModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('whoCanSeeFriendsList')">✕</div>
                <div class="modal-title">Who Can See Your Friends List</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="margin-bottom: 20px;">
                    Control who can view your friends list.
                </div>
                <div class="list-item" onclick="updateFriendsListPrivacy('Everyone')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Everyone</div>
                        <div class="list-item-subtitle">Anyone can view your friends</div>
                    </div>
                </div>
                <div class="list-item" onclick="updateFriendsListPrivacy('Friends')">
                    <div class="list-item-icon">👥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Friends</div>
                        <div class="list-item-subtitle">Only your friends can see</div>
                    </div>
                    <div style="color: var(--primary); font-weight: 600;">✓</div>
                </div>
                <div class="list-item" onclick="updateFriendsListPrivacy('Only Me')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Only Me</div>
                        <div class="list-item-subtitle">Hidden from everyone</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Select Problem Type Modal -->
        <div id="selectProblemTypeModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectProblemType')">✕</div>
                <div class="modal-title">Select Problem Type</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="selectProblemType('Technical Issue')">
                    <div class="list-item-icon">⚙️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Technical Issue</div>
                        <div class="list-item-subtitle">App crashes, bugs, errors</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectProblemType('Account Problem')">
                    <div class="list-item-icon">👤</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Account Problem</div>
                        <div class="list-item-subtitle">Login, password, account access</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectProblemType('Abusive Content')">
                    <div class="list-item-icon">⚠️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Abusive Content</div>
                        <div class="list-item-subtitle">Report harmful or inappropriate content</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectProblemType('Privacy Concern')">
                    <div class="list-item-icon">🔐</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Privacy Concern</div>
                        <div class="list-item-subtitle">Data privacy, security issues</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectProblemType('Feature Request')">
                    <div class="list-item-icon">💡</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Feature Request</div>
                        <div class="list-item-subtitle">Suggest new features</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectProblemType('Other')">
                    <div class="list-item-icon">📝</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Other</div>
                        <div class="list-item-subtitle">Something else</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Dating Modals -->
        <div id="recentMatchesModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('recentMatches')">✕</div>
                <div class="modal-title">Recent Matches</div>
            </div>
            <div class="modal-content">
                <div class="friend-card" onclick="closeModal('recentMatches'); openModal('chatWindow')">
                    <div class="friend-avatar">👤</div>
                    <div class="friend-info">
                        <div class="friend-name">Sarah, 28</div>
                        <div class="friend-mutual">Matched 2 hours ago</div>
                    </div>
                    <button class="friend-btn primary">Message</button>
                </div>
                <div class="friend-card" onclick="closeModal('recentMatches'); openModal('chatWindow')">
                    <div class="friend-avatar">😊</div>
                    <div class="friend-info">
                        <div class="friend-name">Emily, 26</div>
                        <div class="friend-mutual">Matched yesterday</div>
                    </div>
                    <button class="friend-btn primary">Message</button>
                </div>
            </div>
        </div>

        <div id="profileViewsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('profileViews')">✕</div>
                <div class="modal-title">Profile Views</div>
            </div>
            <div class="modal-content">
                <div class="friend-card">
                    <div class="friend-avatar">👤</div>
                    <div class="friend-info">
                        <div class="friend-name">Jessica, 27</div>
                        <div class="friend-mutual">Viewed your profile 1h ago</div>
                    </div>
                </div>
                <div class="friend-card">
                    <div class="friend-avatar">🎨</div>
                    <div class="friend-info">
                        <div class="friend-name">Amanda, 25</div>
                        <div class="friend-mutual">Viewed your profile 3h ago</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="superLikesModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('superLikes')">✕</div>
                <div class="modal-title">Super Likes</div>
            </div>
            <div class="modal-content">
                <div class="post-content" style="text-align: center; margin: 30px 0;">
                    You have <strong>3 Super Likes</strong> remaining today
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 64px; margin-bottom: 16px;">⭐</div>
                    <div class="post-content">
                        Stand out from the crowd and let someone know you're really interested!
                    </div>
                </div>
            </div>
        </div>

        <div id="todayActivityModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('todayActivity')">✕</div>
                <div class="modal-title">Today's Activity</div>
            </div>
            <div class="modal-content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">15</div>
                        <div class="stat-label">Profiles Viewed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">8</div>
                        <div class="stat-label">Likes Sent</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">12</div>
                        <div class="stat-label">Profile Views</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">3</div>
                        <div class="stat-label">New Matches</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="datingSettingsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('datingSettings')">✕</div>
                <div class="modal-title">Dating Settings</div>
            </div>
            <div class="modal-content">
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">Distance</div>
                        <div class="list-item-subtitle">50 miles</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">Age Range</div>
                        <div class="list-item-subtitle">22 - 35</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <div class="toggle-container">
                    <div>
                        <div class="list-item-title">Show me on Dating</div>
                        <div class="list-item-subtitle">Make profile visible</div>
                    </div>
                    <div class="toggle-switch active" onclick="toggleSwitch(this)">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gaming Modals -->
        <div id="allGamesModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('allGames')">✕</div>
                <div class="modal-title">All Games</div>
            </div>
            <div class="modal-content">
                <div class="game-card" onclick="playGame('puzzle')">
                    <div class="game-icon">🧩</div>
                    <div class="game-info">
                        <div class="game-title">Puzzle Master</div>
                        <div class="game-stats">Easy • Puzzle</div>
                    </div>
                </div>
                <div class="game-card" onclick="playGame('racing')">
                    <div class="game-icon">🏎️</div>
                    <div class="game-info">
                        <div class="game-title">Speed Racer</div>
                        <div class="game-stats">Medium • Racing</div>
                    </div>
                </div>
                <div class="game-card" onclick="playGame('cards')">
                    <div class="game-icon">🃏</div>
                    <div class="game-info">
                        <div class="game-title">Card Champion</div>
                        <div class="game-stats">Easy • Cards</div>
                    </div>
                </div>
                <div class="game-card" onclick="playGame('trivia')">
                    <div class="game-icon">🧠</div>
                    <div class="game-info">
                        <div class="game-title">Trivia Master</div>
                        <div class="game-stats">Medium • Trivia</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="fullLeaderboardModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('fullLeaderboard')">✕</div>
                <div class="modal-title">Leaderboard</div>
            </div>
            <div class="modal-content">
                <div class="list-item">
                    <div style="font-size: 24px; font-weight: 700; color: #ffd700;">🥇</div>
                    <div class="list-item-content">
                        <div class="list-item-title">ProGamer123</div>
                        <div class="list-item-subtitle">5,890 points</div>
                    </div>
                </div>
                <div class="list-item">
                    <div style="font-size: 24px; font-weight: 700; color: #c0c0c0;">🥈</div>
                    <div class="list-item-content">
                        <div class="list-item-title">GameMaster</div>
                        <div class="list-item-subtitle">5,234 points</div>
                    </div>
                </div>
                <div class="list-item">
                    <div style="font-size: 24px; font-weight: 700; color: #cd7f32;">🥉</div>
                    <div class="list-item-content">
                        <div class="list-item-title">SkillzPro</div>
                        <div class="list-item-subtitle">4,987 points</div>
                    </div>
                </div>
                <div class="list-item">
                    <div style="font-size: 16px; font-weight: 600;">4</div>
                    <div class="list-item-content">
                        <div class="list-item-title">ElitePlayer</div>
                        <div class="list-item-subtitle">4,756 points</div>
                    </div>
                </div>
                <div class="list-item">
                    <div style="font-size: 16px; font-weight: 600;">5</div>
                    <div class="list-item-content">
                        <div class="list-item-title">ChampionX</div>
                        <div class="list-item-subtitle">4,523 points</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="gamingNotificationsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('gamingNotifications')">✕</div>
                <div class="modal-title">Gaming Notifications</div>
            </div>
            <div class="modal-content">
                <div class="notification-item">
                    <div class="notification-icon">🎮</div>
                    <div class="notification-content">
                        <div class="notification-text">You leveled up to Level 42!</div>
                        <div class="notification-time">2 hours ago</div>
                    </div>
                </div>
                <div class="notification-item">
                    <div class="notification-icon">🏆</div>
                    <div class="notification-content">
                        <div class="notification-text">Achievement unlocked: Win 100 games</div>
                        <div class="notification-time">Yesterday</div>
                    </div>
                </div>
                <div class="notification-item">
                    <div class="notification-icon">⭐</div>
                    <div class="notification-content">
                        <div class="notification-text">New daily challenge available!</div>
                        <div class="notification-time">Today</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- More Create Modals -->
        <div id="createPollModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('createPoll')">✕</div>
                <div class="modal-title">Create Poll</div>
            </div>
            <div class="modal-content">
                <input type="text" class="input-field" placeholder="Ask a question..." id="pollQuestion" />
                <input type="text" class="input-field" placeholder="Option 1" id="pollOption1" />
                <input type="text" class="input-field" placeholder="Option 2" id="pollOption2" />
                <button class="btn" style="background: var(--glass); margin-bottom: 12px;" onclick="showToast('Option added')">
                    + Add Option
                </button>
                <div class="list-item" onclick="openModal('selectPollLength')">
                    <div class="list-item-content">
                        <div class="list-item-title">Poll Length</div>
                        <div class="list-item-subtitle" id="pollLength">1 day</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <button class="btn" onclick="createNewPoll()">
                    Create Poll
                </button>
            </div>
        </div>

        <div id="createFundraiserModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('createFundraiser')">✕</div>
                <div class="modal-title">Create Fundraiser</div>
            </div>
            <div class="modal-content">
                <input type="text" class="input-field" placeholder="Fundraiser title..." id="fundraiserTitle" />
                <input type="number" class="input-field" placeholder="Goal amount ($)" id="fundraiserGoal" />
                <textarea class="input-field textarea-field" placeholder="Tell people why you're raising money..." id="fundraiserDescription"></textarea>
                <div class="list-item" onclick="openModal('selectFundraiserCategory')">
                    <div class="list-item-content">
                        <div class="list-item-title">Category</div>
                        <div class="list-item-subtitle" id="fundraiserCategory">Select a category</div>
                    </div>
                    <div class="list-item-arrow">→</div>
                </div>
                <button class="btn" onclick="createNewFundraiser()">
                    Create Fundraiser
                </button>
            </div>
        </div>

        <div id="uploadMediaModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('uploadMedia')">✕</div>
                <div class="modal-title">Upload Photo/Video</div>
            </div>
            <div class="modal-content">
                <div style="background: var(--glass); border: 2px dashed var(--glass-border); border-radius: 16px; padding: 60px 20px; text-align: center; margin-bottom: 20px; cursor: pointer;" onclick="selectMediaFromDevice()">
                    <div style="font-size: 64px; margin-bottom: 16px;">📁</div>
                    <div style="font-size: 16px; color: var(--text-secondary);">Tap to select photos or videos</div>
                </div>
                <div style="display: flex; gap: 12px;">
                    <button class="btn" style="flex: 1;" onclick="selectPhotosFromGallery()">
                        📷 Photos
                    </button>
                    <button class="btn" style="flex: 1;" onclick="selectVideosFromGallery()">
                        🎥 Videos
                    </button>
                </div>
            </div>
        </div>

        <!-- Friend List Modals -->
        <div id="allFriendsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('allFriends')">✕</div>
                <div class="modal-title">All Friends (234)</div>
            </div>
            <div class="modal-content">
                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" class="search-input" placeholder="Search friends..." />
                </div>
                <div class="friend-card">
                    <div class="friend-avatar">👤</div>
                    <div class="friend-info">
                        <div class="friend-name">Sarah Johnson</div>
                        <div class="friend-mutual">Friends since 2020</div>
                    </div>
                    <button class="friend-btn secondary">Message</button>
                </div>
                <div class="friend-card">
                    <div class="friend-avatar">😊</div>
                    <div class="friend-info">
                        <div class="friend-name">Mike Chen</div>
                        <div class="friend-mutual">Friends since 2021</div>
                    </div>
                    <button class="friend-btn secondary">Message</button>
                </div>
            </div>
        </div>

        <div id="friendsListModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('friendsList')">✕</div>
                <div class="modal-title">Friends</div>
            </div>
            <div class="modal-content">
                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" class="search-input" placeholder="Search friends..." />
                </div>
                <div class="friend-card" onclick="closeModal('friendsList'); openScreen('profile')">
                    <div class="friend-avatar">👤</div>
                    <div class="friend-info">
                        <div class="friend-name">Sarah Johnson</div>
                        <div class="friend-mutual">Mutual friend</div>
                    </div>
                </div>
                <div class="friend-card" onclick="closeModal('friendsList'); openScreen('profile')">
                    <div class="friend-avatar">😊</div>
                    <div class="friend-info">
                        <div class="friend-name">Mike Chen</div>
                        <div class="friend-mutual">Mutual friend</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="followersListModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('followersList')">✕</div>
                <div class="modal-title">Followers</div>
            </div>
            <div class="modal-content">
                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" class="search-input" placeholder="Search followers..." />
                </div>
                <div class="friend-card">
                    <div class="friend-avatar">🎨</div>
                    <div class="friend-info">
                        <div class="friend-name">Emily Rodriguez</div>
                        <div class="friend-mutual">Following you</div>
                    </div>
                    <button class="friend-btn primary">Follow Back</button>
                </div>
            </div>
        </div>

        <div id="followingListModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('followingList')">✕</div>
                <div class="modal-title">Following</div>
            </div>
            <div class="modal-content">
                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" class="search-input" placeholder="Search following..." />
                </div>
                <div class="friend-card">
                    <div class="friend-avatar">🚀</div>
                    <div class="friend-info">
                        <div class="friend-name">Tech News Daily</div>
                        <div class="friend-mutual">Following</div>
                    </div>
                    <button class="friend-btn secondary">Unfollow</button>
                </div>
            </div>
        </div>

        <div id="allPostsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('allPosts')">✕</div>
                <div class="modal-title">All Posts</div>
            </div>
            <div class="modal-content">
                <div class="post-card">
                    <div class="post-content">Great day at the beach! 🏖️</div>
                    <div class="post-image">🏖️</div>
                    <div class="post-meta">Yesterday at 3:24 PM</div>
                </div>
                <div class="post-card">
                    <div class="post-content">Working on exciting new projects!</div>
                    <div class="post-image">💻</div>
                    <div class="post-meta">2 days ago</div>
                </div>
            </div>
        </div>

        <div id="trendingDetailsModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('trendingDetails')">✕</div>
                <div class="modal-title">Trending Details</div>
            </div>
            <div class="modal-content">
                <div class="trending-tag">#1 TRENDING</div>
                <div class="section-title" style="margin: 12px 0;">New AI Features Released</div>
                <div class="post-meta" style="margin-bottom: 20px;">45.2K posts • Trending for 3 hours</div>
                <div class="post-content" style="margin-bottom: 20px;">
                    People are talking about the latest AI features that have been released. Join the conversation!
                </div>
                <div class="section-header">
                    <div class="section-title">Related Posts</div>
                </div>
                <div class="post-card">
                    <div class="post-header">
                        <div class="post-avatar">👤</div>
                        <div class="post-header-info">
                            <div class="post-author">Tech Insider</div>
                            <div class="post-meta">1 hour ago</div>
                        </div>
                    </div>
                    <div class="post-content">These new AI features are game-changing! 🚀</div>
                </div>
            </div>
        </div>

        <!-- Select Live Privacy Modal -->
        <div id="selectLivePrivacyModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectLivePrivacy')">✕</div>
                <div class="modal-title">Select Privacy</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="selectLivePrivacy('Public')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Public</div>
                        <div class="list-item-subtitle">Anyone can watch</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectLivePrivacy('Friends')">
                    <div class="list-item-icon">👥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Friends</div>
                        <div class="list-item-subtitle">Only your friends can watch</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectLivePrivacy('Private')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Private</div>
                        <div class="list-item-subtitle">Only invited people</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Select Group Privacy Modal -->
        <div id="selectGroupPrivacyModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectGroupPrivacy')">✕</div>
                <div class="modal-title">Select Privacy</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="selectGroupPrivacy('Public')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Public</div>
                        <div class="list-item-subtitle">Anyone can find and join</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectGroupPrivacy('Private')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Private</div>
                        <div class="list-item-subtitle">Members must be approved</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Select Poll Length Modal -->
        <div id="selectPollLengthModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectPollLength')">✕</div>
                <div class="modal-title">Poll Length</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="selectPollLength('1 day')">
                    <div class="list-item-icon">📅</div>
                    <div class="list-item-content">
                        <div class="list-item-title">1 day</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectPollLength('3 days')">
                    <div class="list-item-icon">📅</div>
                    <div class="list-item-content">
                        <div class="list-item-title">3 days</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectPollLength('1 week')">
                    <div class="list-item-icon">📅</div>
                    <div class="list-item-content">
                        <div class="list-item-title">1 week</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectPollLength('2 weeks')">
                    <div class="list-item-icon">📅</div>
                    <div class="list-item-content">
                        <div class="list-item-title">2 weeks</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Select Fundraiser Category Modal -->
        <div id="selectFundraiserCategoryModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('selectFundraiserCategory')">✕</div>
                <div class="modal-title">Select Category</div>
            </div>
            <div class="modal-content">
                <div class="list-item" onclick="selectFundraiserCategory('Medical')">
                    <div class="list-item-icon">🏥</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Medical</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectFundraiserCategory('Education')">
                    <div class="list-item-icon">🎓</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Education</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectFundraiserCategory('Emergency')">
                    <div class="list-item-icon">🚨</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Emergency</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectFundraiserCategory('Community')">
                    <div class="list-item-icon">🏘️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Community</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectFundraiserCategory('Charity')">
                    <div class="list-item-icon">💝</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Charity</div>
                    </div>
                </div>
                <div class="list-item" onclick="selectFundraiserCategory('Other')">
                    <div class="list-item-icon">📋</div>
                    <div class="list-item-content">
                        <div class="list-item-title">Other</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MARKETPLACE MODALS -->
        <div id="marketplaceCartModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="marketplaceCloseModal('cart')">✕</div>
                <div class="modal-title">Shopping Cart</div>
            </div>
            <div class="modal-content" id="marketplaceCartContent">
                <div class="empty-state">
                    <div class="empty-icon">🛒</div>
                    <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">Cart is Empty</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Add items to your cart to get started</div>
                </div>
            </div>
        </div>

        <div id="marketplaceCheckoutModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="marketplaceCloseModal('checkout')">✕</div>
                <div class="modal-title">Checkout</div>
            </div>
            <div class="modal-content">
                <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 20px; border-radius: 16px; text-align: center; margin-bottom: 16px;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">Total Amount</div>
                    <div style="font-size: 48px; font-weight: 800;" id="marketplaceCheckoutTotal">$0</div>
                </div>
                <input type="text" class="input-field" placeholder="Full Name" />
                <input type="text" class="input-field" placeholder="Delivery Address" />
                <input type="tel" class="input-field" placeholder="Phone Number" />
                <button class="btn" onclick="marketplaceProcessPayment()">Place Order</button>
            </div>
        </div>

        <div id="marketplaceCreateListingModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="marketplaceCloseModal('createListing')">✕</div>
                <div class="modal-title">Create Listing</div>
            </div>
            <div class="modal-content">
                <input type="text" class="input-field" placeholder="Item Title" id="marketplaceListingTitle" />
                <input type="number" class="input-field" placeholder="Price" id="marketplaceListingPrice" />
                <select class="input-field" id="marketplaceListingCategory">
                    <option>Electronics</option>
                    <option>Clothing</option>
                    <option>Home</option>
                    <option>Books</option>
                    <option>Sports</option>
                    <option>Music</option>
                    <option>Other</option>
                </select>
                <textarea class="input-field textarea-field" placeholder="Description" id="marketplaceListingDescription"></textarea>
                <button class="btn" onclick="marketplacePublishListing()">Publish Listing</button>
            </div>
        </div>

        <div id="marketplaceItemModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="marketplaceCloseModal('item')">✕</div>
                <div class="modal-title">Item Details</div>
            </div>
            <div class="modal-content" id="marketplaceItemContent">
                <!-- Item details will be inserted here -->
            </div>
        </div>

        <div id="marketplaceOrdersModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="marketplaceCloseModal('orders')">✕</div>
                <div class="modal-title">My Orders</div>
            </div>
            <div class="modal-content">
                <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 16px; margin-bottom: 12px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <div style="font-weight: 600;">#ORD-2024-001</div>
                        <div style="padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; background: rgba(16, 185, 129, 0.2); color: var(--success);">Delivered</div>
                    </div>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 24px;">💻</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 4px;">MacBook Pro</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Delivered Dec 10, 2024</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="marketplaceChatModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="marketplaceCloseModal('chat')">✕</div>
                <div class="modal-title" id="marketplaceChatTitle">Chat</div>
            </div>
            <div class="modal-content">
                <div class="chat-messages" style="height: calc(100vh - 250px);">
                    <div class="chat-bubble received">Hi! Is the item still available?</div>
                    <div class="chat-bubble sent">Yes, it's available!</div>
                </div>
                <div style="position: sticky; bottom: 0; background: var(--bg-primary); padding: 16px 0; display: flex; gap: 10px;">
                    <input type="text" class="input-field" style="margin-bottom: 0;" placeholder="Type a message..." />
                    <button class="chat-send-btn" onclick="showToast('Message sent')">➤</button>
                </div>
            </div>
        </div>

        <!-- GAME INTERFACE MODAL -->
        <div id="gameInterfaceModal" class="modal">
            <div class="modal-header">
                <div class="modal-close" onclick="closeModal('gameInterface')">✕</div>
                <div class="modal-title" id="gameInterfaceTitle">Game</div>
            </div>
            <div class="modal-content" id="gameInterfaceContent">
                <!-- Game content will be dynamically inserted here -->
            </div>
        </div>

    </div>

    <script>
        let currentScreen = 'feed';
        let currentMainTab = 'feed';
        let currentBottomTab = 'social';

        // Switch between pill navigation tabs (Feed, Stories, Live, Trending, Groups)
        function switchPillTab(element, tab) {
            // Remove active class from all pill buttons
            document.querySelectorAll('.pill-nav-button').forEach(btn => btn.classList.remove('active'));
            
            // Add active class to clicked button
            element.classList.add('active');
            
            // Show corresponding screen
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(tab + '-screen').classList.add('active');
            
            currentMainTab = tab;
            currentScreen = tab;
        }

        // Switch between top navigation tabs (Feed, Stories, Live, Trending, Groups)
        function switchMainTab(tab) {
            // Update nav tabs
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            // Show corresponding screen
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(tab + '-screen').classList.add('active');
            
            currentMainTab = tab;
            currentScreen = tab;
        }

        // Switch between bottom navigation tabs (Social, Dating, Messages, Media, Friends)
        function switchBottomTab(tab) {
            // Update nav items
            document.querySelectorAll('.bottom-nav .nav-item').forEach(item => item.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            // Map bottom tabs to screens
            let screenMap = {
                'social': 'feed',
                'dating': 'dating',
                'messages': 'messages',
                'media': 'media',
                'friends': 'friends'
            };
            
            let screenToShow = screenMap[tab];
            
            // Hide all screens
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            
            // Show selected screen
            document.getElementById(screenToShow + '-screen').classList.add('active');
            
            // Reset top nav tabs when switching to social
            if (tab === 'social') {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                document.querySelector('.nav-tab').classList.add('active');
                currentMainTab = 'feed';
            }
            
            currentBottomTab = tab;
            currentScreen = screenToShow;
        }

        // Switch between main screens (legacy support)
        function switchScreen(screen) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            
            // Show selected screen
            document.getElementById(screen + '-screen').classList.add('active');
            
            currentScreen = screen;
        }

        // Open a screen from anywhere
        function openScreen(screen) {
            // Close any open modals
            document.querySelectorAll('.modal').forEach(m => m.classList.remove('show'));
            
            // Hide all screens
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            
            // Show selected screen
            document.getElementById(screen + '-screen').classList.add('active');
            
            currentScreen = screen;
        }

        // Modal functions
        function openModal(type) {
            const modal = document.getElementById(type + 'Modal');
            if (modal) {
                modal.classList.add('show');
            }
        }

        function closeModal(type) {
            const modal = document.getElementById(type + 'Modal');
            if (modal) {
                modal.classList.remove('show');
            }
        }

        // Toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // Post actions
        function toggleLikePost(button) {
            button.classList.toggle('active');
            const icon = button.querySelector('span');
            if (button.classList.contains('active')) {
                icon.textContent = '❤️';
                showToast('Liked!');
            } else {
                icon.textContent = '👍';
            }
        }

        function sharePost() {
            showToast('Post shared!');
        }

        function publishPost() {
            closeModal('createPost');
            showToast('Post published!');
        }

        function selectFeeling(feeling) {
            closeModal('addFeeling');
            showToast(`Feeling ${feeling}`);
        }

        // Toggle switch
        function toggleSwitch(element) {
            element.classList.toggle('active');
        }

        // Search functionality
        function handleSearch(value) {
            const defaultView = document.getElementById('searchDefault');
            const resultsView = document.getElementById('searchResults');
            
            if (value.trim().length > 0) {
                defaultView.style.display = 'none';
                resultsView.style.display = 'block';
            } else {
                defaultView.style.display = 'block';
                resultsView.style.display = 'none';
            }
        }

        function clearSearch() {
            const searchInput = document.getElementById('mainSearchInput');
            searchInput.value = '';
            handleSearch('');
            showToast('Search cleared');
        }

        function clearRecentSearches() {
            // Get all recent search items and remove them
            const searchDefault = document.getElementById('searchDefault');
            const recentSearchItems = searchDefault.querySelectorAll('.list-item');
            recentSearchItems.forEach((item, index) => {
                // Only remove the first two items (recent searches, not trending or quick links)
                if (index < 2) {
                    item.style.opacity = '0';
                    setTimeout(() => {
                        item.remove();
                    }, 200);
                }
            });
            showToast('Recent searches cleared');
        }

        function removeSearch(element) {
            element.parentElement.style.opacity = '0';
            setTimeout(() => {
                element.parentElement.remove();
                showToast('Removed from recent searches');
            }, 200);
        }

        function performSearch(query) {
            const searchInput = document.getElementById('mainSearchInput');
            searchInput.value = query;
            handleSearch(query);
            showToast(`Searching for: ${query}`);
        }

        // Notification actions
        function markAllAsRead() {
            const unreadNotifications = document.querySelectorAll('#notifications-screen .notification-item.unread');
            unreadNotifications.forEach(item => {
                item.classList.remove('unread');
            });
            showToast('All notifications marked as read');
        }

        function goToPost(element) {
            // Remove unread status
            element.classList.remove('unread');
            
            // Get notification type from the icon
            const icon = element.querySelector('.notification-icon').textContent.trim();
            
            // Navigate based on notification type
            if (icon === '👍' || icon === '💬') {
                // Like or comment notification - go to feed
                closeModal('notifications');
                openScreen('feed');
                showToast('Navigating to post...');
            } else if (icon === '👥') {
                // Friend request - go to friends screen
                openScreen('friends');
                showToast('Opening friend requests...');
            } else if (icon === '📅') {
                // Event notification - open event details
                openScreen('events');
                showToast('Opening event details...');
            } else if (icon === '🎮') {
                // Gaming notification - go to gaming screen
                openScreen('gaming');
                showToast('Opening gaming hub...');
            } else {
                // Default action
                showToast('Opening content...');
            }
        }

        // Message actions
        function sendMessage() {
            showToast('Message sent!');
        }

        // Camera functions
        let isRecording = false;
        
        function toggleRecording() {
            isRecording = !isRecording;
            if (isRecording) {
                showToast('Recording started');
            } else {
                showToast('Recording stopped');
            }
        }

        function switchCamera() {
            showToast('Camera switched');
        }

        function openGallery() {
            showToast('Gallery opened');
        }

        function selectAR(effect) {
            closeModal('arFeatures');
            showToast(`AR effect applied: ${effect}`);
        }

        // Profile actions
        function saveProfile() {
            closeModal('editProfile');
            showToast('Profile updated!');
        }

        function shareProfile() {
            showToast('Profile link copied!');
        }

        // Friend actions
        function addFriend(button) {
            button.textContent = '✓ Request Sent';
            button.style.background = 'var(--success)';
            showToast('Friend request sent!');
        }

        function removeSuggestion(button) {
            button.parentElement.parentElement.style.opacity = '0';
            setTimeout(() => {
                button.parentElement.parentElement.remove();
                showToast('Suggestion removed');
            }, 200);
        }

        // Dating actions
        function passDatingProfile() {
            showToast('Passed');
        }

        function likeDatingProfile() {
            showToast('Liked! 💚');
        }

        function superLike() {
            showToast('Super Liked! ⭐');
        }

        // Event actions
        function markInterested() {
            showToast('Marked as interested');
        }

        function shareEvent() {
            showToast('Event shared!');
        }

        // Gaming actions
        function playGame(game) {
            // Open the game interface modal
            openModal('gameInterface');
            
            // Update the game interface based on which game was selected
            const gameTitle = document.getElementById('gameInterfaceTitle');
            const gameContent = document.getElementById('gameInterfaceContent');
            
            const games = {
                'puzzle': { title: '🧩 Puzzle Master', content: 'Match 3 or more blocks to clear them!' },
                'racing': { title: '🏎️ Speed Racer', content: 'Race to the finish line!' },
                'cards': { title: '🃏 Card Champion', content: 'Beat the dealer in this card game!' },
                'trivia': { title: '🧠 Trivia Master', content: 'Answer questions to win!' }
            };
            
            const selectedGame = games[game] || { title: '🎮 Game', content: 'Loading game...' };
            gameTitle.textContent = selectedGame.title;
            gameContent.innerHTML = `
                <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); height: 300px; border-radius: 16px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 64px; margin-bottom: 20px;">
                    <div style="font-size: 80px; margin-bottom: 20px;">${selectedGame.title.split(' ')[0]}</div>
                    <button class="btn" style="width: auto; padding: 16px 40px; font-size: 18px;" onclick="startGame('${game}')">
                        ▶️ Start Game
                    </button>
                </div>
                <div style="font-size: 16px; text-align: center; color: var(--text-secondary); margin-bottom: 20px;">
                    ${selectedGame.content}
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">Level 5</div>
                        <div class="stat-label">Current Level</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">2,450</div>
                        <div class="stat-label">High Score</div>
                    </div>
                </div>
            `;
            
            showToast(`Loading ${game}...`);
        }
        
        // Start game function
        function startGame(game) {
            closeModal('gameInterface');
            showToast(`🎮 Starting ${game}... Game will begin!`);
            
            // Simulate game starting
            setTimeout(() => {
                showToast('🎉 Game started! Good luck!');
            }, 1000);
        }

        // Initialize
        window.addEventListener('load', () => {
            console.log('ConnectHub Complete Prototype Loaded');
        });

        // Close modal when clicking outside
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                const modalId = e.target.id.replace('Modal', '');
                closeModal(modalId);
            }
        });

        // ========== MARKETPLACE FUNCTIONALITY ==========
        
        // Marketplace Sample Data
        const marketplaceListings = [
            { id: 1, title: 'MacBook Pro 2023', price: 1200, category: 'electronics', emoji: '💻', seller: 'Sarah M', rating: 4.9, description: 'Like new MacBook Pro with M2 chip, 16GB RAM, 512GB SSD.', condition: 'like-new', gradient: 'linear-gradient(135deg, var(--primary), var(--secondary))' },
            { id: 2, title: 'Wireless Headphones', price: 120, category: 'electronics', emoji: '🎧', seller: 'Mike J', rating: 4.8, description: 'Premium wireless headphones with noise cancellation.', condition: 'good', gradient: 'linear-gradient(135deg, var(--success), var(--accent))' },
            { id: 3, title: 'Vintage Camera', price: 450, category: 'electronics', emoji: '📷', seller: 'Emma W', rating: 5.0, description: 'Classic film camera in excellent condition.', condition: 'good', gradient: 'linear-gradient(135deg, var(--warning), var(--error))' },
            { id: 4, title: 'Gaming Console', price: 350, category: 'electronics', emoji: '🎮', seller: 'John D', rating: 4.7, description: 'Latest gaming console with 2 controllers.', condition: 'like-new', gradient: 'linear-gradient(135deg, var(--secondary), var(--primary))' },
            { id: 5, title: 'Smart Watch', price: 180, category: 'electronics', emoji: '⌚', seller: 'Lisa G', rating: 4.9, description: 'Fitness tracking, heart rate monitor, waterproof.', condition: 'good', gradient: 'linear-gradient(135deg, var(--accent), var(--success))' },
            { id: 6, title: 'Winter Jacket', price: 85, category: 'clothing', emoji: '🧥', seller: 'Anna K', rating: 4.6, description: 'Warm winter jacket, size L.', condition: 'like-new', gradient: 'linear-gradient(135deg, var(--error), var(--warning))' },
            { id: 7, title: 'Running Shoes', price: 65, category: 'sports', emoji: '👟', seller: 'Tom R', rating: 4.5, description: 'Professional running shoes, size 10.', condition: 'good', gradient: 'linear-gradient(135deg, var(--primary), var(--accent))' },
            { id: 8, title: 'Coffee Maker', price: 45, category: 'home', emoji: '☕', seller: 'Kate M', rating: 4.8, description: 'Programmable coffee maker with grinder.', condition: 'good', gradient: 'linear-gradient(135deg, var(--warning), var(--primary))' },
            { id: 9, title: 'Office Chair', price: 150, category: 'home', emoji: '🪑', seller: 'David L', rating: 4.7, description: 'Ergonomic office chair with lumbar support.', condition: 'like-new', gradient: 'linear-gradient(135deg, var(--success), var(--primary))' },
            { id: 10, title: 'Guitar', price: 280, category: 'music', emoji: '🎸', seller: 'Sarah M', rating: 5.0, description: 'Acoustic guitar with case.', condition: 'good', gradient: 'linear-gradient(135deg, var(--secondary), var(--accent))' },
            { id: 11, title: 'Desk Lamp', price: 35, category: 'home', emoji: '💡', seller: 'Mike J', rating: 4.6, description: 'LED desk lamp with adjustable brightness.', condition: 'new', gradient: 'linear-gradient(135deg, var(--accent), var(--warning))' },
            { id: 12, title: 'Backpack', price: 55, category: 'other', emoji: '🎒', seller: 'Emma W', rating: 4.8, description: 'Durable travel backpack with laptop compartment.', condition: 'like-new', gradient: 'linear-gradient(135deg, var(--primary), var(--success))' },
            { id: 13, title: 'Cookbook Collection', price: 40, category: 'books', emoji: '📚', seller: 'Lisa G', rating: 4.9, description: 'Set of 5 professional cookbooks.', condition: 'good', gradient: 'linear-gradient(135deg, var(--warning), var(--secondary))' },
            { id: 14, title: 'Yoga Mat', price: 25, category: 'sports', emoji: '🧘', seller: 'Anna K', rating: 4.7, description: 'Premium yoga mat with carry strap.', condition: 'like-new', gradient: 'linear-gradient(135deg, var(--success), var(--accent))' },
            { id: 15, title: 'Board Game Set', price: 30, category: 'toys', emoji: '🎲', seller: 'John D', rating: 4.8, description: 'Collection of 3 popular board games.', condition: 'good', gradient: 'linear-gradient(135deg, var(--error), var(--primary))' },
            { id: 16, title: 'Plant Pots', price: 20, category: 'home', emoji: '🪴', seller: 'Kate M', rating: 4.6, description: 'Set of 4 ceramic plant pots.', condition: 'new', gradient: 'linear-gradient(135deg, var(--accent), var(--success))' },
        ];

        // Marketplace State
        let marketplaceCart = [];
        let marketplaceWishlist = [];
        let marketplaceNotificationCount = 3;
        let currentMarketplaceItem = null;

        // Initialize marketplace when screen opens
        function initializeMarketplace() {
            marketplaceRenderListings();
            marketplaceUpdateCartBadge();
        }

        // Render marketplace listings
        function marketplaceRenderListings() {
            const grid = document.getElementById('marketplaceListingsGrid');
            if (!grid) return;
            
            grid.innerHTML = marketplaceListings.map(item => `
                <div class="listing-card" onclick="marketplaceOpenItemDetails(${item.id})" style="background: var(--bg-card); border: 1px solid var(--glass-border); border-radius: 12px; overflow: hidden; cursor: pointer; transition: all 0.3s;">
                    <div style="width: 100%; height: 140px; background: ${item.gradient}; display: flex; align-items: center; justify-content: center; font-size: 48px; position: relative;">
                        ${item.emoji}
                        <div onclick="event.stopPropagation(); marketplaceToggleWishlist(${item.id})" style="position: absolute; top: 8px; right: 8px; width: 32px; height: 32px; border-radius: 50%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; font-size: 16px; cursor: pointer;">
                            ${marketplaceWishlist.includes(item.id) ? '❤️' : '🤍'}
                        </div>
                    </div>
                    <div style="padding: 12px;">
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${item.title}</div>
                        <div style="font-size: 18px; font-weight: 800; color: var(--primary); margin-bottom: 4px;">$${item.price}</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">${item.condition} • ${item.seller}</div>
                    </div>
                </div>
            `).join('');
        }

        // Switch marketplace tabs
        function marketplaceSwitchTab(tab) {
            document.querySelectorAll('#marketplace-screen .pill-nav-button').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');

            document.querySelectorAll('#marketplace-screen .tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById('marketplace-' + tab + '-tab').classList.add('active');

            if (tab === 'wishlist') {
                marketplaceRenderWishlist();
            } else if (tab === 'selling') {
                marketplaceRenderMyListings();
            }
        }

        // Toggle wishlist
        function marketplaceToggleWishlist(id) {
            const index = marketplaceWishlist.indexOf(id);
            if (index > -1) {
                marketplaceWishlist.splice(index, 1);
                showToast('Removed from wishlist');
            } else {
                marketplaceWishlist.push(id);
                showToast('Added to wishlist ❤️');
            }
            marketplaceRenderListings();
            marketplaceRenderWishlist();
        }

        // Render wishlist
        function marketplaceRenderWishlist() {
            const items = marketplaceListings.filter(item => marketplaceWishlist.includes(item.id));
            const grid = document.getElementById('marketplaceWishlistGrid');
            const empty = document.getElementById('marketplaceEmptyWishlist');

            if (items.length === 0) {
                grid.innerHTML = '';
                empty.style.display = 'block';
            } else {
                empty.style.display = 'none';
                grid.innerHTML = items.map(item => `
                    <div class="listing-card" onclick="marketplaceOpenItemDetails(${item.id})" style="background: var(--bg-card); border: 1px solid var(--glass-border); border-radius: 12px; overflow: hidden; cursor: pointer;">
                        <div style="width: 100%; height: 140px; background: ${item.gradient}; display: flex; align-items: center; justify-content: center; font-size: 48px; position: relative;">
                            ${item.emoji}
                            <div onclick="event.stopPropagation(); marketplaceToggleWishlist(${item.id})" style="position: absolute; top: 8px; right: 8px; width: 32px; height: 32px; border-radius: 50%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; font-size: 16px;">
                                ❤️
                            </div>
                        </div>
                        <div style="padding: 12px;">
                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">${item.title}</div>
                            <div style="font-size: 18px; font-weight: 800; color: var(--primary); margin-bottom: 4px;">$${item.price}</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">${item.condition} • ${item.seller}</div>
                        </div>
                    </div>
                `).join('');
            }

            document.getElementById('marketplaceWishlistCount').textContent = `${items.length} items`;
        }

        // Render my listings
        function marketplaceRenderMyListings() {
            const myItems = marketplaceListings.slice(0, 5);
            const grid = document.getElementById('marketplaceMyListingsGrid');
            if (!grid) return;

            grid.innerHTML = myItems.map(item => `
                <div class="listing-card" onclick="marketplaceOpenItemDetails(${item.id})" style="background: var(--bg-card); border: 1px solid var(--glass-border); border-radius: 12px; overflow: hidden; cursor: pointer;">
                    <div style="width: 100%; height: 140px; background: ${item.gradient}; display: flex; align-items: center; justify-content: center; font-size: 48px;">
                        ${item.emoji}
                    </div>
                    <div style="padding: 12px;">
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">${item.title}</div>
                        <div style="font-size: 18px; font-weight: 800; color: var(--primary); margin-bottom: 4px;">$${item.price}</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">Active • 45 views</div>
                    </div>
                </div>
            `).join('');
        }

        // Open item details
        function marketplaceOpenItemDetails(id) {
            const item = marketplaceListings.find(i => i.id === id);
            if (!item) return;

            currentMarketplaceItem = item;
            const content = document.getElementById('marketplaceItemContent');
            
            content.innerHTML = `
                <div style="width: 100%; height: 300px; background: ${item.gradient}; display: flex; align-items: center; justify-content: center; font-size: 100px; margin-bottom: 16px;">
                    ${item.emoji}
                </div>
                <div style="font-size: 32px; font-weight: 800; color: var(--primary); margin-bottom: 8px;">$${item.price}</div>
                <div style="font-size: 22px; font-weight: 700; margin-bottom: 12px;">${item.title}</div>
                <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 16px;">
                    <span style="background: var(--glass); padding: 4px 12px; border-radius: 12px; margin-right: 8px;">${item.condition}</span>
                    <span>⭐ ${item.rating}</span>
                </div>
                <div style="font-size: 15px; line-height: 1.6; color: var(--text-secondary); margin-bottom: 16px;">
                    ${item.description}
                </div>
                <div class="list-item" style="margin-bottom: 16px;">
                    <div style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 16px;">${item.seller.substring(0, 2)}</div>
                    <div class="list-item-content">
                        <div class="list-item-title">${item.seller}</div>
                        <div class="list-item-subtitle">⭐ ${item.rating} • 47 sales</div>
                    </div>
                    <button class="nav-btn" onclick="marketplaceOpenChat('${item.seller}', '${item.seller.substring(0, 2)}')">💬</button>
                </div>
                <div style="display: flex; gap: 12px; margin-top: 20px;">
                    <button class="btn" style="flex: 1; background: var(--glass); border: 1px solid var(--glass-border);" onclick="marketplaceToggleWishlist(${id})">
                        ${marketplaceWishlist.includes(id) ? '❤️' : '🤍'} Save
                    </button>
                    <button class="btn" style="flex: 1;" onclick="marketplaceAddToCart(${id})">
                        🛒 Add to Cart
                    </button>
                </div>
            `;

            marketplaceOpenModal('item');
        }

        // Add to cart
        function marketplaceAddToCart(id) {
            if (!marketplaceCart.includes(id)) {
                marketplaceCart.push(id);
                marketplaceUpdateCartBadge();
                showToast('Added to cart! 🛒');
                marketplaceCloseModal('item');
            } else {
                showToast('Already in cart');
            }
        }

        // Update cart badge
        function marketplaceUpdateCartBadge() {
            const badge = document.getElementById('marketplaceCartBadge');
            if (marketplaceCart.length > 0) {
                badge.textContent = marketplaceCart.length;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        // Render cart
        function marketplaceRenderCart() {
            const items = marketplaceListings.filter(item => marketplaceCart.includes(item.id));
            const content = document.getElementById('marketplaceCartContent');
            
            if (items.length === 0) {
                content.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">🛒</div>
                        <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">Cart is Empty</div>
                        <div style="font-size: 14px; color: var(--text-secondary);">Add items to your cart to get started</div>
                    </div>
                `;
                return;
            }

            const total = items.reduce((sum, item) => sum + item.price, 0);
            
            content.innerHTML = items.map(item => `
                <div class="list-item" style="margin-bottom: 12px;">
                    <div style="width: 80px; height: 80px; background: ${item.gradient}; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 32px; flex-shrink: 0;">
                        ${item.emoji}
                    </div>
                    <div class="list-item-content">
                        <div class="list-item-title">${item.title}</div>
                        <div style="font-size: 18px; font-weight: 700; color: var(--primary);">$${item.price}</div>
                    </div>
                    <div onclick="event.stopPropagation(); marketplaceRemoveFromCart(${item.id})" style="color: var(--error); cursor: pointer; padding: 8px; font-size: 20px;">🗑️</div>
                </div>
            `).join('');
            
            content.innerHTML += `
                <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); padding: 20px; border-radius: 16px; margin-top: 20px; text-align: center;">
                    <div style="font-size: 14px; margin-bottom: 8px;">Total</div>
                    <div style="font-size: 32px; font-weight: 800;">$${total}</div>
                </div>
                <button class="btn" style="margin-top: 16px;" onclick="marketplaceProceedToCheckout()">Checkout</button>
            `;
        }

        function marketplaceRemoveFromCart(id) {
            marketplaceCart = marketplaceCart.filter(itemId => itemId !== id);
            marketplaceUpdateCartBadge();
            marketplaceRenderCart();
            showToast('Removed from cart');
        }

        function marketplaceProceedToCheckout() {
            if (marketplaceCart.length === 0) {
                showToast('Cart is empty');
                return;
            }
            const items = marketplaceListings.filter(item => marketplaceCart.includes(item.id));
            const total = items.reduce((sum, item) => sum + item.price, 0);
            document.getElementById('marketplaceCheckoutTotal').textContent = `$${total}`;
            marketplaceCloseModal('cart');
            setTimeout(() => marketplaceOpenModal('checkout'), 300);
        }

        function marketplaceProcessPayment() {
            showToast('Processing payment...');
            setTimeout(() => {
                marketplaceCart = [];
                marketplaceUpdateCartBadge();
                marketplaceCloseModal('checkout');
                showToast('Order placed successfully! 🎉');
            }, 1500);
        }

        function marketplacePublishListing() {
            const title = document.getElementById('marketplaceListingTitle').value;
            const price = document.getElementById('marketplaceListingPrice').value;
            
            if (!title || !price) {
                showToast('Please fill all fields');
                return;
            }
            
            marketplaceCloseModal('createListing');
            showToast('Listing published! 🎉');
        }

        function marketplaceSearchItems(query) {
            const filtered = marketplaceListings.filter(item => 
                item.title.toLowerCase().includes(query.toLowerCase()) ||
                item.description.toLowerCase().includes(query.toLowerCase())
            );
            
            const grid = document.getElementById('marketplaceListingsGrid');
            if (!grid) return;
            
            grid.innerHTML = filtered.map(item => `
                <div class="listing-card" onclick="marketplaceOpenItemDetails(${item.id})" style="background: var(--bg-card); border: 1px solid var(--glass-border); border-radius: 12px; overflow: hidden; cursor: pointer; transition: all 0.3s;">
                    <div style="width: 100%; height: 140px; background: ${item.gradient}; display: flex; align-items: center; justify-content: center; font-size: 48px; position: relative;">
                        ${item.emoji}
                    </div>
                    <div style="padding: 12px;">
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">${item.title}</div>
                        <div style="font-size: 18px; font-weight: 800; color: var(--primary); margin-bottom: 4px;">$${item.price}</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">${item.condition}</div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('marketplaceResultsCount').textContent = `${filtered.length} items`;
        }

        function marketplaceFilterByCategory(category) {
            const filtered = marketplaceListings.filter(item => item.category === category);
            const grid = document.getElementById('marketplaceListingsGrid');
            if (!grid) return;
            
            grid.innerHTML = filtered.map(item => `
                <div class="listing-card" onclick="marketplaceOpenItemDetails(${item.id})" style="background: var(--bg-card); border: 1px solid var(--glass-border); border-radius: 12px; overflow: hidden; cursor: pointer;">
                    <div style="width: 100%; height: 140px; background: ${item.gradient}; display: flex; align-items: center; justify-content: center; font-size: 48px;">
                        ${item.emoji}
                    </div>
                    <div style="padding: 12px;">
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">${item.title}</div>
                        <div style="font-size: 18px; font-weight: 800; color: var(--primary); margin-bottom: 4px;">$${item.price}</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">${item.condition}</div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('marketplaceResultsCount').textContent = `${filtered.length} items`;
            showToast(`Showing ${category}`);
        }

        function marketplaceOpenModal(type) {
            const modal = document.getElementById('marketplace' + type.charAt(0).toUpperCase() + type.slice(1) + 'Modal');
            if (modal) {
                modal.classList.add('show');
                if (type === 'cart') {
                    marketplaceRenderCart();
                }
            }
        }

        function marketplaceCloseModal(type) {
            const modal = document.getElementById('marketplace' + type.charAt(0).toUpperCase() + type.slice(1) + 'Modal');
            if (modal) {
                modal.classList.remove('show');
            }
        }

        function marketplaceToggleNotifications() {
            const panel = document.getElementById('marketplaceNotificationsPanel');
            panel.classList.toggle('show');
        }

        function marketplaceMarkAllRead() {
            document.querySelectorAll('#marketplaceNotificationsPanel .notification-item.unread').forEach(item => {
                item.classList.remove('unread');
            });
            marketplaceNotificationCount = 0;
            document.getElementById('marketplaceNotificationsBadge').style.display = 'none';
            showToast('All notifications marked as read');
        }

        function marketplaceHandleNotification(type) {
            marketplaceToggleNotifications();
            if (type === 'order') {
                marketplaceOpenModal('orders');
            } else if (type === 'message') {
                marketplaceSwitchTab('messages');
            }
        }

        function marketplaceOpenChat(name, initials) {
            document.getElementById('marketplaceChatTitle').textContent = name;
            marketplaceOpenModal('chat');
        }

        // Initialize marketplace when opening the screen
        document.addEventListener('DOMContentLoaded', function() {
            initializeMarketplace();
        });

        // Listen for screen changes to initialize marketplace
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.target.id === 'marketplace-screen' && mutation.target.classList.contains('active')) {
                    initializeMarketplace();
                }
            });
        });

        if (document.getElementById('marketplace-screen')) {
            observer.observe(document.getElementById('marketplace-screen'), {
                attributes: true,
                attributeFilter: ['class']
            });
        }

        // ========== HISTORY NAVIGATION SYSTEM ==========
        
        let navigationHistory = [];
        let currentModalStack = [];

        // Enhanced openScreen with history tracking
        const originalOpenScreen = openScreen;
        openScreen = function(screen) {
            navigationHistory.push({type: 'screen', id: currentScreen});
            originalOpenScreen(screen);
        }

        // Enhanced openModal with history tracking
        const originalOpenModal = openModal;
        openModal = function(type) {
            navigationHistory.push({type: 'modal', id: type});
            currentModalStack.push(type);
            originalOpenModal(type);
        }

        // Enhanced closeModal with history awareness
        const originalCloseModal = closeModal;
        closeModal = function(type) {
            const index = currentModalStack.indexOf(type);
            if (index > -1) {
                currentModalStack.splice(index, 1);
            }
            originalCloseModal(type);
        }

        // Handle browser back button
        window.addEventListener('popstate', function(e) {
            if (currentModalStack.length > 0) {
                const lastModal = currentModalStack.pop();
                originalCloseModal(lastModal);
            } else if (currentScreen !== 'feed') {
                originalOpenScreen('feed');
            }
        });

        // Push initial state
        history.pushState({screen: 'feed'}, '', '#feed');

        // Enhanced navigation functions that update URL hash
        function navigateToScreen(screen) {
            history.pushState({screen: screen}, '', '#' + screen);
            openScreen(screen);
        }

        function navigateBack() {
            if (currentModalStack.length > 0) {
                const lastModal = currentModalStack.pop();
                closeModal(lastModal);
            } else if (currentScreen !== 'feed') {
                openScreen('feed');
            } else {
                showToast('Already at home');
            }
        }

        // Add back button handler to logo
        document.querySelector('.nav-logo').onclick = function() {
            if (currentScreen !== 'feed') {
                openScreen('feed');
            } else {
                showToast('Already at home');
            }
        };

        // ========== CREATE POST FUNCTIONALITY ==========
        
        let selectedPhotoForPost = null;
        let selectedVideoForPost = null;
        let selectedLocationForPost = null;
        let taggedPeopleInPost = [];

        // Add photo to post
        function addPhotoToPost() {
            openModal('selectPhotoForPost');
        }

        // Select photo from gallery
        function selectPhoto(emoji) {
            selectedPhotoForPost = emoji;
            document.getElementById('photoPreview').textContent = emoji;
            document.getElementById('selectedPhotoPreview').style.display = 'block';
            closeModal('selectPhotoForPost');
            showToast('Photo added! 📷');
        }

        // Remove selected photo
        function removeSelectedPhoto() {
            selectedPhotoForPost = null;
            document.getElementById('selectedPhotoPreview').style.display = 'none';
            showToast('Photo removed');
        }

        // Add video to post
        function addVideoToPost() {
            openModal('selectVideoForPost');
        }

        // Select video from gallery
        function selectVideo(emoji) {
            selectedVideoForPost = emoji;
            document.getElementById('videoPreview').textContent = emoji;
            document.getElementById('selectedVideoPreview').style.display = 'block';
            closeModal('selectVideoForPost');
            showToast('Video added! 🎥');
        }

        // Remove selected video
        function removeSelectedVideo() {
            selectedVideoForPost = null;
            document.getElementById('selectedVideoPreview').style.display = 'none';
            showToast('Video removed');
        }

        // Add location to post
        function addLocationToPost() {
            openModal('selectLocation');
        }

        // Select location
        function selectLocation(location) {
            selectedLocationForPost = location;
            document.getElementById('locationText').textContent = location;
            document.getElementById('selectedLocation').style.display = 'block';
            closeModal('selectLocation');
            showToast('Location added! 📍');
        }

        // Remove selected location
        function removeSelectedLocation() {
            selectedLocationForPost = null;
            document.getElementById('selectedLocation').style.display = 'none';
            showToast('Location removed');
        }

        // Tag people in post
        function tagPeopleInPost() {
            openModal('tagPeople');
        }

        // Tag a person
        function tagPerson(name, emoji) {
            if (!taggedPeopleInPost.find(p => p.name === name)) {
                taggedPeopleInPost.push({name: name, emoji: emoji});
                updateTaggedPeopleDisplay();
                showToast(`Tagged ${name}!`);
            } else {
                showToast(`${name} already tagged`);
            }
        }

        // Update tagged people display
        function updateTaggedPeopleDisplay() {
            const container = document.getElementById('taggedPeopleList');
            const section = document.getElementById('taggedPeople');
            
            if (taggedPeopleInPost.length > 0) {
                section.style.display = 'block';
                container.innerHTML = taggedPeopleInPost.map((person, index) => `
                    <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 20px; padding: 6px 12px; display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 16px;">${person.emoji}</span>
                        <span style="font-size: 13px; font-weight: 600;">${person.name}</span>
                        <span onclick="removeTaggedPerson(${index})" style="cursor: pointer; margin-left: 4px; color: var(--error);">✕</span>
                    </div>
                `).join('');
            } else {
                section.style.display = 'none';
            }
        }

        // Remove tagged person
        function removeTaggedPerson(index) {
            const person = taggedPeopleInPost[index];
            taggedPeopleInPost.splice(index, 1);
            updateTaggedPeopleDisplay();
            showToast(`Removed ${person.name}`);
        }

        // Select privacy setting
        function selectPrivacy(privacy) {
            document.getElementById('postPrivacy').textContent = privacy;
            closeModal('selectPrivacy');
            showToast(`Privacy set to ${privacy}`);
        }

        // Publish post with all selected content
        function publishPost() {
            const text = document.getElementById('postTextContent').value;
            
            if (!text && !selectedPhotoForPost && !selectedVideoForPost) {
                showToast('Please add some content to your post');
                return;
            }

            // Create new post object
            const newPost = {
                text: text,
                photo: selectedPhotoForPost,
                video: selectedVideoForPost,
                location: selectedLocationForPost,
                taggedPeople: [...taggedPeopleInPost],
                privacy: document.getElementById('postPrivacy').textContent,
                timestamp: 'Just now'
            };

            // Add post to feed
            addPostToFeed(newPost);

            // Reset form
            document.getElementById('postTextContent').value = '';
            selectedPhotoForPost = null;
            selectedVideoForPost = null;
            selectedLocationForPost = null;
            taggedPeopleInPost = [];
            document.getElementById('selectedPhotoPreview').style.display = 'none';
            document.getElementById('selectedVideoPreview').style.display = 'none';
            document.getElementById('selectedLocation').style.display = 'none';
            document.getElementById('taggedPeople').style.display = 'none';
            document.getElementById('postPrivacy').textContent = '🌍 Public';

            closeModal('createPost');
            showToast('Post published successfully! 🎉');
        }

        // ========== CREATE STORY FUNCTIONS ==========
        
        function openStoryCamera() {
            closeModal('createStory');
            showToast('Opening camera... 📷');
            // Simulate camera opening
            setTimeout(() => {
                showToast('Camera ready! Snap a photo or record video');
            }, 1000);
        }

        function openStoryGallery() {
            closeModal('createStory');
            showToast('Opening gallery... 🖼️');
            // Simulate gallery opening with selection
            setTimeout(() => {
                showToast('Select photos or videos for your story');
            }, 1000);
        }

        // ========== GO LIVE FUNCTIONS ==========
        
        function selectLivePrivacy(privacy) {
            document.getElementById('livePrivacy').textContent = privacy;
            closeModal('selectLivePrivacy');
            showToast(`Privacy set to ${privacy}`);
        }

        function startLiveStream() {
            const title = document.getElementById('liveTitle').value;
            const description = document.getElementById('liveDescription').value;
            const privacy = document.getElementById('livePrivacy').textContent;

            if (!title) {
                showToast('Please add a title for your live stream');
                return;
            }

            closeModal('goLive');
            showToast('🔴 Going live...');
            
            // Simulate live stream starting
            setTimeout(() => {
                showToast('You are now LIVE! 🎥');
            }, 1500);
        }

        // ========== UPLOAD MEDIA FUNCTIONS ==========
        
        function selectMediaFromDevice() {
            showToast('Opening device file picker...');
            setTimeout(() => {
                showToast('Select photos or videos to upload');
            }, 800);
        }

        function selectPhotosFromGallery() {
            closeModal('uploadMedia');
            showToast('Opening photo gallery... 📷');
            setTimeout(() => {
                showToast('Photos selected! Ready to upload');
            }, 1000);
        }

        function selectVideosFromGallery() {
            closeModal('uploadMedia');
            showToast('Opening video gallery... 🎥');
            setTimeout(() => {
                showToast('Videos selected! Ready to upload');
            }, 1000);
        }

        // ========== CREATE EVENT FUNCTIONS ==========
        
        function createNewEvent() {
            const name = document.getElementById('eventName').value;
            const location = document.getElementById('eventLocation').value;
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const description = document.getElementById('eventDescription').value;

            if (!name || !location || !date || !time) {
                showToast('Please fill in all required fields');
                return;
            }

            closeModal('createEvent');
            showToast('Event created successfully! 📅');
            
            // Clear the form
            document.getElementById('eventName').value = '';
            document.getElementById('eventLocation').value = '';
            document.getElementById('eventDate').value = '';
            document.getElementById('eventTime').value = '';
            document.getElementById('eventDescription').value = '';
        }

        // ========== CREATE GROUP FUNCTIONS ==========
        
        function selectGroupPrivacy(privacy) {
            document.getElementById('groupPrivacy').textContent = privacy;
            closeModal('selectGroupPrivacy');
            showToast(`Privacy set to ${privacy}`);
        }

        function createNewGroup() {
            const name = document.getElementById('groupName').value;
            const description = document.getElementById('groupDescription').value;
            const privacy = document.getElementById('groupPrivacy').textContent;

            if (!name) {
                showToast('Please enter a group name');
                return;
            }

            closeModal('createGroup');
            showToast('Group created successfully! 👥');
            
            // Clear the form
            document.getElementById('groupName').value = '';
            document.getElementById('groupDescription').value = '';
            document.getElementById('groupPrivacy').textContent = 'Public';
        }

        // ========== CREATE POLL FUNCTIONS ==========
        
        function selectPollLength(length) {
            document.getElementById('pollLength').textContent = length;
            closeModal('selectPollLength');
            showToast(`Poll length set to ${length}`);
        }

        function createNewPoll() {
            const question = document.getElementById('pollQuestion').value;
            const option1 = document.getElementById('pollOption1').value;
            const option2 = document.getElementById('pollOption2').value;
            const length = document.getElementById('pollLength').textContent;

            if (!question || !option1 || !option2) {
                showToast('Please fill in the question and at least 2 options');
                return;
            }

            closeModal('createPoll');
            showToast('Poll created successfully! 📊');
            
            // Clear the form
            document.getElementById('pollQuestion').value = '';
            document.getElementById('pollOption1').value = '';
            document.getElementById('pollOption2').value = '';
            document.getElementById('pollLength').textContent = '1 day';
        }

        // ========== CREATE FUNDRAISER FUNCTIONS ==========
        
        function selectFundraiserCategory(category) {
            document.getElementById('fundraiserCategory').textContent = category;
            closeModal('selectFundraiserCategory');
            showToast(`Category set to ${category}`);
        }

        function createNewFundraiser() {
            const title = document.getElementById('fundraiserTitle').value;
            const goal = document.getElementById('fundraiserGoal').value;
            const description = document.getElementById('fundraiserDescription').value;
            const category = document.getElementById('fundraiserCategory').textContent;

            if (!title || !goal || !description || category === 'Select a category') {
                showToast('Please fill in all fields and select a category');
                return;
            }

            closeModal('createFundraiser');
            showToast('Fundraiser created successfully! 💰');
            
            // Clear the form
            document.getElementById('fundraiserTitle').value = '';
            document.getElementById('fundraiserGoal').value = '';
            document.getElementById('fundraiserDescription').value = '';
            document.getElementById('fundraiserCategory').textContent = 'Select a category';
        }

        // Add post to feed
        function addPostToFeed(post) {
            const feedScreen = document.getElementById('feed-screen');
            const createPostCard = feedScreen.querySelector('.card');
            
            const newPostHTML = `
                <div class="post-card" style="animation: slideUp 0.3s ease;">
                    <div class="post-header">
                        <div class="post-avatar">👤</div>
                        <div class="post-header-info">
                            <div class="post-author">John Doe</div>
                            <div class="post-meta">${post.timestamp} • ${post.privacy}</div>
                        </div>
                        <div class="post-menu" onclick="openModal('postOptions')">⋯</div>
                    </div>
                    ${post.text ? `<div class="post-content">${post.text}${post.location ? ` 📍 ${post.location}` : ''}${post.taggedPeople.length > 0 ? ` — with ${post.taggedPeople.map(p => p.name).join(', ')}` : ''}</div>` : ''}
                    ${post.photo ? `<div class="post-image">${post.photo}</div>` : ''}
                    ${post.video ? `<div class="post-image">${post.video}</div>` : ''}
                    <div class="post-actions">
                        <div class="post-action" onclick="toggleLikePost(this)">
                            <span>👍</span> Like
                        </div>
                        <div class="post-action" onclick="openModal('comments')">
                            <span>💬</span> Comment
                        </div>
                        <div class="post-action" onclick="sharePost()">
                            <span>🔄</span> Share
                        </div>
                    </div>
                </div>
            `;
            
            createPostCard.insertAdjacentHTML('afterend', newPostHTML);
        }

        // ========== IN-APP NOTIFICATION SYSTEM ==========
        
        let currentNotificationTimeout = null;
        let pendingNotification = null;
        let inAppNotificationsEnabled = true; // Default to enabled

        // Toggle in-app notifications on/off
        function toggleInAppNotifications(element) {
            element.classList.toggle('active');
            inAppNotificationsEnabled = element.classList.contains('active');
            
            if (inAppNotificationsEnabled) {
                showToast('In-app notifications enabled');
            } else {
                showToast('In-app notifications disabled');
                // Dismiss any currently showing notification
                dismissInAppNotification();
            }
        }

        // Show in-app notification banner
        function showInAppNotification(icon, title, text, action) {
            // Check if notifications are enabled
            if (!inAppNotificationsEnabled) {
                return; // Don't show notification if disabled
            }
            const notification = document.getElementById('inAppNotification');
            const notificationIcon = document.getElementById('notificationIcon');
            const notificationTitle = document.getElementById('notificationTitle');
            const notificationText = document.getElementById('notificationText');

            // Store the action for when notification is clicked
            pendingNotification = action;

            // Update notification content
            notificationIcon.textContent = icon;
            notificationTitle.textContent = title;
            notificationText.textContent = text;

            // Clear any existing timeout
            if (currentNotificationTimeout) {
                clearTimeout(currentNotificationTimeout);
            }

            // Show notification
            notification.classList.add('show');

            // Auto-dismiss after 5 seconds
            currentNotificationTimeout = setTimeout(() => {
                dismissInAppNotification();
            }, 5000);
        }

        // Dismiss in-app notification
        function dismissInAppNotification() {
            const notification = document.getElementById('inAppNotification');
            notification.classList.remove('show');
            pendingNotification = null;
            
            if (currentNotificationTimeout) {
                clearTimeout(currentNotificationTimeout);
                currentNotificationTimeout = null;
            }
        }

        // Handle notification click
        function handleInAppNotificationClick() {
            if (!pendingNotification) return;

            dismissInAppNotification();

            // Execute the action based on notification type
            if (pendingNotification.type === 'like' || pendingNotification.type === 'comment') {
                openScreen('feed');
            } else if (pendingNotification.type === 'friend_request') {
                openScreen('friends');
            } else if (pendingNotification.type === 'event') {
                openScreen('events');
            } else if (pendingNotification.type === 'gaming') {
                openScreen('gaming');
            } else if (pendingNotification.type === 'message') {
                openScreen('messages');
            }
        }

        // Simulate receiving new notifications (for demo purposes)
        function simulateNotifications() {
            const notifications = [
                { icon: '👍', title: 'New Like', text: 'Sarah liked your post', action: { type: 'like' } },
                { icon: '💬', title: 'New Comment', text: 'Mike commented on your photo', action: { type: 'comment' } },
                { icon: '👥', title: 'Friend Request', text: 'Emily sent you a friend request', action: { type: 'friend_request' } },
                { icon: '📅', title: 'Event Reminder', text: 'Tech Conference starts tomorrow', action: { type: 'event' } },
                { icon: '🎮', title: 'Achievement Unlocked', text: 'You leveled up to Level 43!', action: { type: 'gaming' } },
                { icon: '💬', title: 'New Message', text: 'You have 2 new messages', action: { type: 'message' } }
            ];

            let notificationIndex = 0;

            // Show first notification after 10 seconds
            setTimeout(() => {
                const notif = notifications[notificationIndex];
                showInAppNotification(notif.icon, notif.title, notif.text, notif.action);
                notificationIndex = (notificationIndex + 1) % notifications.length;

                // Continue showing notifications every 15 seconds
                setInterval(() => {
                    const notif = notifications[notificationIndex];
                    showInAppNotification(notif.icon, notif.title, notif.text, notif.action);
                    notificationIndex = (notificationIndex + 1) % notifications.length;
                }, 15000);
            }, 10000);
        }

        // Start simulating notifications on page load
        window.addEventListener('load', () => {
            simulateNotifications();
        });

        // ========== PROBLEM TYPE SELECTION & SUBMISSION ==========
        
        function selectProblemType(type) {
            document.getElementById('selectedProblemType').textContent = type;
            closeModal('selectProblemType');
            showToast(`Problem type: ${type}`);
        }

        function submitProblemReport() {
            const problemType = document.getElementById('selectedProblemType').textContent;
            const description = document.getElementById('problemDescription').value;

            if (problemType === 'Select a category') {
                showToast('Please select a problem type');
                return;
            }

            if (!description.trim()) {
                showToast('Please describe the problem');
                return;
            }

            closeModal('reportProblem');
            showToast('Problem report submitted successfully! ✓');
            
            // Clear the form
            document.getElementById('selectedProblemType').textContent = 'Select a category';
            document.getElementById('problemDescription').value = '';
        }

        // ========== AI ASSISTANT FUNCTIONS ==========
        
        function askAI(question) {
            const chatMessages = document.getElementById('aiChatMessages');
            
            // Add user question
            const userBubble = document.createElement('div');
            userBubble.className = 'chat-bubble sent';
            userBubble.textContent = question;
            chatMessages.appendChild(userBubble);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate AI response
            setTimeout(() => {
                const responses = {
                    'How do I reset my password?': 'To reset your password, go to Settings → Change Password. Enter your current password, then create a new strong password with at least 8 characters including letters, numbers, and symbols.',
                    'How do I change privacy settings?': 'Go to Settings → Privacy Settings to control who can see your posts, message you, and view your profile. You can set different privacy levels for different types of content.',
                    'How do I report a problem?': 'To report a problem, go to Help & Support → Report a Problem. Select the problem type and describe the issue in detail. Our team will review and respond within 24 hours.',
                    'How do I delete my account?': 'To delete your account permanently, go to Settings → Data Settings → Delete Account. Please note this action is permanent and cannot be undone. All your data will be removed.'
                };
                
                const aiBubble = document.createElement('div');
                aiBubble.className = 'chat-bubble received';
                aiBubble.textContent = responses[question] || 'I can help you with account security, privacy settings, reporting problems, and account management. What would you like to know more about?';
                chatMessages.appendChild(aiBubble);
                
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 800);
        }

        function sendToAI() {
            const input = document.getElementById('aiAssistantInput');
            const question = input.value.trim();
            
            if (!question) {
                showToast('Please type a question');
                return;
            }
            
            askAI(question);
            input.value = '';
        }

        // Add enter key support for AI assistant
        document.addEventListener('DOMContentLoaded', () => {
            const aiInput = document.getElementById('aiAssistantInput');
            if (aiInput) {
                aiInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        sendToAI();
                    }
                });
            }
        });

        // ========== PRIVACY SETTINGS FUNCTIONS ==========
        
        function updatePostVisibility(visibility) {
            // Update the privacy settings screen
            const element = document.querySelector('#privacySettingsModal .list-item:first-child .list-item-subtitle');
            if (element) {
                element.textContent = visibility;
            }
            closeModal('whoCanSeeMyPosts');
            showToast(`Post visibility set to ${visibility}`);
        }

        function updateMessagePrivacy(privacy) {
            // Update the privacy settings screen
            const element = document.querySelector('#privacySettingsModal .list-item:nth-child(2) .list-item-subtitle');
            if (element) {
                element.textContent = privacy;
            }
            closeModal('whoCanMessageMe');
            showToast(`Message privacy set to ${privacy}`);
        }

        function updateProfileVisibility(visibility) {
            // Update the privacy settings screen
            const element = document.querySelector('#privacySettingsModal .list-item:nth-child(3) .list-item-subtitle');
            if (element) {
                element.textContent = visibility;
            }
            closeModal('profileVisibility');
            showToast(`Profile visibility set to ${visibility}`);
        }

        // ========== DATA SETTINGS FUNCTIONS ==========
        
        function requestDataDownload() {
            closeModal('downloadYourData');
            showToast('Data download requested! 📥');
            
            // Simulate processing
            setTimeout(() => {
                showToast('We\'ll notify you when your data is ready (within 48 hours)');
            }, 2000);
        }

        function confirmDeactivateAccount() {
            const password = document.getElementById('deactivatePassword').value;

            if (!password.trim()) {
                showToast('Please enter your password to confirm');
                return;
            }

            closeModal('deactivateAccount');
            showToast('Account deactivated successfully');
            
            // Simulate account deactivation
            setTimeout(() => {
                showToast('Your account has been temporarily disabled');
            }, 1500);
            
            // Clear the password field
            document.getElementById('deactivatePassword').value = '';
        }

        function confirmDeleteAccount() {
            const password = document.getElementById('deletePassword').value;
            const confirmToggle = document.getElementById('deleteConfirmToggle');

            if (!password.trim()) {
                showToast('Please enter your password');
                return;
            }

            if (!confirmToggle.classList.contains('active')) {
                showToast('Please confirm you understand this is permanent');
                return;
            }

            closeModal('deleteAccount');
            showToast('Account deletion initiated...');
            
            // Simulate account deletion process
            setTimeout(() => {
                showToast('Your account will be deleted within 30 days. You can cancel during this period.');
            }, 2000);
            
            // Clear the form
            document.getElementById('deletePassword').value = '';
            confirmToggle.classList.remove('active');
        }

        // ========== ACCOUNT PREFERENCES FUNCTIONS ==========
        
        function updateLanguage(language) {
            document.getElementById('selectedLanguage').textContent = language;
            closeModal('selectLanguage');
            showToast(`Language set to ${language}`);
        }

        function updateTimezone(timezone) {
            document.getElementById('selectedTimezone').textContent = timezone;
            closeModal('selectTimezone');
            showToast(`Timezone set to ${timezone}`);
        }

        function updateDateFormat(format) {
            document.getElementById('selectedDateFormat').textContent = format;
            closeModal('selectDateFormat');
            showToast(`Date format set to ${format}`);
        }

        // ========== PROFILE PRIVACY FUNCTIONS ==========
        
        function updateFriendRequestsPrivacy(setting) {
            document.getElementById('friendRequestsPrivacy').textContent = setting;
            closeModal('whoCanSendFriendRequests');
            showToast(`Friend requests: ${setting}`);
        }

        function updateFriendsListPrivacy(setting) {
            document.getElementById('friendsListPrivacy').textContent = setting;
            closeModal('whoCanSeeFriendsList');
            showToast(`Friends list visibility: ${setting}`);
        }

        // ========== NAVIGATE TO MESSAGES FUNCTION ==========
        
        function navigateToMessages(fromModal) {
            // Close the current modal
            closeModal(fromModal);
            
            // Switch to messages tab in bottom navigation
            document.querySelectorAll('.bottom-nav .nav-item').forEach(item => item.classList.remove('active'));
            document.querySelectorAll('.bottom-nav .nav-item')[2].classList.add('active'); // Messages is 3rd item (index 2)
            
            // Show messages screen
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('messages-screen').classList.add('active');
            
            currentBottomTab = 'messages';
            currentScreen = 'messages';
            
            showToast('Opening Messages... 💬');
        }
    </script>
</body>
</html>
