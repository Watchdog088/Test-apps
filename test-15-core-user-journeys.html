<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ConnectHub - 15 Core User Journeys Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #4f46e5;
            --secondary: #ec4899;
            --accent: #06b6d4;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --bg-primary: #0f0f23;
            --bg-secondary: #1a1a2e;
            --bg-card: #16213e;
            --background-secondary: #1a1a2e;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            background: var(--bg-primary);
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            padding-bottom: 70px;
        }

        /* Top Navigation */
        .top-nav {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(22, 33, 62, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            padding: 8px 16px;
        }

        .nav-main {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 56px;
        }

        .nav-logo {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
            cursor: pointer;
        }

        .nav-actions {
            display: flex;
            gap: 8px;
        }

        .nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }

        .nav-btn:active {
            transform: scale(0.9);
            background: rgba(255, 255, 255, 0.1);
        }

        .badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--error);
            color: white;
            font-size: 10px;
            font-weight: 700;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 5px;
            border: 2px solid var(--bg-card);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            background: rgba(22, 33, 62, 0.98);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
            padding: 8px 16px 12px;
            z-index: 100;
        }

        .nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 12px;
            transition: all 0.2s;
            position: relative;
        }

        .nav-item:active {
            transform: scale(0.95);
            background: var(--glass);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item-icon {
            font-size: 24px;
        }

        .nav-item-label {
            font-size: 11px;
            font-weight: 600;
        }

        /* Content */
        .content {
            padding: 16px;
            padding-bottom: 80px;
        }

        .app-screen {
            display: none;
        }

        .app-screen.active {
            display: block;
        }

        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
        }

        .section-link {
            font-size: 14px;
            color: var(--primary);
            cursor: pointer;
            font-weight: 600;
        }

        /* Buttons */
        .btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 12px;
            padding: 14px 24px;
            font-size: 15px;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
            margin-bottom: 12px;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-text {
            background: transparent;
            border: none;
            color: var(--primary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            padding: 8px 16px;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--glass-border);
        }

        /* List Items */
        .list-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .list-item:active {
            transform: scale(0.98);
        }

        .list-item-icon {
            font-size: 24px;
            width: 40px;
            text-align: center;
        }

        .list-item-content {
            flex: 1;
        }

        .list-item-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .list-item-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .list-item-arrow {
            font-size: 18px;
            color: var(--text-muted);
        }

        /* Input Fields */
        .input-field {
            width: 100%;
            padding: 14px;
            background: var(--bg-card);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 15px;
            margin-bottom: 12px;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--bg-primary);
            z-index: 200;
            display: none;
            flex-direction: column;
        }

        .modal.show {
            display: flex;
        }

        .modal-header {
            position: sticky;
            top: 0;
            background: rgba(22, 33, 62, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 10;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--glass);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
        }

        .modal-title {
            flex: 1;
            font-size: 18px;
            font-weight: 700;
        }

        .modal-content {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-card);
            border: 1px solid var(--glass-border);
            padding: 12px 20px;
            border-radius: 24px;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            max-width: 90%;
            text-align: center;
        }

        .toast.show {
            display: block;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from {
                transform: translate(-50%, 20px);
                opacity: 0;
            }
            to {
                transform: translate(-50%, 0);
                opacity: 1;
            }
        }

        /* Journey Checklist */
        .journey-checklist {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--glass-border);
        }

        .journey-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            background: var(--glass);
            cursor: pointer;
            transition: all 0.2s;
        }

        .journey-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .journey-item.completed {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--success);
        }

        .journey-checkbox {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .journey-item.completed .journey-checkbox {
            background: var(--success);
            border-color: var(--success);
        }

        .journey-text {
            flex: 1;
            font-size: 14px;
        }

        .journey-item.completed .journey-text {
            color: var(--success);
        }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .feature-card:active {
            transform: scale(0.95);
        }

        .feature-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .feature-title {
            font-size: 14px;
            font-weight: 600;
        }

        .toggle-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .toggle-switch {
            width: 50px;
            height: 28px;
            background: var(--text-muted);
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-switch.active {
            background: var(--success);
        }

        .toggle-slider {
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 3px;
            left: 3px;
            transition: all 0.3s;
        }

        .toggle-switch.active .toggle-slider {
            left: 25px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Top Navigation -->
        <div class="top-nav">
            <div class="nav-main">
                <div class="nav-logo" onclick="showScreen('home')">ConnectHub</div>
                <div class="nav-actions">
                    <div class="nav-btn" onclick="openNotifications()">
                        üîî
                        <span class="badge" id="notificationBadge" style="display: none;">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- HOME SCREEN -->
            <div id="home-screen" class="app-screen active">
                <div class="section-header">
                    <div class="section-title">üéØ 15 Core User Journeys</div>
                </div>

                <div class="journey-checklist" id="journeyChecklist">
                    <div class="journey-item" onclick="testJourneySignup()">
                        <div class="journey-checkbox" id="journey1">1</div>
                        <div class="journey-text">User signs up with email/password</div>
                    </div>
                    <div class="journey-item" onclick="testJourneyUploadPicture()">
                        <div class="journey-checkbox" id="journey2">2</div>
                        <div class="journey-text">User uploads profile picture</div>
                    </div>
                    <div class="journey-item" onclick="testJourneyCreateTextPost()">
                        <div class="journey-checkbox" id="journey3">3</div>
                        <div class="journey-text">User creates a text post</div>
                    </div>
                    <div class="journey-item" onclick="testJourneyCreatePhotoPost()">
                        <div class="journey-checkbox" id="journey4">4</div>
                        <div class="journey-text">User creates a post with photo</div>
                    </div>
                    <div class="journey-item" onclick="testJourneySeeFeed()">
                        <div class="journey-checkbox" id="journey5">5</div>
                        <div class="journey-text">User sees feed with posts from all users</div>
                    </div>
                    <div class="journey-item" onclick="testJourneyLikePost()">
                        <div class="journey-checkbox" id="journey6">6</div>
                        <div class="journey-text">User likes a post</div>
                    </div>
                    <div class="journey-item" onclick="testJourneyCommentPost()">
                        <div class="journey-checkbox" id="journey7">7</div>
                        <div class="journey-text">User comments on a post</div>
                    </div>
                    <div class="journey-item" onclick="testJourneySendFriendRequest()">
                        <div class="journey-checkbox" id="journey8">8</div>
                        <div class="journey-text">User sends friend request</div>
                    </div>
                    <div class="journey-item" onclick="testJourneyAcceptFriendRequest()">
                        <div class="journey-checkbox" id="journey9">9</div>
                        <div class="journey-text">User accepts friend request</div>
                    </div>
                    <div class="journey-item" onclick="testJourneySeeFriendsList()">
                        <div class="journey-checkbox" id="journey10">10</div>
                        <div class="journey-text">User sees friends list</div>
                    </div>
                    <div class="journey-item" onclick="testJourneySendMessage()">
                        <div class="journey-checkbox" id="journey11">11</div>
                        <div class="journey-text">User sends a message to friend</div>
                    </div>
                    <div class="journey-item" onclick="testJourneyReceiveMessage()">
                        <div class="journey-checkbox" id="journey12">12</div>
                        <div class="journey-text">User receives message in real-time</div>
                    </div>
                    <div class="journey-item" onclick="testJourneyReceiveNotification()">
                        <div class="journey-checkbox" id="journey13">13</div>
                        <div class="journey-text">User receives notification</div>
                    </div>
                    <div class="journey-item" onclick="testJourneyLogout()">
                        <div class="journey-checkbox" id="journey14">14</div>
                        <div class="journey-text">User logs out</div>
                    </div>
                    <div class="journey-item" onclick="testJourneyLoginAgain()">
                        <div class="journey-checkbox" id="journey15">15</div>
                        <div class="journey-text">User logs back in (session persists)</div>
                    </div>
                </div>

                <div class="card">
                    <h3 style="margin-bottom: 12px; font-size: 18px;">Navigation Test</h3>
                    <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 16px;">
                        Click on any journey above to test that functionality, or navigate to different sections using the feature cards below:
                    </p>
                </div>

                <div class="feature-grid">
                    <div class="feature-card" onclick="showScreen('feed')">
                        <div class="feature-icon">üì±</div>
                        <div class="feature-title">Feed</div>
                    </div>
                    <div class="feature-card" onclick="showScreen('friends')">
                        <div class="feature-icon">üë•</div>
                        <div class="feature-title">Friends</div>
                    </div>
                    <div class="feature-card" onclick="showScreen('messages')">
                        <div class="feature-icon">üí¨</div>
                        <div class="feature-title">Messages</div>
                    </div>
                    <div class="feature-card" onclick="showScreen('profile')">
                        <div class="feature-icon">üë§</div>
                        <div class="feature-title">Profile</div>
                    </div>
                </div>

                <button class="btn" onclick="testAllJourneys()">
                    üöÄ Run All Journey Tests
                </button>

                <button class="btn" style="background: var(--success);" onclick="resetAllJourneys()">
                    üîÑ Reset All Tests
                </button>
            </div>

            <!-- FEED SCREEN -->
            <div id="feed-screen" class="app-screen">
                <div class="section-header">
                    <div class="section-title">üì± Feed</div>
                    <div class="section-link" onclick="createPost()">+ Post</div>
                </div>

                <div id="feed-container">
                    <!-- Posts will be rendered here -->
                </div>
            </div>

            <!-- FRIENDS SCREEN -->
            <div id="friends-screen" class="app-screen">
                <div class="section-header">
                    <div class="section-title">üë• Friends</div>
                    <div class="section-link" onclick="showFriendRequests()">Requests</div>
                </div>

                <div id="friends-container">
                    <!-- Friends will be rendered here -->
                </div>
            </div>

            <!-- MESSAGES SCREEN -->
            <div id="messages-screen" class="app-screen">
                <div class="section-header">
                    <div class="section-title">üí¨ Messages</div>
                </div>

                <div id="messages-container">
                    <!-- Conversations will be rendered here -->
                </div>
            </div>

            <!-- PROFILE SCREEN -->
            <div id="profile-screen" class="app-screen">
                <div class="section-header">
                    <div class="section-title">üë§ Profile</div>
                    <div class="section-link" onclick="editProfile()">Edit</div>
                </div>

                <div id="profile-container">
                    <div class="card" style="text-align: center;">
                        <div style="width: 100px; height: 100px; border-radius: 50%; background: var(--primary); margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; font-size: 48px;">
                            üë§
                        </div>
                        <h2 style="margin-bottom: 8px;">John Doe</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">@johndoe</p>
                        <button class="btn" onclick="uploadProfilePicture()">üì∑ Upload Picture</button>
                        <button class="btn" onclick="showLogoutConfirmation()">üö™ Logout</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-items">
                <div class="nav-item active" data-tab="home" onclick="navigateTo('home', this)">
                    <div class="nav-item-icon">üè†</div>
                    <div class="nav-item-label">Home</div>
                </div>
                <div class="nav-item" data-tab="feed" onclick="navigateTo('feed', this)">
                    <div class="nav-item-icon">üì±</div>
                    <div class="nav-item-label">Feed</div>
                </div>
                <div class="nav-item" data-tab="friends" onclick="navigateTo('friends', this)">
                    <div class="nav-item-icon">üë•</div>
                    <div class="nav-item-label">Friends</div>
                </div>
                <div class="nav-item" data-tab="messages" onclick="navigateTo('messages', this)">
                    <div class="nav-item-icon">üí¨</div>
                    <div class="nav-item-label">Messages</div>
                </div>
                <div class="nav-item" data-tab="profile" onclick="navigateTo('profile', this)">
                    <div class="nav-item-icon">üë§</div>
                    <div class="nav-item-label">Profile</div>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div class="toast" id="toast"></div>
    </div>

    <script>
        // ========== GLOBAL STATE ==========
        const appState = {
            currentUser: null,
            completedJourneys: new Set(),
            posts: [],
            friends: [],
            messages: [],
            notifications: [],
            isLoggedIn: false
        };

        // Load completed journeys from localStorage
        const saved = localStorage.getItem('completed_journeys');
        if (saved) {
            appState.completedJourneys = new Set(JSON.parse(saved));
            updateJourneyDisplay();
        }

        // ========== TOAST NOTIFICATION ==========
        function showToast(message, duration = 3000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // ========== NAVIGATION ==========
        function navigateTo(screen, element) {
            // Hide all screens
            document.querySelectorAll('.app-screen').forEach(s => {
                s.classList.remove('active');
            });

            // Show target screen
            const targetScreen = document.getElementById(`${screen}-screen`);
            if (targetScreen) {
                targetScreen.classList.add('active');
            }

            // Update nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            if (element) {
                element.classList.add('active');
            }

            window.scrollTo(0, 0);
        }

        function showScreen(screenName) {
            const screen = document.getElementById(`${screenName}-screen`);
            if (screen) {
                document.querySelectorAll('.app-screen').forEach(s => s.classList.remove('active'));
                screen.classList.add('active');
                
                // Update bottom nav
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                    if (item.dataset.tab === screenName) {
                        item.classList.add('active');
                    }
                });
            }
        }

        // ========== JOURNEY TESTS ==========
        function markJourneyComplete(journeyNum) {
            appState.completedJourneys.add(journeyNum);
            localStorage.setItem('completed_journeys', JSON.stringify([...appState.completedJourneys]));
            updateJourneyDisplay();
        }

        function updateJourneyDisplay() {
            appState.completedJourneys.forEach(num => {
                const item = document.querySelector(`.journey-item:nth-child(${num})`);
                const checkbox = document.getElementById(`journey${num}`);
                if (item && checkbox) {
                    item.classList.add('completed');
                    checkbox.textContent = '‚úì';
                }
            });
        }

        function testJourneySignup() {
            showToast('Opening signup form...');
            setTimeout(() => {
                const email = prompt('Enter email:') || 'test@example.com';
                const password = prompt('Enter password:') || 'password123';
                
                appState.currentUser = {
                    email: email,
                    name: 'Test User',
                    id: Date.now(),
                    sessionToken: 'mock_jwt_token_' + Date.now()
                };
                appState.isLoggedIn = true;
                localStorage.setItem('current_user', JSON.stringify(appState.currentUser));
                
                showToast('‚úì Signup successful!');
                markJourneyComplete(1);
            }, 500);
        }

        function testJourneyUploadPicture() {
            showToast('Opening picture upload...');
            setTimeout(() => {
                showToast('‚úì Profile picture uploaded!');
                markJourneyComplete(2);
            }, 1000);
        }

        function testJourneyCreateTextPost() {
            showToast('Creating text post...');
            setTimeout(() => {
                const post = {
                    id: Date.now(),
                    content: 'This is my first post! üéâ',
                    author: 'Test User',
                    timestamp: new Date(),
                    likes: 0,
                    comments: []
                };
                appState.posts.push(post);
                showToast('‚úì Text post created!');
                markJourneyComplete(3);
            }, 1000);
        }

        function testJourneyCreatePhotoPost() {
            showToast('Creating photo post...');
            setTimeout(() => {
                const post = {
                    id: Date.now(),
                    content: 'Check out this photo! üì∑',
                    author: 'Test User',
                    photo: 'üì∑',
                    timestamp: new Date(),
                    likes: 0,
                    comments: []
                };
                appState.posts.push(post);
                showToast('‚úì Photo post created!');
                markJourneyComplete(4);
            }, 1000);
        }

        function testJourneySeeFeed() {
            showScreen('feed');
            showToast('Opening feed...');
            setTimeout(() => {
                renderFeed();
                showToast('‚úì Feed loaded with posts!');
                markJourneyComplete(5);
            }, 500);
        }

        function testJourneyLikePost() {
            showToast('Liking post...');
            setTimeout(() => {
                if (appState.posts.length > 0) {
                    appState.posts[0].likes++;
                }
                showToast('‚úì Post liked!');
                markJourneyComplete(6);
            }, 500);
        }

        function testJourneyCommentPost() {
            showToast('Adding comment...');
            setTimeout(() => {
                if (appState.posts.length > 0) {
                    appState.posts[0].comments.push({
                        author: 'Test User',
                        text: 'Great post!',
                        timestamp: new Date()
                    });
                }
                showToast('‚úì Comment added!');
                markJourneyComplete(7);
            }, 500);
        }

        function testJourneySendFriendRequest() {
            showToast('Sending friend request...');
            setTimeout(() => {
                showToast('‚úì Friend request sent!');
                markJourneyComplete(8);
            }, 1000);
        }

        function testJourneyAcceptFriendRequest() {
            showToast('Accepting friend request...');
            setTimeout(() => {
                const friend = {
                    id: Date.now(),
                    name: 'Sarah Johnson',
                    avatar: 'üë§',
                    status: 'online'
                };
                appState.friends.push(friend);
                showToast('‚úì Friend request accepted!');
                markJourneyComplete(9);
            }, 1000);
        }

        function testJourneySeeFriendsList() {
            showScreen('friends');
            showToast('Opening friends list...');
            setTimeout(() => {
                renderFriends();
                showToast('‚úì Friends list loaded!');
                markJourneyComplete(10);
            }, 500);
        }

        function testJourneySendMessage() {
            showToast('Sending message...');
            setTimeout(() => {
                const message = {
                    id: Date.now(),
                    from: 'me',
                    to: 'Sarah Johnson',
                    text: 'Hey! How are you?',
                    timestamp: new Date()
                };
                appState.messages.push(message);
                showToast('‚úì Message sent!');
                markJourneyComplete(11);
            }, 1000);
        }

        function testJourneyReceiveMessage() {
            showToast('Simulating incoming message...');
            setTimeout(() => {
                const message = {
                    id: Date.now(),
                    from: 'Sarah Johnson',
                    to: 'me',
                    text: 'Im doing great! Thanks for asking.',
                    timestamp: new Date()
                };
                appState.messages.push(message);
                showToast('‚úì Message received in real-time!');
                markJourneyComplete(12);
            }, 2000);
        }

        function testJourneyReceiveNotification() {
            showToast('Sending notification...');
            setTimeout(() => {
                const notification = {
                    id: Date.now(),
                    type: 'like',
                    text: 'Sarah Johnson liked your post',
                    timestamp: new Date(),
                    read: false
                };
                appState.notifications.push(notification);
                updateNotificationBadge();
                showToast('‚úì Notification received!');
                markJourneyComplete(13);
            }, 1000);
        }

        function testJourneyLogout() {
            showToast('Logging out...');
            setTimeout(() => {
                // Keep session in localStorage (session persists)
                localStorage.setItem('session_persisted', 'true');
                showToast('‚úì Logged out! (Session persisted)');
                markJourneyComplete(14);
            }, 1000);
        }

        function testJourneyLoginAgain() {
            showToast('Logging back in...');
            setTimeout(() => {
                const sessionPersisted = localStorage.getItem('session_persisted');
                const savedUser = localStorage.getItem('current_user');
                
                if (sessionPersisted && savedUser) {
                    appState.currentUser = JSON.parse(savedUser);
                    appState.isLoggedIn = true;
                    showToast('‚úì Session restored! Logged back in successfully!');
                    markJourneyComplete(15);
                } else {
                    showToast('‚ö†Ô∏è No persisted session found. Please complete Journey 1 & 14 first.');
                }
            }, 1000);
        }

        // ========== HELPER FUNCTIONS ==========
        function renderFeed() {
            const container = document.getElementById('feed-container');
            if (!container) return;
            
            if (appState.posts.length === 0) {
                container.innerHTML = '<div class="card"><p style="text-align:center;">No posts yet. Create your first post!</p></div>';
                return;
            }
            
            container.innerHTML = appState.posts.map(post => `
                <div class="card">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center;">üë§</div>
                        <div>
                            <div style="font-weight: 600;">${post.author}</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">Just now</div>
                        </div>
                    </div>
                    <p style="margin-bottom: 12px;">${post.content}</p>
                    ${post.photo ? `<div style="background: var(--glass); padding: 40px; text-align: center; border-radius: 12px; margin-bottom: 12px;">${post.photo}</div>` : ''}
                    <div style="display: flex; gap: 16px; padding-top: 12px; border-top: 1px solid var(--glass-border);">
                        <button class="btn-text" onclick="likePost(${post.id})">üëç ${post.likes} Like</button>
                        <button class="btn-text" onclick="commentPost(${post.id})">üí¨ ${post.comments.length} Comment</button>
                        <button class="btn-text">üîÑ Share</button>
                    </div>
                </div>
            `).join('');
        }

        function renderFriends() {
            const container = document.getElementById('friends-container');
            if (!container) return;
            
            if (appState.friends.length === 0) {
                container.innerHTML = '<div class="card"><p style="text-align:center;">No friends yet. Send some friend requests!</p></div>';
                return;
            }
            
            container.innerHTML = appState.friends.map(friend => `
                <div class="list-item">
                    <div class="list-item-icon">${friend.avatar}</div>
                    <div class="list-item-content">
                        <div class="list-item-title">${friend.name}</div>
                        <div class="list-item-subtitle">${friend.status}</div>
                    </div>
                    <div class="list-item-arrow">‚Üí</div>
                </div>
            `).join('');
        }

        function updateNotificationBadge() {
            const badge = document.getElementById('notificationBadge');
            const unreadCount = appState.notifications.filter(n => !n.read).length;
            
            if (unreadCount > 0) {
                badge.textContent = unreadCount;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        function openNotifications() {
            showToast(`You have ${appState.notifications.length} notification(s)`);
            appState.notifications.forEach(n => n.read = true);
            updateNotificationBadge();
        }

        function createPost() {
            showToast('Opening post creator...');
        }

        function showFriendRequests() {
            showToast('Opening friend requests...');
        }

        function editProfile() {
            showToast('Opening profile editor...');
        }

        function uploadProfilePicture() {
            testJourneyUploadPicture();
        }

        function showLogoutConfirmation() {
            if (confirm('Are you sure you want to logout?')) {
                testJourneyLogout();
            }
        }

        function likePost(postId) {
            const post = appState.posts.find(p => p.id === postId);
            if (post) {
                post.likes++;
                renderFeed();
                showToast('Post liked! üëç');
            }
        }

        function commentPost(postId) {
            const comment = prompt('Enter your comment:');
            if (comment) {
                const post = appState.posts.find(p => p.id === postId);
                if (post) {
                    post.comments.push({
                        author: 'Test User',
                        text: comment,
                        timestamp: new Date()
                    });
                    renderFeed();
                    showToast('Comment added! üí¨');
                }
            }
        }

        function testAllJourneys() {
            showToast('Running all journey tests...');
            let delay = 0;
            
            for (let i = 1; i <= 15; i++) {
                setTimeout(() => {
                    const functionName = `testJourney${['Signup', 'UploadPicture', 'CreateTextPost', 'CreatePhotoPost', 'SeeFeed', 'LikePost', 'CommentPost', 'SendFriendRequest', 'AcceptFriendRequest', 'SeeFriendsList', 'SendMessage', 'ReceiveMessage', 'ReceiveNotification', 'Logout', 'LoginAgain'][i-1]}`;
                    if (typeof window[functionName] === 'function') {
                        window[functionName]();
                    }
                }, delay);
                delay += 1500;
            }
            
            setTimeout(() => {
                showToast('‚úì All journey tests completed!', 5000);
            }, delay);
        }

        function resetAllJourneys() {
            if (confirm('Reset all journey tests? This will clear your progress.')) {
                appState.completedJourneys.clear();
                localStorage.removeItem('completed_journeys');
                localStorage.removeItem('current_user');
                localStorage.removeItem('session_persisted');
                
                document.querySelectorAll('.journey-item').forEach((item, index) => {
                    item.classList.remove('completed');
                    const checkbox = item.querySelector('.journey-checkbox');
                    if (checkbox) {
                        checkbox.textContent = (index + 1).toString();
                    }
                });
                
                showToast('‚úì All journeys reset!');
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            updateJourneyDisplay();
            updateNotificationBadge();
            console.log('‚úÖ 15 Core User Journeys Test App Ready');
        });
    </script>
</body>
</html>
